{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./src/components/ui/Slider.vue?e256","webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/d3-cloud/node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/vue-property-decorator/lib/helpers/metadata.js","webpack:///./node_modules/vue-property-decorator/lib/decorators/Prop.js","webpack:///./node_modules/vue-property-decorator/lib/decorators/Watch.js","webpack:///./src/components/ui/Slider.vue","webpack:///./src/components/ui/Slider.vue?dbd0","webpack:///./src/components/ui/Slider.vue?099f","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/d3-cloud/index.js","webpack:///./node_modules/d3-scale/node_modules/d3-array/src/ticks.js","webpack:///./node_modules/d3-format/src/formatSpecifier.js","webpack:///./node_modules/d3-format/src/formatDecimal.js","webpack:///./node_modules/d3-format/src/exponent.js","webpack:///./node_modules/d3-format/src/formatPrefixAuto.js","webpack:///./node_modules/d3-format/src/defaultLocale.js","webpack:///./node_modules/d3-format/src/precisionPrefix.js","webpack:///./node_modules/d3-format/src/formatGroup.js","webpack:///./node_modules/d3-format/src/formatNumerals.js","webpack:///./node_modules/d3-format/src/formatTrim.js","webpack:///./node_modules/d3-format/src/formatRounded.js","webpack:///./node_modules/d3-format/src/formatTypes.js","webpack:///./node_modules/d3-format/src/identity.js","webpack:///./node_modules/d3-format/src/locale.js","webpack:///./node_modules/d3-format/src/precisionRound.js","webpack:///./node_modules/d3-format/src/precisionFixed.js","webpack:///./node_modules/d3-scale/src/tickFormat.js","webpack:///./node_modules/d3-scale/src/linear.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/views/Tool.vue","webpack:///./node_modules/animejs/lib/anime.es.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/d3-scale/src/pow.js","webpack:///./node_modules/d3-array/src/min.js","webpack:///./node_modules/d3-array/src/max.js","webpack:///./src/assets/ts/layout.ts","webpack:///./src/assets/ts/utils.ts","webpack:///./src/assets/ts/animate.ts","webpack:///./src/assets/ts/color-preset.ts","webpack:///./node_modules/d3-dsv/src/autoType.js","webpack:///./src/views/Tool.vue?b962","webpack:///./src/views/Tool.vue?4052","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./node_modules/d3-scale/src/init.js","webpack:///./src/views/Tool.vue?4df3","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./node_modules/d3-scale/node_modules/d3-array/src/ascending.js","webpack:///./node_modules/d3-scale/node_modules/d3-array/src/bisector.js","webpack:///./node_modules/d3-scale/node_modules/d3-array/src/number.js","webpack:///./node_modules/d3-scale/node_modules/d3-array/src/bisect.js","webpack:///./node_modules/d3-interpolate/src/round.js","webpack:///./node_modules/d3-scale/src/constant.js","webpack:///./node_modules/d3-scale/src/number.js","webpack:///./node_modules/d3-scale/src/continuous.js"],"names":["_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","$","$values","values","target","stat","O","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","CHROME_VERSION","IS_NODE","STRICT_METHOD","USES_TO_LENGTH","1","CHROME_BUG","proto","forced","reduce","callbackfn","this","arguments","length","undefined","noop","value","dispatch","t","i","_","Error","Dispatch","parseTypenames","typenames","types","trim","split","map","indexOf","hasOwnProperty","type","get","c","set","callback","concat","push","on","typename","T","copy","that","args","apply","reflectMetadataIsSupported","Reflect","getMetadata","applyMetadata","options","key","isArray","Prop","componentOptions","k","props","Watch","path","_a","deep","_b","immediate","handler","watch","create","class","label","showValue","rangeClass","min","max","step","a","className","init","range","val","default","render","__scopeId","classof","module","exports","TypeError","cloudRadians","Math","PI","cw","ch","cloudText","d","text","cloudFont","cloudFontNormal","cloudFontSize","sqrt","cloudRotate","random","cloudPadding","cloudSprite","contextAndRatio","data","di","sprite","context","ratio","clearRect","x","y","maxh","font","style","weight","size","w","measureText","width","h","save","rotate","sr","sin","cr","cos","wcr","wsr","hcr","hsr","abs","translate","fillText","padding","lineWidth","strokeText","restore","height","xoff","yoff","x1","y1","x0","y0","hasText","pixels","getImageData","w32","seen","seenRow","j","m","cloudCollide","tag","board","sw","last","lx","sx","msx","cloudBounds","bounds","b0","b1","collideRects","b","archimedeanSpiral","e","rectangularSpiral","dy","dx","sign","zeroArray","cloudCanvas","document","createElement","functor","fontSize","fontStyle","fontWeight","spiral","words","timeInterval","Infinity","event","timer","cloud","canvas","getContext","fillStyle","strokeStyle","textAlign","place","dxdy","startX","startY","maxDelta","s","dt","start","tags","sort","clearInterval","setInterval","Date","now","stop","spirals","archimedean","rectangular","e10","e5","e2","reverse","ticks","count","tickIncrement","isFinite","r0","round","r1","power","floor","log","LN10","error","pow","tickStep","step0","step1","re","formatSpecifier","specifier","match","exec","FormatSpecifier","fill","align","symbol","zero","comma","precision","toLocaleString","replace","formatDecimalParts","p","toExponential","coefficient","prefixExponent","NaN","g","grouping","substring","join","thousands","numerals","out","i1","i0","exponent","toFixed","formatDecimal","toPrecision","formatRounded","formatPrefixAuto","toUpperCase","prefixes","group","locale","identity","formatGroup","Number","currencyPrefix","currency","currencySuffix","decimal","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","toLowerCase","suffix","formatType","maybeSuffix","format","valuePrefix","valueSuffix","valueNegative","isNaN","formatTrim","charCodeAt","formatPrefix","f","defaultLocale","definition","tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","scale","domain","nice","prestep","maxIter","ceil","linear","continuous","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread2","source","forEach","defineProperty","getOwnPropertyDescriptors","defineProperties","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","end","_arrayLikeToArray","arr","len","arr2","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","TO_ENTRIES","it","result","entries","__decorate","decorators","desc","r","decorate","global","isForced","redefine","has","inheritIfRequired","toPrimitive","fails","getOwnPropertyNames","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","index","code","parseInt","NumberWrapper","dummy","valueOf","toObject","nativeKeys","FAILS_ON_PRIMITIVES","toInteger","thisNumberValue","repeat","nativeToFixed","acc","x2","FORCED","fractionDigits","z","number","fractDigits","multiply","c2","divide","dataToString","RangeError","_createForOfIteratorHelper","allowArrayLike","Symbol","iterator","unsupportedIterableToArray","F","done","_e","err","normalCompletion","didErr","next","_e2","for","id","scope","isShowModal","accept","handleUpload","$event","wordleData","collection","item","colorScheme","colorSchemes","data-tag","fontFamily","fontFamilies","animationMode","animationModeChange","animationModes","speed","speedCallback","entropy","entropyCallback","play","pause","relayout","mask","ifMask","downloadConfig","upload","hidden","appear","hideModal","uploadData","frequency","openFile","generateEmordle","defaultInstanceSettings","update","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","complete","loop","direction","autoplay","timelineOffset","defaultTweenSettings","duration","delay","endDelay","easing","validTransforms","cache","CSS","springs","minMax","stringContains","str","applyArguments","func","is","obj","pth","svg","SVGElement","inp","HTMLInputElement","dom","nodeType","fnc","und","nil","hex","rgb","hsl","col","parseEasingParameters","parseFloat","spring","params","mass","stiffness","damping","velocity","w0","zeta","wd","solver","progress","exp","getDuration","cached","frame","elapsed","rest","steps","bezier","kSplineTableSize","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","mY1","mY2","sampleValues","Float32Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","penner","eases","functionEasings","Sine","Circ","Back","Bounce","pow2","Elastic","amplitude","period","asin","baseEasings","easeIn","parseEasings","ease","selectString","nodes","querySelectorAll","filterArray","thisArg","flattenArray","toArray","NodeList","HTMLCollection","arrayContains","some","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","rgbToRgba","rgbValue","hexToRgba","hexValue","rgx","hslToRgba","hslValue","l","hue2rgb","q","colorToRgb","getUnit","getTransformUnit","propName","getFunctionValue","animatable","total","getAttribute","el","prop","convertPxToUnit","unit","valueUnit","baseline","tempEl","tagName","parentEl","parentNode","body","appendChild","position","factor","offsetWidth","removeChild","convertedUnit","getCSSValue","uppercasePropName","getComputedStyle","getPropertyValue","getAnimationType","getElementTransforms","transform","reg","transforms","Map","getTransformValue","defaultVal","list","getOriginalTargetValue","getRelativeValue","to","operator","u","validateValue","originalUnit","unitLess","substr","getDistance","p1","p2","getCircleLength","getRectLength","getLineLength","getPolylineLength","previousPos","points","totalLength","numberOfItems","currentPos","getItem","getPolygonLength","getTotalLength","setDashoffset","pathLength","setAttribute","getParentSvgEl","getParentSvg","pathEl","svgData","parentSvgEl","rect","getBoundingClientRect","viewBoxAttr","viewBox","vW","vH","getPath","property","getPathProgress","isPathTargetInsideSVG","point","offset","getPointAtLength","p0","scaleX","scaleY","atan2","decomposeValue","original","numbers","strings","parseTargets","targets","targetsArray","pos","self","getAnimatables","parsed","normalizePropertyTweens","tweenSettings","settings","isFromTo","propArray","v","flattenKeyframes","keyframes","propertyNames","properties","newKey","getProperties","tweens","normalizeTweenValues","tween","normalizeTweens","previousTween","tweenValue","toUnit","originalValue","previousValue","fromUnit","isPath","isColor","setProgressValue","css","attribute","manual","setTargetsValue","animatables","animType","createAnimation","lastTween","getAnimations","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","instanceID","createNewInstance","instanceSettings","children","activeInstances","engine","raf","isDocumentHidden","anime","suspendWhenDocumentHidden","requestAnimationFrame","activeInstancesLength","activeInstance","paused","splice","tick","handleVisibilityChange","cancelAnimationFrame","instance","_onDocumentVisibility","addEventListener","startTime","lastTime","childrenLength","resolve","makePromise","promise","window","Promise","_resolve","finished","toggleInstanceDirection","reversed","child","adjustTime","time","resetTime","currentTime","seekChild","seek","syncInstanceChildren","reversePlayback","i$1","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","toNumbersLength","fromNumber","stringsLength","n$1","currentValue","setCallback","cb","passThrough","countIteration","remaining","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","began","loopBegan","changeBegan","changeCompleted","completed","reset","restart","remove","removeTargetsFromInstance","removeTargetsFromAnimations","childAnimations","removeTargetsFromActiveInstances","grid","axis","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","maxValue","fromX","fromY","toX","toY","distanceX","distanceY","spacing","timeline","tl","add","instanceParams","tlIndex","ins","insParams","tlDuration","version","running","convertPx","stagger","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","transformPow","transformSqrt","transformSquare","powish","rescale","valueof","defaultStyleSheet","spiralType","rotation","specStyleSheet","copySheet","assign","styleSheet","freqList","sizeRange","wordScale","idx","word","config2Word","layout","WIDTH","HEIGHT","configs","config","top","color","offx","offy","bbox","testSize","DivideMode","SchemeType","getRandomInt","sanityChecknFill","compute","alert","applyStyle","textContent","elem","opacity","rectCopy","initDraggableText","divId","draggableTexts","container","querySelector","innerHTML","classList","draggableTextProp","mousePosition","isDown","initData","textProp","mouseEnterCallBack","mouseLeaveCallBack","mouseMoveCallBack","onmouseleave","clientX","clientY","leftMouseDrag","topMouseDrag","offsetHeight","mouseDownCallBack","cursor","offsetLeft","offsetTop","onmousemove","mouseUpCallBack","draw","createPoint","background","calculateCenter","positions","center","element","getTextCenter","needDraw","leftTops","rightBots","leftTopX","leftTopY","rightTopX","leftBotY","rightBotX","rightBotY","centerLeftTop","centerRightBots","centerMid","leftTopMid","rightBotMid","textToChars","textElem","charElems","charEl","fontVariant","animeParams","shuffle","array","tempVal","randIdx","currIdx","getMatrix","row","matrix","slot","animationInstances","translateY","theta","translateX","extent","textElems","selector","fontVariationSettings","skew","scheme","happy","xy","nervous","sad","angry","fearful","tender","still","splitGroup","schemeFunc","numGroup","numWordsPerGroup","assignedWords","results","startIdx","endIdx","centers","splitCenters","alias","kmResult","kmeans","wordBags","indexes","bag","alpha","numGroups","rainbow","calm","negative","positive","disturbing","serious","playful","trustworthy","black","gray","red","getColor","console","autoType","fixtz","getHours","fileNames","fileReader","FileReader","uploadFilename","initLayout","res","parseFile","all","d3","then","rawData","selectAll","initiateData","colorSet","colorSchemeChanged","animate","animator","getAnimationScheme","setTimeout","offsetL","offsetT","removeAttribute","files","file","readAsText","dataset","btn","display","getElementById","click","changeData","newFileFlag","sanity","insertDataset","jsonData","csvData","href","URL","createObjectURL","Blob","download","components","Slider","$includes","includes","addToUnscopables","ACCESSORS","initRange","getOwnPropertyDescriptorModule","createProperty","sham","descriptor","nativeGetOwnPropertyDescriptor","delta","compare","lo","hi","mid","right","ascendingComparator","ascending","ascendingBisect","bisector","bisectRight","bisect","constants","normalize","clamper","bimap","interpolate","d0","d1","polymap","clamp","unknown","transformer","untransform","piecewise","output","input","invert","rangeRound"],"mappings":"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uqB,GAAkBnsB,OAAS,EAC3Bw0B,EAAS,EAAI13B,KAAKC,GAAM,EACxB03B,EAAYr8B,KAAKs7B,SACd7G,EAAM,EAAGA,EAAM4H,EAAW5H,IAAO,CACxC,IAAM2F,EAAe,EAAN3F,EAAU/vB,KAAKC,GAAM03B,EAAYD,EAC1Cp2B,EAAInC,EAAIa,KAAKsC,IAAIozB,GACjBn0B,EAAIuD,EAAI9E,KAAKoC,IAAIszB,GACvBwB,EAAQl6B,KAAK,CAACsE,EAAGC,IAEnB,OAAO21B,I,iCAGP,OAAQ57B,KAAK26B,QACX,KAAKnF,GAAWoF,MACd,OAAO,GACT,KAAKpF,GAAWsF,QACd,OAAO,GACT,KAAKtF,GAAWuF,IACd,OAAO,GACT,KAAKvF,GAAWwF,MACd,OAAO,GACT,KAAKxF,GAAWyF,QACd,OAAO,GACT,KAAKzF,GAAW0F,OACd,OAAO,GACT,QACE,OAAO,Q,KCrVFoB,GAAU,CACvB,uBACA,0BACA,0BACA,2BACA,yBACA,2BACA,yBACA,yBACA,0BACA,yBACA,2BACA,0BACA,2BACA,wBAGaC,GAAO,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGSC,GAAW,CACpB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGSC,GAAW,CACpB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAoBSC,GAAa,CACtB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGSC,GAAU,CACnB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGSC,GAAU,CACnB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGSC,GAAc,CACvB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGSC,GAAQ,CAAC,WAETC,GAAO,CAAC,WAERC,GAAM,CAAC,WAETC,GAAW,SAAUz+B,GAE5B,OADA0+B,QAAQhwB,IAAI1O,EAAM,OA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","file":"js/chunk-91fc5ca4.6dd83297.js","sourcesContent":["import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Slider.vue?vue&type=style&index=0&id=6297bf58&lang=scss&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","/** @see {@link https://github.com/vuejs/vue-class-component/blob/master/src/reflect.ts} */\nvar reflectMetadataIsSupported = typeof Reflect !== 'undefined' && typeof Reflect.getMetadata !== 'undefined';\nexport function applyMetadata(options, target, key) {\n    if (reflectMetadataIsSupported) {\n        if (!Array.isArray(options) &&\n            typeof options !== 'function' &&\n            !options.hasOwnProperty('type') &&\n            typeof options.type === 'undefined') {\n            var type = Reflect.getMetadata('design:type', target, key);\n            if (type !== Object) {\n                options.type = type;\n            }\n        }\n    }\n}\n","import { createDecorator } from 'vue-class-component';\nimport { applyMetadata } from '../helpers/metadata';\n/**\n * decorator of a prop\n * @param  options the options for the prop\n * @return PropertyDecorator | void\n */\nexport function Prop(options) {\n    if (options === void 0) { options = {}; }\n    return function (target, key) {\n        applyMetadata(options, target, key);\n        createDecorator(function (componentOptions, k) {\n            ;\n            (componentOptions.props || (componentOptions.props = {}))[k] = options;\n        })(target, key);\n    };\n}\n","import { createDecorator } from 'vue-class-component';\n/**\n * decorator of a watch function\n * @param  path the path or the expression to observe\n * @param  WatchOption\n * @return MethodDecorator\n */\nexport function Watch(path, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.deep, deep = _a === void 0 ? false : _a, _b = options.immediate, immediate = _b === void 0 ? false : _b;\n    return createDecorator(function (componentOptions, handler) {\n        if (typeof componentOptions.watch !== 'object') {\n            componentOptions.watch = Object.create(null);\n        }\n        var watch = componentOptions.watch;\n        if (typeof watch[path] === 'object' && !Array.isArray(watch[path])) {\n            watch[path] = [watch[path]];\n        }\n        else if (typeof watch[path] === 'undefined') {\n            watch[path] = [];\n        }\n        watch[path].push({ handler: handler, deep: deep, immediate: immediate });\n    });\n}\n","<template>\r\n  <div class=\"slider-container\">\r\n    <div class=\"config-tag slider-tag\">\r\n      <span>{{ label }}</span>\r\n      <span v-if=\"showValue\"> &nbsp;&nbsp; {{ value }} </span>\r\n    </div>\r\n    <input\r\n      type=\"range\"\r\n      :class=\"rangeClass\"\r\n      :min=\"min\"\r\n      :max=\"max\"\r\n      :step=\"step\"\r\n      v-model=\"value\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n/* eslint-disable */\r\nimport { Prop, Watch } from \"vue-property-decorator\";\r\nimport { Vue } from \"vue-class-component\";\r\nimport * as d3 from \"d3\";\r\ntype Callback = (x: number) => void;\r\nexport default class Slider extends Vue {\r\n  @Prop({ default: 0 }) public min: number = 0;\r\n  @Prop({ default: 1 }) public max: number = 1;\r\n  @Prop({ default: 0.1 }) public step: number = 0.1;\r\n  @Prop({ default: (a: number) => {} }) public callback: Callback = (\r\n    a: number\r\n  ) => {};\r\n  @Prop({ default: \"\" }) public label: string = \"\";\r\n  @Prop({ default: \"slider\" }) public className: string = \"slider\";\r\n  @Prop({ default: 0 }) public init: number = 0;\r\n  @Prop({ default: false }) public showValue: boolean = false;\r\n  public value = 0;\r\n  public range = 1;\r\n  get rangeClass(): string {\r\n    return this.className + \" slider\";\r\n  }\r\n  created() {\r\n    this.value = this.init;\r\n  }\r\n  @Watch(\"value\")\r\n  public valueChanged(val: number): void {\r\n    this.callback(val);\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$deep-gray: #aaaeb3;\r\n$gray: #7a7a7a;\r\n$light-gray: #e2e6ea;\r\n$normal: #2c3e50;\r\n.slider-container {\r\n  width: 100%;\r\n  text-align: left;\r\n  margin-top: 2px;\r\n  .slider-tag {\r\n    position: relative;\r\n    // margin-bottom: -2vh;\r\n    color: black;\r\n    span:nth-child(2) {\r\n      position: absolute;\r\n      right: 0;\r\n    }\r\n  }\r\n}\r\n.slider {\r\n  -webkit-appearance: none;\r\n  width: 100%;\r\n  height: 0.8vh;\r\n  border-radius: 0.8vh;\r\n  background: $light-gray;\r\n  outline: none;\r\n  opacity: 0.7;\r\n  -webkit-transition: 0.2s;\r\n  transition: opacity 0.2s;\r\n}\r\n.slider::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 2vh;\r\n  height: 2vh;\r\n  border-radius: 50%;\r\n  background: $deep-gray;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background: $gray;\r\n  }\r\n}\r\n.slider::-moz-range-thumb {\r\n  width: 2vh;\r\n  height: 2vh;\r\n  border-radius: 50%;\r\n  background: $deep-gray;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","\r\n/* eslint-disable */\r\nimport { Prop, Watch } from \"vue-property-decorator\";\r\nimport { Vue } from \"vue-class-component\";\r\nimport * as d3 from \"d3\";\r\ntype Callback = (x: number) => void;\r\nexport default class Slider extends Vue {\r\n  @Prop({ default: 0 }) public min: number = 0;\r\n  @Prop({ default: 1 }) public max: number = 1;\r\n  @Prop({ default: 0.1 }) public step: number = 0.1;\r\n  @Prop({ default: (a: number) => {} }) public callback: Callback = (\r\n    a: number\r\n  ) => {};\r\n  @Prop({ default: \"\" }) public label: string = \"\";\r\n  @Prop({ default: \"slider\" }) public className: string = \"slider\";\r\n  @Prop({ default: 0 }) public init: number = 0;\r\n  @Prop({ default: false }) public showValue: boolean = false;\r\n  public value = 0;\r\n  public range = 1;\r\n  get rangeClass(): string {\r\n    return this.className + \" slider\";\r\n  }\r\n  created() {\r\n    this.value = this.init;\r\n  }\r\n  @Watch(\"value\")\r\n  public valueChanged(val: number): void {\r\n    this.callback(val);\r\n  }\r\n}\r\n","import { render } from \"./Slider.vue?vue&type=template&id=6297bf58&scoped=true\"\nimport script from \"./Slider.vue?vue&type=script&lang=ts\"\nexport * from \"./Slider.vue?vue&type=script&lang=ts\"\n\nimport \"./Slider.vue?vue&type=style&index=0&id=6297bf58&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6297bf58\"\n\nexport default script","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","// Word cloud layout by Jason Davies, https://www.jasondavies.com/wordcloud/\n// Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf\n\nvar dispatch = require(\"d3-dispatch\").dispatch;\n\nvar cloudRadians = Math.PI / 180,\n    cw = 1 << 11 >> 5,\n    ch = 1 << 11;\n\nmodule.exports = function() {\n  var size = [256, 256],\n      text = cloudText,\n      font = cloudFont,\n      fontSize = cloudFontSize,\n      fontStyle = cloudFontNormal,\n      fontWeight = cloudFontNormal,\n      rotate = cloudRotate,\n      padding = cloudPadding,\n      spiral = archimedeanSpiral,\n      words = [],\n      timeInterval = Infinity,\n      event = dispatch(\"word\", \"end\"),\n      timer = null,\n      random = Math.random,\n      cloud = {},\n      canvas = cloudCanvas;\n\n  cloud.canvas = function(_) {\n    return arguments.length ? (canvas = functor(_), cloud) : canvas;\n  };\n\n  cloud.start = function() {\n    var contextAndRatio = getContext(canvas()),\n        board = zeroArray((size[0] >> 5) * size[1]),\n        bounds = null,\n        n = words.length,\n        i = -1,\n        tags = [],\n        data = words.map(function(d, i) {\n          d.text = text.call(this, d, i);\n          d.font = font.call(this, d, i);\n          d.style = fontStyle.call(this, d, i);\n          d.weight = fontWeight.call(this, d, i);\n          d.rotate = rotate.call(this, d, i);\n          d.size = ~~fontSize.call(this, d, i);\n          d.padding = padding.call(this, d, i);\n          return d;\n        }).sort(function(a, b) { return b.size - a.size; });\n\n    if (timer) clearInterval(timer);\n    timer = setInterval(step, 0);\n    step();\n\n    return cloud;\n\n    function step() {\n      var start = Date.now();\n      while (Date.now() - start < timeInterval && ++i < n && timer) {\n        var d = data[i];\n        d.x = (size[0] * (random() + .5)) >> 1;\n        d.y = (size[1] * (random() + .5)) >> 1;\n        cloudSprite(contextAndRatio, d, data, i);\n        if (d.hasText && place(board, d, bounds)) {\n          tags.push(d);\n          event.call(\"word\", cloud, d);\n          if (bounds) cloudBounds(bounds, d);\n          else bounds = [{x: d.x + d.x0, y: d.y + d.y0}, {x: d.x + d.x1, y: d.y + d.y1}];\n          // Temporary hack\n          d.x -= size[0] >> 1;\n          d.y -= size[1] >> 1;\n        }\n      }\n      if (i >= n) {\n        cloud.stop();\n        event.call(\"end\", cloud, tags, bounds);\n      }\n    }\n  }\n\n  cloud.stop = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n    return cloud;\n  };\n\n  function getContext(canvas) {\n    canvas.width = canvas.height = 1;\n    var ratio = Math.sqrt(canvas.getContext(\"2d\").getImageData(0, 0, 1, 1).data.length >> 2);\n    canvas.width = (cw << 5) / ratio;\n    canvas.height = ch / ratio;\n\n    var context = canvas.getContext(\"2d\");\n    context.fillStyle = context.strokeStyle = \"red\";\n    context.textAlign = \"center\";\n\n    return {context: context, ratio: ratio};\n  }\n\n  function place(board, tag, bounds) {\n    var perimeter = [{x: 0, y: 0}, {x: size[0], y: size[1]}],\n        startX = tag.x,\n        startY = tag.y,\n        maxDelta = Math.sqrt(size[0] * size[0] + size[1] * size[1]),\n        s = spiral(size),\n        dt = random() < .5 ? 1 : -1,\n        t = -dt,\n        dxdy,\n        dx,\n        dy;\n\n    while (dxdy = s(t += dt)) {\n      dx = ~~dxdy[0];\n      dy = ~~dxdy[1];\n\n      if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n\n      tag.x = startX + dx;\n      tag.y = startY + dy;\n\n      if (tag.x + tag.x0 < 0 || tag.y + tag.y0 < 0 ||\n          tag.x + tag.x1 > size[0] || tag.y + tag.y1 > size[1]) continue;\n      // TODO only check for collisions within current bounds.\n      if (!bounds || !cloudCollide(tag, board, size[0])) {\n        if (!bounds || collideRects(tag, bounds)) {\n          var sprite = tag.sprite,\n              w = tag.width >> 5,\n              sw = size[0] >> 5,\n              lx = tag.x - (w << 4),\n              sx = lx & 0x7f,\n              msx = 32 - sx,\n              h = tag.y1 - tag.y0,\n              x = (tag.y + tag.y0) * sw + (lx >> 5),\n              last;\n          for (var j = 0; j < h; j++) {\n            last = 0;\n            for (var i = 0; i <= w; i++) {\n              board[x + i] |= (last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n            }\n            x += sw;\n          }\n          delete tag.sprite;\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  cloud.timeInterval = function(_) {\n    return arguments.length ? (timeInterval = _ == null ? Infinity : _, cloud) : timeInterval;\n  };\n\n  cloud.words = function(_) {\n    return arguments.length ? (words = _, cloud) : words;\n  };\n\n  cloud.size = function(_) {\n    return arguments.length ? (size = [+_[0], +_[1]], cloud) : size;\n  };\n\n  cloud.font = function(_) {\n    return arguments.length ? (font = functor(_), cloud) : font;\n  };\n\n  cloud.fontStyle = function(_) {\n    return arguments.length ? (fontStyle = functor(_), cloud) : fontStyle;\n  };\n\n  cloud.fontWeight = function(_) {\n    return arguments.length ? (fontWeight = functor(_), cloud) : fontWeight;\n  };\n\n  cloud.rotate = function(_) {\n    return arguments.length ? (rotate = functor(_), cloud) : rotate;\n  };\n\n  cloud.text = function(_) {\n    return arguments.length ? (text = functor(_), cloud) : text;\n  };\n\n  cloud.spiral = function(_) {\n    return arguments.length ? (spiral = spirals[_] || _, cloud) : spiral;\n  };\n\n  cloud.fontSize = function(_) {\n    return arguments.length ? (fontSize = functor(_), cloud) : fontSize;\n  };\n\n  cloud.padding = function(_) {\n    return arguments.length ? (padding = functor(_), cloud) : padding;\n  };\n\n  cloud.random = function(_) {\n    return arguments.length ? (random = _, cloud) : random;\n  };\n\n  cloud.on = function() {\n    var value = event.on.apply(event, arguments);\n    return value === event ? cloud : value;\n  };\n\n  return cloud;\n};\n\nfunction cloudText(d) {\n  return d.text;\n}\n\nfunction cloudFont() {\n  return \"serif\";\n}\n\nfunction cloudFontNormal() {\n  return \"normal\";\n}\n\nfunction cloudFontSize(d) {\n  return Math.sqrt(d.value);\n}\n\nfunction cloudRotate() {\n  return (~~(Math.random() * 6) - 3) * 30;\n}\n\nfunction cloudPadding() {\n  return 1;\n}\n\n// Fetches a monochrome sprite bitmap for the specified text.\n// Load in batches for speed.\nfunction cloudSprite(contextAndRatio, d, data, di) {\n  if (d.sprite) return;\n  var c = contextAndRatio.context,\n      ratio = contextAndRatio.ratio;\n\n  c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n  var x = 0,\n      y = 0,\n      maxh = 0,\n      n = data.length;\n  --di;\n  while (++di < n) {\n    d = data[di];\n    c.font = d.style + \" \" + d.weight + \" \" + ~~((d.size + 1) / ratio) + \"px \" + d.font;\n    var w = c.measureText(d.text + \"m\").width * ratio,\n        h = d.size << 1;\n    c.save();\n    if (d.rotate) {\n      var sr = Math.sin(d.rotate * cloudRadians),\n          cr = Math.cos(d.rotate * cloudRadians),\n          wcr = w * cr,\n          wsr = w * sr,\n          hcr = h * cr,\n          hsr = h * sr;\n      w = (Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 0x1f) >> 5 << 5;\n      h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n    } else {\n      w = (w + 0x1f) >> 5 << 5;\n    }\n    if (h > maxh) maxh = h;\n    if (x + w >= (cw << 5)) {\n      x = 0;\n      y += maxh;\n      maxh = 0;\n    }\n    if (y + h >= ch) break;\n    c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio);\n    if (d.rotate) c.rotate(d.rotate * cloudRadians);\n    c.fillText(d.text, 0, 0);\n    if (d.padding) c.lineWidth = 2 * d.padding, c.strokeText(d.text, 0, 0);\n    c.restore();\n    d.width = w;\n    d.height = h;\n    d.xoff = x;\n    d.yoff = y;\n    d.x1 = w >> 1;\n    d.y1 = h >> 1;\n    d.x0 = -d.x1;\n    d.y0 = -d.y1;\n    d.hasText = true;\n    x += w;\n  }\n  var pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data,\n      sprite = [];\n  while (--di >= 0) {\n    d = data[di];\n    if (!d.hasText) continue;\n    var w = d.width,\n        w32 = w >> 5,\n        h = d.y1 - d.y0;\n    // Zero the buffer\n    for (var i = 0; i < h * w32; i++) sprite[i] = 0;\n    x = d.xoff;\n    if (x == null) return;\n    y = d.yoff;\n    var seen = 0,\n        seenRow = -1;\n    for (var j = 0; j < h; j++) {\n      for (var i = 0; i < w; i++) {\n        var k = w32 * j + (i >> 5),\n            m = pixels[((y + j) * (cw << 5) + (x + i)) << 2] ? 1 << (31 - (i % 32)) : 0;\n        sprite[k] |= m;\n        seen |= m;\n      }\n      if (seen) seenRow = j;\n      else {\n        d.y0++;\n        h--;\n        j--;\n        y++;\n      }\n    }\n    d.y1 = d.y0 + seenRow;\n    d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n  }\n}\n\n// Use mask-based collision detection.\nfunction cloudCollide(tag, board, sw) {\n  sw >>= 5;\n  var sprite = tag.sprite,\n      w = tag.width >> 5,\n      lx = tag.x - (w << 4),\n      sx = lx & 0x7f,\n      msx = 32 - sx,\n      h = tag.y1 - tag.y0,\n      x = (tag.y + tag.y0) * sw + (lx >> 5),\n      last;\n  for (var j = 0; j < h; j++) {\n    last = 0;\n    for (var i = 0; i <= w; i++) {\n      if (((last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0))\n          & board[x + i]) return true;\n    }\n    x += sw;\n  }\n  return false;\n}\n\nfunction cloudBounds(bounds, d) {\n  var b0 = bounds[0],\n      b1 = bounds[1];\n  if (d.x + d.x0 < b0.x) b0.x = d.x + d.x0;\n  if (d.y + d.y0 < b0.y) b0.y = d.y + d.y0;\n  if (d.x + d.x1 > b1.x) b1.x = d.x + d.x1;\n  if (d.y + d.y1 > b1.y) b1.y = d.y + d.y1;\n}\n\nfunction collideRects(a, b) {\n  return a.x + a.x1 > b[0].x && a.x + a.x0 < b[1].x && a.y + a.y1 > b[0].y && a.y + a.y0 < b[1].y;\n}\n\nfunction archimedeanSpiral(size) {\n  var e = size[0] / size[1];\n  return function(t) {\n    return [e * (t *= .1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\n\nfunction rectangularSpiral(size) {\n  var dy = 4,\n      dx = dy * size[0] / size[1],\n      x = 0,\n      y = 0;\n  return function(t) {\n    var sign = t < 0 ? -1 : 1;\n    // See triangular numbers: T_n = n * (n + 1) / 2.\n    switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {\n      case 0:  x += dx; break;\n      case 1:  y += dy; break;\n      case 2:  x -= dx; break;\n      default: y -= dy; break;\n    }\n    return [x, y];\n  };\n}\n\n// TODO reuse arrays?\nfunction zeroArray(n) {\n  var a = [],\n      i = -1;\n  while (++i < n) a[i] = 0;\n  return a;\n}\n\nfunction cloudCanvas() {\n  return document.createElement(\"canvas\");\n}\n\nfunction functor(d) {\n  return typeof d === \"function\" ? d : function() { return d; };\n}\n\nvar spirals = {\n  archimedean: archimedeanSpiral,\n  rectangular: rectangularSpiral\n};\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.github.io/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line max-statements\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    var multiply = function (n, c) {\n      var index = -1;\n      var c2 = c;\n      while (++index < 6) {\n        c2 += n * data[index];\n        data[index] = c2 % 1e7;\n        c2 = floor(c2 / 1e7);\n      }\n    };\n\n    var divide = function (n) {\n      var index = 6;\n      var c = 0;\n      while (--index >= 0) {\n        c += data[index];\n        data[index] = floor(c / n);\n        c = (c % n) * 1e7;\n      }\n    };\n\n    var dataToString = function () {\n      var index = 6;\n      var s = '';\n      while (--index >= 0) {\n        if (s !== '' || index === 0 || data[index] !== 0) {\n          var t = String(data[index]);\n          s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n        }\n      } return s;\n    };\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        result = dataToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        result = dataToString() + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","<template>\r\n  <!-- <h1>Playground</h1> -->\r\n  <div class=\"row\">\r\n    <div class=\"config-panel col-2\">\r\n      <div class=\"wrapper\">\r\n        <span class=\"config-tag\">Dataset</span>\r\n        <div class=\"wrapper\">\r\n          <label class=\"form-label\" for=\"wordleUpload\">\r\n            Upload <span class=\"code\">CSV</span>\r\n          </label>\r\n          <button class=\"button\" @click=\"isShowModal = true\">\r\n            <i class=\"fas fa-cloud-upload-alt light\"></i>\r\n            <span class=\"code\">&nbsp;&nbsp;CSV</span>\r\n          </button>\r\n          <input\r\n            type=\"file\"\r\n            class=\"form-control-sm\"\r\n            id=\"wordleUpload\"\r\n            name=\"wordleUpload\"\r\n            accept=\"text/txt\"\r\n            @change=\"handleUpload($event)\"\r\n          />\r\n        </div>\r\n        <select name=\"emordle-dataset\" id=\"dataset\" v-model=\"wordleData\">\r\n          <option\r\n            v-for=\"item in collection\"\r\n            v-bind:key=\"item.tag\"\r\n            v-bind:value=\"item\"\r\n          >\r\n            {{ item.tag }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <br />\r\n      <div class=\"wrapper\">\r\n        <span class=\"config-tag\">Color Scheme</span>\r\n        <select name=\"ColorScheme\" id=\"ColorScheme\" v-model=\"colorScheme\">\r\n          <option\r\n            v-for=\"item in colorSchemes\"\r\n            :data-tag=\"item\"\r\n            v-bind:key=\"item\"\r\n            v-bind:value=\"item\"\r\n          >\r\n            {{ item }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div class=\"wrapper\">\r\n        <span class=\"config-tag\">Font</span>\r\n        <select\r\n          name=\"FontFamily\"\r\n          id=\"FontFamily\"\r\n          v-model=\"fontFamily\"\r\n          :style=\"{ 'font-family': fontFamily }\"\r\n        >\r\n          <option\r\n            v-for=\"item in fontFamilies\"\r\n            :data-tag=\"item\"\r\n            v-bind:key=\"item\"\r\n            v-bind:value=\"item\"\r\n            :style=\"{ 'font-family': item }\"\r\n          >\r\n            {{ item }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <br />\r\n      <div class=\"wrapper\">\r\n        <span class=\"config-tag\">Scheme</span>\r\n        <select v-model=\"animationMode\" @change=\"animationModeChange\">\r\n          <option\r\n            v-for=\"item in animationModes\"\r\n            v-bind:key=\"item\"\r\n            v-bind:value=\"item\"\r\n          >\r\n            {{ item }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div style=\"margin: 0 auto\">\r\n        <Slider\r\n          :init=\"speed\"\r\n          step=\"0.05\"\r\n          label=\"Speed\"\r\n          className=\"speed\"\r\n          :callback=\"speedCallback\"\r\n          :showValue=\"true\"\r\n        ></Slider>\r\n      </div>\r\n      <div style=\"margin: 0 auto\">\r\n        <Slider\r\n          :init=\"entropy\"\r\n          step=\"0.05\"\r\n          label=\"Entropy\"\r\n          className=\"entropy\"\r\n          :callback=\"entropyCallback\"\r\n          :showValue=\"true\"\r\n        ></Slider>\r\n      </div>\r\n      <br />\r\n      <!-- <button @click=\"animate\">animate</buttonf> -->\r\n      <div>\r\n        <!-- <button @click=\"play\">{{ \"play\" }}</button>\r\n        <button @click=\"pause\">{{ \"pause\" }}</button> -->\r\n        <div class=\"row\">\r\n          <div class=\"col-6\">\r\n            <i\r\n              id=\"playButton\"\r\n              @click=\"play()\"\r\n              class=\"fas fa-play-circle active lg light\"\r\n            ></i>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <i\r\n              id=\"pauseButton\"\r\n              @click=\"pause()\"\r\n              class=\"fas fa-pause-circle lg light\"\r\n            ></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- <button id=\"reverse\">reverse</button> -->\r\n      <!-- <button @click=\"restart\">restart</button> -->\r\n      <br />\r\n      <!-- <button @click=\"center\">center</button> -->\r\n      <button @click=\"relayout\">relayout</button>\r\n      <button @click=\"mask\">{{ ifMask ? \"unmask\" : \"mask\" }}</button>\r\n      <br />\r\n      <br />\r\n      <button @click=\"downloadConfig\">\r\n        <i class=\"fas fa-download light\"></i> &nbsp; config\r\n      </button>\r\n      <!-- <button @click=\"downloadGIF\">\r\n        <i class=\"fas fa-download light\"></i> &nbsp; gif\r\n      </button> -->\r\n\r\n      <!-- <button @click=\"pressUpload\">upload</button> -->\r\n      <input type=\"file\" accept=\".csv\" id=\"uploadId\" @change=\"upload\" hidden />\r\n    </div>\r\n    <div class=\"right-column col-10\">\r\n      <div id=\"emordle-container\"></div>\r\n      <svg id=\"emordle-test-svg-container\"></svg>\r\n      <div id=\"emordle-test-div-container\"></div>\r\n      <!-- <canvas id=\"emordle-test-canvas\"></canvas> -->\r\n    </div>\r\n  </div>\r\n\r\n  <transition name=\"fade\" appear>\r\n    <div class=\"modal-overlay\" @click=\"hideModal\" v-if=\"isShowModal\"></div>\r\n  </transition>\r\n  <transition name=\"pop\" appear>\r\n    <div class=\"modal-div\" v-if=\"isShowModal\">\r\n      <span class=\"close\" @click=\"hideModal\">&times;</span>\r\n      <h1>Upload CSV</h1>\r\n      <p>\r\n        Upload a csv file with <code>text</code> and <code>frequency</code> as\r\n        only columns\r\n      </p>\r\n      <div class=\"table-div\">\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">#</th>\r\n              <th scope=\"col\">text</th>\r\n              <th scope=\"col\">frequency</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index) in uploadData\" :key=\"index\">\r\n              <th scope=\"row\">{{ index + 1 }}</th>\r\n              <td>{{ item.text }}</td>\r\n              <td>{{ item.frequency }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div class=\"button-group\">\r\n        <button\r\n          id=\"upload-csv-button\"\r\n          class=\"button btn btn-success\"\r\n          @click=\"openFile\"\r\n        >\r\n          Upload CSV\r\n        </button>\r\n        <button\r\n          id=\"generate-emordle-button\"\r\n          class=\"button btn btn-primary\"\r\n          @click=\"generateEmordle\"\r\n        >\r\n          Generate Emordle\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n/* eslint-disable prettier/prettier */\r\nimport anime, { AnimeInstance } from \"animejs\";\r\nimport { Options, Vue } from \"vue-class-component\";\r\nimport Slider from \"@/components/ui/Slider.vue\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport { Watch } from \"vue-property-decorator\";\r\nimport { DraggableText, TextStyleConfig, Word } from \"@/assets/types\";\r\nimport * as Emordle from \"@/assets/ts/animate\";\r\nimport { getColor } from \"@/assets/ts/color-preset\";\r\nimport {\r\n  applyStyle,\r\n  initDraggableText,\r\n  getTextCenter,\r\n  sanityChecknFill,\r\n  // testSize,\r\n  getRandomInt,\r\n  arrayToCSV,\r\n} from \"@/assets/ts/utils\";\r\nimport * as d3Dsv from \"d3-dsv\";\r\nimport {\r\n  generateWordle,\r\n  defaultStyleSheet,\r\n  // testOnSvg,\r\n  word2Config,\r\n  config2Word,\r\n} from \"@/assets/ts/layout\";\r\nconst WIDTH = defaultStyleSheet.width;\r\nconst HEIGHT = defaultStyleSheet.height;\r\nconst divId = \"emordle-container\";\r\nconst fileNames = [\r\n  \"emotive/happy-words.csv\",\r\n  \"emotive/sad-words.csv\",\r\n  \"emotive/tender-words.csv\",\r\n  \"emotive/afraid-words.csv\",\r\n  \"emotive/angry-words.csv\",\r\n  \"reallife/2020_search.csv\",\r\n  \"reallife/creep.csv\",\r\n  \"reallife/thx.csv\",\r\n  \"reallife/ingredients.csv\",\r\n];\r\nconst fileReader = new FileReader();\r\nlet uploadFilename = \"a\";\r\ninterface Dataset {\r\n  data: TextStyleConfig[];\r\n  tag: string;\r\n}\r\ninterface UploadData {\r\n  text: string;\r\n  frequency: number;\r\n}\r\n@Options({\r\n  components: {\r\n    Slider,\r\n  },\r\n})\r\nexport default class Tool extends Vue {\r\n  public collection: Dataset[] = [];\r\n  private draggableTexts: DraggableText[] = [];\r\n  private wordleData: Dataset = { data: [], tag: \"\" };\r\n  private animationInstances: AnimeInstance[] = [];\r\n  private animationMode = \"happy\";\r\n  private ifMask = false;\r\n  private isShowModal = false;\r\n  private uploadData: UploadData[] = [];\r\n  private animationModes = [\r\n    \"still\",\r\n    \"tender\",\r\n    \"happy\",\r\n    \"angry\",\r\n    \"sad\",\r\n    \"fearful\",\r\n    \"nervous\",\r\n  ];\r\n  private colorScheme = \"gray\";\r\n  private colorSchemes = [\r\n    \"black\",\r\n    \"gray\",\r\n    \"red\",\r\n    \"calm\",\r\n    \"positive\",\r\n    \"negative\",\r\n    \"playful\",\r\n    \"trustworthy\",\r\n    \"rainbow\",\r\n    \"exciting\",\r\n  ];\r\n  private speed = 0.5;\r\n  private entropy = 0.5;\r\n  public fontFamilies = [\r\n    \"Arial\",\r\n    \"NotoSans\",\r\n    \"DancingScript\",\r\n    \"RobotoMono\",\r\n    \"Raleway\",\r\n    \"Manrope\",\r\n    \"Dreamwood\",\r\n    \"GT Flexa\",\r\n  ];\r\n  public fontFamily = \"GT Flexa\";\r\n\r\n  private readonly animeParams: anime.AnimeParams = {\r\n    easing: \"linear\",\r\n    // direction: \"alternate\",\r\n    loop: true,\r\n  };\r\n\r\n  printisShowModal() {\r\n    console.log(this.isShowModal);\r\n  }\r\n  initLayout() {\r\n    const container = document.querySelector(\"#\" + divId) as HTMLDivElement;\r\n    container.style.width = `${WIDTH}px`;\r\n    container.style.height = `${HEIGHT}px`;\r\n    const test = document.querySelector(\r\n      \"#emordle-test-svg-container\"\r\n    ) as SVGElement;\r\n    test.style.width = `${WIDTH}px`;\r\n    test.style.height = `${HEIGHT}px`;\r\n  }\r\n\r\n  async mounted() {\r\n    this.initLayout();\r\n    fileReader.addEventListener(\r\n      \"load\",\r\n      () => {\r\n        const res = fileReader.result;\r\n        if (!res || typeof res !== \"string\") return;\r\n        const data = (d3Dsv.csvParse(res, d3Dsv.autoType) as unknown) as Word[];\r\n        this.parseFile(data);\r\n      },\r\n      false\r\n    );\r\n    await Promise.all(\r\n      fileNames.map((f: string) => d3.csv(`./dataset/${f}`))\r\n    ).then((rawData: unknown[]) => {\r\n      const data = rawData as Word[][];\r\n      data.forEach((instance, idx: number) => {\r\n        uploadFilename = fileNames[idx].split(\"/\")[1].split(\".\")[0];\r\n        this.parseFile(instance, false);\r\n      });\r\n      this.wordleData = this.collection[0];\r\n      d3.select(\"#emordle-dataset\")\r\n        .selectAll(\"option\")\r\n        .property(\"selected\", false)\r\n        .filter((v: any) => v[\"data-tag\"] === this.collection[0].tag)\r\n        .property(\"selected\", true);\r\n\r\n      this.initiateData(this.collection[0].data);\r\n      this.relayout();\r\n    });\r\n    // Promise.all(\r\n    //   fileNames.slice(1).map((f: string) => d3.csv(`./dataset/${f}`))\r\n    // ).then((rawData: unknown[]) => {\r\n    //   const data = rawData as Word[][];\r\n    //   data.forEach((instance, idx: number) => {\r\n    //     uploadFilename = fileNames[idx + 1].split(\"/\")[1].split(\".\")[0];\r\n    //     this.parseFile(instance, false);\r\n    //   })\r\n    //   })\r\n  }\r\n  @Watch(\"wordleData\")\r\n  wordleDataChanged() {\r\n    if (!this.wordleData || this.wordleData.data.length === 0) return;\r\n    this.ifMask = false;\r\n    this.initiateData(this.wordleData.data);\r\n    // this.relayout();\r\n  }\r\n  @Watch(\"colorScheme\")\r\n  colorSchemeChanged() {\r\n    const colorSet = getColor(this.colorScheme);\r\n    const n = colorSet.length;\r\n    this.draggableTexts.forEach((obj) => {\r\n      const c = colorSet[getRandomInt(0, n - 1)];\r\n      obj.initData.color = c;\r\n      obj.elem.style.color = c;\r\n    });\r\n  }\r\n  @Watch(\"fontFamily\")\r\n  fontFamilyChanged() {\r\n    this.draggableTexts.forEach((obj) => {\r\n      obj.initData.fontFamily = this.fontFamily;\r\n      obj.elem.style.fontFamily = this.fontFamily;\r\n    });\r\n  }\r\n  initiateData(data: TextStyleConfig[]) {\r\n    d3.selectAll(\".text-node\").remove();\r\n    this.draggableTexts = initDraggableText(data);\r\n    this.colorSchemeChanged();\r\n    this.pause();\r\n    this.center();\r\n    this.animate();\r\n  }\r\n  animate() {\r\n    if (!this.draggableTexts || this.draggableTexts.length === 0) return;\r\n    const animator = new Emordle.Animator(\r\n      this.draggableTexts,\r\n      this.entropy,\r\n      this.speed,\r\n      this.animationMode\r\n    );\r\n    this.animationInstances = animator.getAnimationScheme();\r\n    this.play();\r\n    setTimeout(() => {\r\n      d3.select(\"#pauseButton\").on(\"click\");\r\n    }, 60000);\r\n  }\r\n  play() {\r\n    document.querySelector(\"#pauseButton\")?.classList.remove(\"active\");\r\n    this.animationInstances.forEach((i) => i.play());\r\n    document.querySelector(\"#playButton\")?.classList.add(\"active\");\r\n  }\r\n  pause() {\r\n    document.querySelector(\"#playButton\")?.classList.remove(\"active\");\r\n    this.animationInstances.forEach((i) => i.pause());\r\n    document.querySelector(\"#pauseButton\")?.classList.add(\"active\");\r\n  }\r\n\r\n  center() {\r\n    const center = getTextCenter(this.draggableTexts);\r\n    const translateX = WIDTH / 2 - center.x;\r\n    const translateY = HEIGHT / 2 - center.y;\r\n    anime({\r\n      targets: \".text-node\",\r\n      left: function(el: HTMLElement) {\r\n        const offsetL = parseInt(el.style.left.split(\"px\")[0]);\r\n        return `${offsetL + translateX}px`;\r\n      },\r\n      top: function(el: HTMLElement) {\r\n        const offsetT = parseInt(el.style.top.split(\"px\")[0]);\r\n        return `${offsetT + translateY}px`;\r\n      },\r\n    });\r\n  }\r\n\r\n  restart() {\r\n    for (let index = 0; index < this.draggableTexts.length; index++) {\r\n      const obj = this.draggableTexts[index].elem;\r\n      const data = this.draggableTexts[index].initData;\r\n      obj.removeAttribute(\"style\");\r\n      applyStyle(obj, data);\r\n    }\r\n    this.center();\r\n  }\r\n\r\n  relayout() {\r\n    this.pause();\r\n    const words = config2Word(this.draggableTexts.map((v) => v.initData));\r\n    generateWordle(words, { width: WIDTH, height: HEIGHT })\r\n      .on(\"end\", (layout) => {\r\n        const configs = word2Config(layout, WIDTH, HEIGHT);\r\n        configs.forEach((config, i) => {\r\n          config.color = this.draggableTexts[i].initData.color;\r\n        });\r\n        this.draggableTexts = initDraggableText(configs);\r\n        this.animate();\r\n      })\r\n      .start();\r\n  }\r\n\r\n  mask() {\r\n    this.ifMask = !this.ifMask;\r\n    if (this.ifMask) {\r\n      this.draggableTexts.forEach((v) => {\r\n        v.elem.textContent = \"x\".repeat(v.initData.text.length);\r\n      });\r\n    } else {\r\n      this.draggableTexts.forEach((v) => {\r\n        v.elem.textContent = v.initData.text;\r\n      });\r\n    }\r\n  }\r\n\r\n  speedCallback(v: string) {\r\n    this.speed = parseFloat(v);\r\n    this.animate();\r\n  }\r\n  entropyCallback(v: string) {\r\n    this.entropy = parseFloat(v);\r\n    if (this.animationMode == \"tender\") this.entropy = 1 - this.entropy;\r\n    this.animate();\r\n  }\r\n\r\n  animationModeChange(v: string) {\r\n    // stops what ever animation\r\n    this.animationInstances.forEach((i) => {\r\n      i.restart();\r\n      i.pause();\r\n    });\r\n    this.animationInstances = [];\r\n    this.restart();\r\n    this.animate();\r\n  }\r\n  handleUpload(event: Event) {\r\n    const target = event.target as HTMLFormElement;\r\n    if (target === null) return;\r\n    const files = target.files;\r\n    if (files === null) return;\r\n    const file = files[0];\r\n    if (!file) return;\r\n\r\n    fileReader.readAsText(file);\r\n    uploadFilename = file.name\r\n      .split(\".\")\r\n      .slice(0, -1)\r\n      .join(\".\");\r\n    for (const dataset of this.collection) {\r\n      if (dataset.tag === uploadFilename) {\r\n        uploadFilename += Math.random()\r\n          .toString()\r\n          .substring(2, 4);\r\n      }\r\n    }\r\n  }\r\n  showModal() {\r\n    this.isShowModal = true;\r\n  }\r\n  hideModal() {\r\n    this.uploadData = [];\r\n    this.isShowModal = false;\r\n    const btn = document.querySelector(\r\n      \"#generate-emordle-button\"\r\n    ) as HTMLButtonElement;\r\n    btn.style.display = \"none\";\r\n  }\r\n  openFile() {\r\n    document.getElementById(\"wordleUpload\")?.click();\r\n  }\r\n  insertDataset(data: TextStyleConfig[], changeData = true) {\r\n    const dataset = {\r\n      data: data,\r\n      tag: uploadFilename,\r\n    };\r\n    this.collection.push(dataset);\r\n    if (changeData) {\r\n      d3.select(\"#emordle-dataset\").property(\"value\", dataset);\r\n      this.draggableTexts = initDraggableText(dataset.data);\r\n      this.colorSchemeChanged();\r\n      this.wordleData = this.collection[this.collection.length - 1];\r\n    }\r\n  }\r\n  parseFile(data: Word[], newFileFlag = true) {\r\n    const sanity = sanityChecknFill(data);\r\n    if (!sanity.data) {\r\n      alert(`Wrong Data Format! Please use 'Text' and 'Frequency'!`);\r\n      return;\r\n    }\r\n    // show user the loaded csv file first\r\n    this.uploadData = data.map(\r\n      (x) =>\r\n        ({\r\n          text: x.text,\r\n          frequency: x.frequency,\r\n        } as UploadData)\r\n    );\r\n    if (sanity.compute) {\r\n      generateWordle(data, { width: WIDTH, height: HEIGHT })\r\n        .on(\"end\", (layout) => {\r\n          const configs = word2Config(layout, WIDTH, HEIGHT);\r\n          //testOnSvg((configs as unknown) as Word[]);\r\n          this.insertDataset(configs, newFileFlag);\r\n          this.wordleData = this.collection[this.collection.length - 1];\r\n        })\r\n        .start();\r\n    } else {\r\n      this.insertDataset((data as unknown) as TextStyleConfig[], newFileFlag);\r\n    }\r\n  }\r\n\r\n  downloadConfig() {\r\n    const a = document.createElement(\"a\");\r\n    const jsonData = this.draggableTexts.map((v) => {\r\n      const d = v.initData;\r\n      return {\r\n        text: d.text,\r\n        color: d.color,\r\n        fontFamily: d.fontFamily,\r\n        fontSize: d.fontSize,\r\n        fontWeight: d.fontWeight,\r\n        left: d.left,\r\n        top: d.top,\r\n        frequency: d.fontSize,\r\n        offx: d.offx,\r\n        offy: d.offy,\r\n      };\r\n    });\r\n    const csvData = d3Dsv.csvFormat(jsonData);\r\n    a.href = URL.createObjectURL(new Blob([csvData], { type: \"text/csv\" }));\r\n    a.download = `layout_${this.wordleData.tag}.csv`;\r\n    a.click();\r\n    a.remove();\r\n  }\r\n  downloadGIF() {\r\n    const a = document.createElement(\"a\");\r\n    a.href = URL.createObjectURL(new Blob([new Blob()], { type: \"gif\" }));\r\n    a.target = \"_blank\";\r\n    a.download = `${this.wordleData.tag}_E${this.entropy.toFixed(\r\n      3\r\n    )}_S${this.speed.toFixed(3)}.csv`;\r\n    a.click();\r\n    a.remove();\r\n    alert(\"NOT IMPLEMENTED!\");\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"@/assets/scss/_ui.scss\";\r\n#emordle-container {\r\n  // border: 1px solid black;\r\n  margin: 0 auto;\r\n  position: relative;\r\n}\r\n.text-node {\r\n  border-style: none;\r\n  cursor: default;\r\n  span {\r\n    display: inline-block;\r\n    margin-right: -2px;\r\n  }\r\n  &.active {\r\n    border: 0.5px dotted grey;\r\n    border-radius: 5px;\r\n    cursor: grab;\r\n  }\r\n}\r\n.point {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n}\r\n.group-configs {\r\n  visibility: hidden;\r\n  display: none;\r\n  // display: flex;\r\n  &.active {\r\n    visibility: visible;\r\n    flex-wrap: wrap; /* | wrap-reverse;*/\r\n    -webkit-flex-wrap: wrap;\r\n  }\r\n  .group-config {\r\n    width: fit-content;\r\n    margin: 1vh 1vw;\r\n  }\r\n}\r\n.right-column {\r\n  position: relative;\r\n  // #emordle-container {\r\n  //   position: absolute;\r\n  //   top: 0;\r\n  //   left: 0;\r\n  // div {\r\n  //   opacity: 0.1;\r\n  // }\r\n  // }\r\n  #emordle-test-svg-container {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    visibility: hidden;\r\n    // opacity: 0.8;\r\n  }\r\n  #emordle-test-div-container {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n}\r\n\r\n#generate-emordle-button {\r\n  display: none;\r\n}\r\n.button-group button {\r\n  margin-bottom: 10px;\r\n}\r\n.table-div {\r\n  height: 500px;\r\n  overflow: scroll;\r\n}\r\n.close {\r\n  color: #aaa;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 1rem;\r\n  // float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n.close:hover,\r\n.close:focus {\r\n  color: black;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n.modal-div {\r\n  position: absolute;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  margin: auto;\r\n  text-align: center;\r\n  width: 500px;\r\n  height: fit-content;\r\n  // max-width: 22em;\r\n  padding: 2rem;\r\n  border-radius: 1rem;\r\n  box-shadow: 0 5px 5px rgba(0, 0, 0, 0.2);\r\n  background: #fff;\r\n  z-index: 999;\r\n  transform: none;\r\n}\r\n.modal-div h1 {\r\n  margin: 0 0 2rem;\r\n}\r\n\r\n.modal-overlay {\r\n  content: \"\";\r\n  position: absolute;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 10;\r\n  background: #2c3e50;\r\n  opacity: 0.6;\r\n  cursor: pointer;\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.4s linear;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.pop-enter-active,\r\n.pop-leave-active {\r\n  transition: transform 0.4s cubic-bezier(0.5, 0, 0.5, 1), opacity 0.4s linear;\r\n}\r\n\r\n.pop-enter,\r\n.pop-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.3) translateY(-50%);\r\n}\r\n#upload-csv-button {\r\n  background-color: #42b983;\r\n  border-color: #42b983;\r\n}\r\n</style>\r\n","/*\n * anime.js v3.2.1\n * (c) 2020 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective', 'matrix', 'matrix3d'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  nil: function (a) { return is.und(a) || a === null; },\n  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },\n  rgb: function (a) { return /^rgb/.test(a); },\n  hsl: function (a) { return /^hsl/.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; },\n};\n\n// Easings\n\nfunction parseEasingParameters(string) {\n  var match = /\\(([^)]+)\\)/.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.ceil((minMax(t, 0.000001, 1)) * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)\n\n  var eases = { linear: function () { return function (t) { return t; }; } };\n\n  var functionEasings = {\n    Sine: function () { return function (t) { return 1 - Math.cos(t * Math.PI / 2); }; },\n    Circ: function () { return function (t) { return 1 - Math.sqrt(1 - t * t); }; },\n    Back: function () { return function (t) { return t * t * (3 * t - 2); }; },\n    Bounce: function () { return function (t) {\n      var pow2, b = 4;\n      while (t < (( pow2 = Math.pow(2, --b)) - 1) / 11) {}\n      return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow(( pow2 * 3 - 2 ) / 22 - t, 2)\n    }; },\n    Elastic: function (amplitude, period) {\n      if ( amplitude === void 0 ) amplitude = 1;\n      if ( period === void 0 ) period = .5;\n\n      var a = minMax(amplitude, 1, 10);\n      var p = minMax(period, .1, 2);\n      return function (t) {\n        return (t === 0 || t === 1) ? t : \n          -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n      }\n    }\n  };\n\n  var baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];\n\n  baseEasings.forEach(function (name, i) {\n    functionEasings[name] = function () { return function (t) { return Math.pow(t, i + 2); }; };\n  });\n\n  Object.keys(functionEasings).forEach(function (name) {\n    var easeIn = functionEasings[name];\n    eases['easeIn' + name] = easeIn;\n    eases['easeOut' + name] = function (a, b) { return function (t) { return 1 - easeIn(a, b)(1 - t); }; };\n    eases['easeInOut' + name] = function (a, b) { return function (t) { return t < 0.5 ? easeIn(a, b)(t * 2) / 2 : \n      1 - easeIn(a, b)(t * -2 + 2) / 2; }; };\n    eases['easeOutIn' + name] = function (a, b) { return function (t) { return t < 0.5 ? (1 - easeIn(a, b)(1 - t * 2)) / 2 : \n      (easeIn(a, b)(t * 2 - 1) + 1) / 2; }; };\n  });\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return applyArguments(ease, args);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nfunction filterArray(arr, callback) {\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  var result = [];\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n  return result;\n}\n\nfunction flattenArray(arr) {\n  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nfunction hexToRgba(hexValue) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nfunction hslToRgba(hslValue) {\n  var hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nfunction getUnit(val) {\n  var split = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n  if (split) { return split[1]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (!is.nil(getAttribute(el, prop)) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var reg  = /(\\w+)\\(([^)]*)\\)/g;\n  var transforms = new Map();\n  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nfunction getRelativeValue(to, from) {\n  var operator = /^(\\*=|\\+=|-=)/.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  if (/\\s/g.test(val)) { return val; }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  if (unit) { return unitLess + unit; }\n  return unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, \n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    if (!is.svg(parentEl.parentNode)) { break; }\n    parentEl = parentEl.parentNode;\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width,\n    h: height,\n    vW: viewBox[2],\n    vH: viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress, isPathTargetInsideSVG) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  var scaleX = isPathTargetInsideSVG ? 1 : svg.w / svg.vW;\n  var scaleY = isPathTargetInsideSVG ? 1 : svg.h / svg.vH;\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * scaleX;\n    case 'y': return (p.y - svg.y) * scaleY;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nfunction decomposeValue(val, unit) {\n  // const rgx = /-?\\d*\\.?\\d+/g; // handles basic numbers\n  // const rgx = /[+-]?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?/g; // handles exponents notation\n  var rgx = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?/g; // handles exponents notation\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(rgx) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isPathTargetInsideSVG = tween.isPath && is.svg(animatable.target);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n  animatables.forEach(function (animatable) {\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  });\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\n\nvar engine = (function () {\n  var raf;\n\n  function play() {\n    if (!raf && (!isDocumentHidden() || !anime.suspendWhenDocumentHidden) && activeInstances.length > 0) {\n      raf = requestAnimationFrame(step);\n    }\n  }\n  function step(t) {\n    // memo on algorithm issue:\n    // dangerous iteration over mutable `activeInstances`\n    // (that collection may be updated from within callbacks of `tick`-ed animation instances)\n    var activeInstancesLength = activeInstances.length;\n    var i = 0;\n    while (i < activeInstancesLength) {\n      var activeInstance = activeInstances[i];\n      if (!activeInstance.paused) {\n        activeInstance.tick(t);\n        i++;\n      } else {\n        activeInstances.splice(i, 1);\n        activeInstancesLength--;\n      }\n    }\n    raf = i > 0 ? requestAnimationFrame(step) : undefined;\n  }\n\n  function handleVisibilityChange() {\n    if (!anime.suspendWhenDocumentHidden) { return; }\n\n    if (isDocumentHidden()) {\n      // suspend ticks\n      raf = cancelAnimationFrame(raf);\n    } else { // is back to active tab\n      // first adjust animations to consider the time that ticks were suspended\n      activeInstances.forEach(\n        function (instance) { return instance ._onDocumentVisibility(); }\n      );\n      engine();\n    }\n  }\n  if (typeof document !== 'undefined') {\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n  }\n\n  return play;\n})();\n\nfunction isDocumentHidden() {\n  return !!document && document.hidden;\n}\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise(instance) {\n    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n    instance.finished = promise;\n    return promise;\n  }\n\n  var instance = createNewInstance(params);\n  var promise = makePromise(instance);\n\n  function toggleInstanceDirection() {\n    var direction = instance.direction;\n    if (direction !== 'alternate') {\n      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';\n    }\n    instance.reversed = !instance.reversed;\n    children.forEach(function (child) { return child.reversed = instance.reversed; });\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekChild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekChild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekChild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber, tween.isPathTargetInsideSVG);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n    }\n    if (!instance.loopBegan && instance.currentTime > 0) {\n      instance.loopBegan = true;\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (!instance.remaining) {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if (!instance.passThrough && 'Promise' in window) {\n            resolve();\n            promise = makePromise(instance);\n          }\n        }\n      } else {\n        startTime = now;\n        setCallback('loopComplete');\n        instance.loopBegan = false;\n        if (instance.direction === 'alternate') {\n          toggleInstanceDirection();\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.loopBegan = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(instance.reversed ? instance.duration : 0);\n  };\n\n  // internal method (for engine) to adjust animation timings before restoring engine ticks (rAF)\n  instance._onDocumentVisibility = resetTime;\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    if (instance.completed) { instance.reset(); }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    engine();\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    instance.completed = instance.reversed ? false : true;\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.remove = function(targets) {\n    var targetsArray = parseTargets(targets);\n    removeTargetsFromInstance(targetsArray, instance);\n  };\n\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargetsFromInstance(targetsArray, instance) {\n  var animations = instance.animations;\n  var children = instance.children;\n  removeTargetsFromAnimations(targetsArray, animations);\n  for (var c = children.length; c--;) {\n    var child = children[c];\n    var childAnimations = child.animations;\n    removeTargetsFromAnimations(targetsArray, childAnimations);\n    if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n  }\n  if (!animations.length && !children.length) { instance.pause(); }\n}\n\nfunction removeTargetsFromActiveInstances(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    removeTargetsFromInstance(targetsArray, instance);\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.2.1';\nanime.speed = 1;\n// TODO:#review: naming, documentation\nanime.suspendWhenDocumentHidden = true;\nanime.running = activeInstances;\nanime.remove = removeTargetsFromActiveInstances;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","import cloudGenerator from 'd3-cloud';\r\nimport { Word, Style, TextStyleConfig } from \"@/assets/types\";\r\nimport * as d3Scale from 'd3-scale';\r\nimport * as d3Array from 'd3-array';\r\nimport * as d3Select from 'd3-selection';\r\nimport { testSize } from '@/assets/ts/utils';\r\nconst delay = (ms: number) => new Promise(res => setTimeout(res, ms));\r\nexport const defaultStyleSheet: Style = {\r\n    fontStyle: \"\",\r\n    fontWeight: \"500\",\r\n    fontFamily: 'GT Flexa',\r\n    height: 600,\r\n    width: 800,\r\n    spiralType: 'rectangular',\r\n    rotation: 0\r\n}\r\nexport const generateWordle = function (data: Word[], specStyleSheet: Partial<Style>={}) {\r\n        const copySheet = Object.assign(defaultStyleSheet, {})\r\n        const styleSheet = Object.assign(specStyleSheet, copySheet)\r\n        const width = styleSheet.width\r\n        const height = styleSheet.height\r\n        const freqList = data.map(d => d.frequency);\r\n        const sizeRange = [d3Array.min(freqList),  d3Array.max(freqList)] as [number, number];\r\n        const wordScale = d3Scale.scaleSqrt()\r\n            .domain(sizeRange)  // !!!!!!!!!!!!!!!!!!!!!\r\n            .range([30, 90]) // !!!!!!!!!!!!!!!!!!!!!!!\r\n        return cloudGenerator()\r\n            .size([width, height])\r\n            .timeInterval(2000)\r\n            .words(data)\r\n            .rotate(function(d) { return 0 })\r\n            .fontSize((d: cloudGenerator.Word, idx: number) => {\r\n                const word = d as Word\r\n                return Math.ceil(wordScale(word.frequency));\r\n            })\r\n            .padding(1)\r\n            .font(word => word.font || styleSheet.fontFamily!)\r\n            .fontStyle(word => word.style || styleSheet.fontStyle!)\r\n            .fontWeight(word => word.weight || styleSheet.fontWeight!)\r\n            .text((d: cloudGenerator.Word, idx: number)=> {\r\n                return d.text || ''\r\n            })\r\n            .spiral(styleSheet.spiralType || 'rectangular') // 'archimedean' or 'rectangular'\r\n            // .canvas(function() {\r\n            //     return document.querySelector(\"#emordle-test-canvas\") as HTMLCanvasElement;\r\n            // })\r\n}\r\n\r\nexport const config2Word = function (data: TextStyleConfig[]) {\r\n    const result = [] as Word[];\r\n    data.forEach(d => {\r\n        result.push({\r\n            text: d.text,\r\n            font: d.fontFamily,\r\n            frequency: d.fontSize\r\n        })\r\n    })\r\n    return result;\r\n}\r\n\r\nexport const word2Config = function (layout: d3.layout.cloud.Word[], WIDTH: number, HEIGHT: number) {\r\n    const configs = [] as TextStyleConfig[];\r\n    layout.forEach(w => {\r\n        const config = {\r\n          left: WIDTH / 2 + w.x!,\r\n          top: HEIGHT / 2 + w.y!,\r\n          fontFamily: w.font as string,\r\n          fontWeight: Number(w.weight!),\r\n          fontSize: w.size!,\r\n          color: \"black\",\r\n          text: String(w.text),\r\n          x: w.x!,\r\n          y: w.y!,\r\n          size: w.size!,\r\n          offx: 0,\r\n          offy: 0\r\n        };\r\n        const bbox = testSize(config);\r\n        config.offx = bbox.width * 0.55;\r\n        config.offy = w.size! * 1.2;\r\n        config.left -= bbox.width * 0.55;\r\n        config.top -= w.size! * 1.2;\r\n        configs.push(config);\r\n      });\r\n    return configs;\r\n}\r\n\r\nexport function testOnSvg(data: Word[], divId=\"emordle-test-svg-container\") {\r\n    const svg = d3Select.select('#' + divId).html('');\r\n    const containers = svg.append('g')\r\n      .attr('transform', `translate(${defaultStyleSheet.width/2}, ${defaultStyleSheet.height/2})`)\r\n      .selectAll('text')\r\n      .data(data)\r\n      .enter()\r\n      .append('text')\r\n      .text(d => d.text!)\r\n      .attr(\"transform\", function(d) {\r\n        return \"translate(\" + [d.x, d.y] + \")\";\r\n      })\r\n      .style('text-anchor', 'middle')\r\n      .style('font-family', d => d.fontFamily!)\r\n      .style('font-size', d => d.size! + 'px')\r\n      .style('font-weight', d => d.fontWeight!)\r\n      .style('opacity', 0.2)\r\n      .style('fill', 'red')\r\n  }","import { TextStyleConfig, DraggableTextProp, DraggableText, Position, Word } from \"../types\"\r\nimport { defaultStyleSheet } from \"./layout\";\r\nimport * as d3 from 'd3';\r\nconst WIDTH = defaultStyleSheet.width;\r\nconst HEIGHT = defaultStyleSheet.height;\r\n\r\n/**\r\n * Returns a random integer between min (inclusive) and max (inclusive).\r\n * The value is no lower than min (or the next integer greater than min\r\n * if min isn't an integer) and no greater than max (or the next integer\r\n * lower than max if max isn't an integer).\r\n * Using Math.round() will give you a non-uniform distribution!\r\n */\r\n function getRandomInt(min: number, max: number) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction arrayToCSV <T>(objArray: Array<T>) {\r\n  const array = objArray;\r\n  const str = `${Object.keys(array[0]).map(value => `\"${value}\"`).join(\",\")}` + '\\r\\n';\r\n\r\n  return array.reduce((obj, next: T) => {\r\n      obj += `${Object.values(next).map(value => `\"${value}\"`).join(\",\")}` + '\\r\\n';\r\n      return obj;\r\n     }, str);\r\n}\r\n\r\n/**\r\n * Check how to preprocess the uploaded data.\r\n * @param obj raw csv string\r\n */\r\nfunction sanityChecknFill (obj: Word[]) {\r\n  if('frequency' in obj[0] && 'text' in obj[0]) {\r\n    if('left' in obj[0]) {\r\n      return  { data: true, compute: false };\r\n    } else {\r\n      return { data: true, compute: true };\r\n    }\r\n  } else {\r\n    alert('Wrong Data');\r\n    return { data: false, compute: false };\r\n  }\r\n\r\n}\r\nfunction applyStyle(obj: HTMLDivElement, style: TextStyleConfig) {\r\n    obj.style.position = \"absolute\";\r\n    obj.textContent = style.text;\r\n    obj.style.left = `${style.left}px`;\r\n    obj.style.top = `${style.top}px`;\r\n    obj.style.color = `${style.color}`;\r\n    obj.style.fontFamily = style.fontFamily;\r\n    obj.style.fontWeight = `${style.fontWeight}`;\r\n    obj.style.fontSize = `${style.fontSize}px`;\r\n}\r\n\r\n/**\r\n * Get the width and height of the text element\r\n * @param config \r\n * @returns \r\n */\r\nfunction testSize(config: TextStyleConfig) {\r\n  const elem: HTMLDivElement = document.createElement(\"div\")\r\n  elem.style.opacity = \"0\";\r\n  applyStyle(elem, config);\r\n  document.body.appendChild(elem);\r\n  const rect = elem.getBoundingClientRect();\r\n  const rectCopy = Object.assign(rect, {});\r\n  elem.remove();\r\n  return rectCopy;\r\n}\r\n\r\nfunction initDraggableText(data:TextStyleConfig[], divId=\"emordle-container\") {\r\n    const draggableTexts = [] as DraggableText[]\r\n    const container = document.querySelector(\"#\" + divId) as HTMLDivElement;\r\n    container.innerHTML = \"\";\r\n    data.sort((a: TextStyleConfig, b: TextStyleConfig) => a.fontSize! > b.fontSize! ? 1 : ( a.fontSize == b.fontSize ? 0: -1));\r\n    data.reverse();\r\n    for (let index = 0; index < data.length; index++) {\r\n        const style: TextStyleConfig = data[index];\r\n        //  initial text data from mock data\r\n        const elem: HTMLDivElement = document.createElement(\"div\");\r\n        elem.classList.add(\"text-node\");\r\n        applyStyle(elem, style);\r\n\r\n        // assign properties to enable draggablity\r\n        const draggableTextProp: DraggableTextProp = {\r\n        mousePosition: { x: 0, y: 0 },\r\n        offset: { x: 0, y: 0 },\r\n        isDown: false\r\n        };\r\n        draggableTexts.push({\r\n        initData: style,\r\n        elem: elem,\r\n        textProp: draggableTextProp\r\n        } as DraggableText);\r\n\r\n        const mouseEnterCallBack = function(e: MouseEvent) {\r\n        // prevents mousemove event to lose to overlapping element\r\n        elem.parentNode?.appendChild(elem);\r\n        elem.classList.add(\"active\");\r\n        };\r\n        const mouseLeaveCallBack = function() {\r\n        elem.classList.remove(\"active\");\r\n        };\r\n        const mouseMoveCallBack = function(e: MouseEvent) {\r\n        // e.preventDefault();\r\n        if (draggableTextProp.isDown) {\r\n            // this ensures that the isDown property sets to false when the mouse speed is too fast\r\n            // and the mouse leaves the div during mousemove\r\n            elem.onmouseleave = function() {\r\n            draggableTextProp.isDown = false;\r\n            };\r\n            draggableTextProp.mousePosition.x = e.clientX;\r\n            draggableTextProp.mousePosition.y = e.clientY;\r\n\r\n            const leftMouseDrag =\r\n            draggableTextProp.mousePosition.x + draggableTextProp.offset.x;\r\n            const topMouseDrag =\r\n            draggableTextProp.mousePosition.y + draggableTextProp.offset.y;\r\n\r\n            if (leftMouseDrag <= WIDTH - elem.offsetWidth + 20 && leftMouseDrag > -20) {\r\n            elem.style.left = leftMouseDrag + \"px\";\r\n           }\r\n            if (topMouseDrag <= HEIGHT - elem.offsetHeight + 20 && topMouseDrag > -20) {\r\n            elem.style.top = topMouseDrag + \"px\";\r\n            }\r\n        \r\n        }\r\n        };\r\n        const mouseDownCallBack = function(e: MouseEvent) {\r\n        elem.style.cursor = \"grabbing\";\r\n        draggableTextProp.isDown = true;\r\n        draggableTextProp.offset.x = elem.offsetLeft - e.clientX;\r\n        draggableTextProp.offset.y = elem.offsetTop - e.clientY;\r\n        elem.onmousemove = mouseMoveCallBack;\r\n        };\r\n\r\n        const mouseUpCallBack = function() {\r\n        elem.style.cursor = \"grab\";\r\n        draggableTextProp.isDown = false;\r\n        };\r\n        elem.addEventListener(\"mouseleave\", mouseLeaveCallBack);\r\n        elem.addEventListener(\"mouseenter\", mouseEnterCallBack);\r\n        elem.addEventListener(\"mousedown\", mouseDownCallBack);\r\n        elem.addEventListener(\"mouseup\", mouseUpCallBack);\r\n        container?.appendChild(elem);\r\n    }\r\n    return draggableTexts\r\n}\r\n\r\nfunction csvToJson(data: string) {\r\n    const lines = data.split(\"\\n\");\r\n    const result = [];\r\n    const headers = lines[0].split(\",\");\r\n\r\n    const strings = ['text','weight', 'color','font','style','rotate'];\r\n    const numbers = ['frequency','size','padding','x','y','width','height','xoff','yoff','x1','y1','x0','y0'];\r\n    const booleans = ['hasText'];\r\n\r\n    for(let i=1;i<lines.length;i++){\r\n      const obj = {} as any;\r\n      const currentline = lines[i].split(\";\");\r\n\r\n      for(let j=0;j<headers.length;j++){\r\n        const header = headers[j];\r\n        let dt = currentline[j]  as any;\r\n        if(numbers.includes(header)) {\r\n          dt = Number(dt);\r\n        } else if(booleans.includes(header)) {\r\n          dt = header == \"TRUE\" ? true : false;\r\n        }\r\n        obj[headers[j]] = dt;\r\n      }\r\n      result.push(obj);\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction draw(elem: HTMLElement, position: Position) {\r\n    elem.style.left = `${position.x}px`;\r\n    elem.style.top = `${position.y}px`;\r\n}\r\n\r\nfunction createPoint(): HTMLElement {\r\n    const point = document.createElement(\"div\");\r\n    point.classList.add(\"point\");\r\n    point.style.background = `rgb(${Math.random() * 255},${Math.random() *\r\n      255},${Math.random() * 255})`;\r\n    return point;\r\n}\r\n\r\n/**\r\n * Get the center point of a given list of positions.\r\n * @param positions x, y\r\n * @returns  center position\r\n */\r\nfunction calculateCenter(positions: Position[]): Position {\r\n    const center: Position = { x: 0, y: 0 };\r\n    for (let index = 0; index < positions.length; index++) {\r\n      const element = positions[index];\r\n      center.x += element.x;\r\n      center.y += element.y;\r\n    }\r\n    center.x = center.x / positions.length;\r\n    center.y = center.y / positions.length;\r\n    return center;\r\n}\r\n\r\n/**\r\n * Get the center of a list of texts by getting their corner positions and draw the center if neccessary.\r\n */\r\nfunction getTextCenter(draggableTexts: DraggableText[], needDraw=false, divId=\"emordle-container\"): Position {\r\n    const leftTops: Position[] = [],\r\n      rightBots: Position[] = [];\r\n    draggableTexts.forEach(val => {\r\n      const leftTopX = val.elem.offsetLeft;\r\n      const leftTopY = val.elem.offsetTop;\r\n      const rightTopX = leftTopX + val.elem.offsetWidth;\r\n      const leftBotY = leftTopY + val.elem.offsetHeight;\r\n      const rightBotX = rightTopX;\r\n      const rightBotY = leftBotY;\r\n      leftTops.push({ x: leftTopX, y: leftTopY });\r\n      rightBots.push({ x: rightBotX, y: rightBotY });\r\n    });\r\n    const centerLeftTop = calculateCenter(leftTops);\r\n    const centerRightBots = calculateCenter(rightBots);\r\n    const center = calculateCenter([centerLeftTop, centerRightBots]);\r\n    if (needDraw) {\r\n      const container = document.querySelector(\"#\" + divId);\r\n      const centerMid = createPoint();\r\n      const leftTopMid = createPoint();\r\n      const rightBotMid = createPoint();\r\n      container?.appendChild(centerMid);\r\n      container?.appendChild(leftTopMid);\r\n      container?.appendChild(rightBotMid);\r\n      draw(centerMid, center);\r\n      draw(leftTopMid, centerLeftTop);\r\n      draw(rightBotMid, centerRightBots);\r\n    }\r\n    return center;\r\n  }\r\n\r\n/**\r\n * Format the old data.\r\n * @param rawData \r\n */\r\nfunction preprocessData(rawData: Word[]) {\r\n    rawData.forEach((d) => {\r\n        d.left = -d.width! / 2 + d.x!;\r\n        d.top = -d.height! * 0.5 + d.y!;\r\n        d.x = d.left;\r\n        d.fontSize = d.size;\r\n        d.fontFamily = d.font;\r\n        d.fontWeight = 100;\r\n        d.color = \"black\";\r\n      });\r\n    return rawData\r\n}\r\n\r\nfunction textToChars(textElem: Element) {\r\n    const text = textElem.textContent!;\r\n    textElem.textContent = \"\";\r\n    const charElems: HTMLElement[] = [];\r\n    for (let index = 0; index < text.length; index++) {\r\n      const charEl = document.createElement(\"span\");\r\n      charEl.textContent = text[index];\r\n      charEl.style.fontVariant =  `\"wght\" 200, \"ital\" 0`;\r\n      textElem.appendChild(charEl);\r\n      charElems.push(charEl);\r\n    }\r\n    return charElems;\r\n  }\r\n\r\n\r\nexport {\r\n    getRandomInt,\r\n    arrayToCSV,\r\n    sanityChecknFill,\r\n    preprocessData,\r\n    applyStyle,\r\n    initDraggableText,\r\n    createPoint,\r\n    draw,\r\n    calculateCenter,\r\n    getTextCenter,\r\n    csvToJson,\r\n    textToChars,\r\n    testSize\r\n}","import anime, { AnimeAnimParams, AnimeInstance } from \"animejs\";\r\nimport { kmeans } from \"@/assets/lib/kmeans\";\r\nimport { DraggableText } from \"../types\";\r\nimport { textToChars } from \"./utils\";\r\nimport { defaultStyleSheet } from \"@/assets/ts/layout\";\r\nimport { mix, random } from \"tinycolor2\";\r\ninterface AnimationScheme {\r\n  (data: DraggableText[], entropy: number, speed: number): AnimeInstance[];\r\n}\r\ninterface AnimationFrameScheme {\r\n  (\r\n    data: DraggableText[],\r\n    entropy: number,\r\n    speed: number,\r\n    idx: number\r\n  ): AnimeInstance[];\r\n}\r\n\r\nenum DivideMode {\r\n  split = \"split\",\r\n  x = \"x\",\r\n  y = \"y\",\r\n  xy = \"xy\",\r\n  random = \"random\",\r\n}\r\nenum SchemeType {\r\n  happy = \"happy\",\r\n  sad = \"sad\",\r\n  still = \"still\",\r\n  angry = \"angry\",\r\n  fearful = \"fearful\",\r\n  tender = \"tender\",\r\n  nervous = \"nervous\",\r\n}\r\n\r\nconst animeParams: anime.AnimeParams = {\r\n  easing: \"linear\",\r\n  loop: true,\r\n};\r\n\r\nconst shuffle = function<T>(array: T[]) {\r\n  let currIdx = array.length,\r\n    tempVal,\r\n    randIdx;\r\n  while (0 != currIdx) {\r\n    randIdx = Math.floor(Math.random() * currIdx);\r\n    currIdx -= 1;\r\n    tempVal = array[currIdx];\r\n    array[currIdx] = array[randIdx];\r\n    array[randIdx] = tempVal;\r\n  }\r\n  return array;\r\n};\r\n\r\nconst getMatrix = function<T>(row: number, col: number) {\r\n  const matrix = [] as Array<Array<T>>;\r\n  for (let i = 0; i < row; i++) {\r\n    if (col !== 0) {\r\n      matrix.push(new Array(col).fill(0));\r\n    } else {\r\n      const slot = [] as Array<T>;\r\n      matrix.push(slot);\r\n    }\r\n  }\r\n  return matrix;\r\n};\r\n\r\nconst getDuration = function(speed: number) {\r\n  return (300 + Math.random() * 50) * (1 / speed);\r\n};\r\n\r\nconst getSadSchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  speed,\r\n  idx = 0\r\n) {\r\n  const animationInstances = [] as AnimeInstance[];\r\n  const duration = getDuration(speed);\r\n  const stagger = (idx * duration) / 5;\r\n  const params: AnimeAnimParams = {\r\n    targets: `.group_${idx}`,\r\n    opacity: [0.8, 0.4, 0.4, 0.25, 0.3, 0.3, 0.3, 0.4, 0.8, 1, 1, 1],\r\n    translateY: [1, 2, 5, 8, 8, 8, 8, 6.5, 5, 2.5, 0],\r\n    filter: [\r\n      \"blur(0)\",\r\n      \"blur(0)\",\r\n      \"blur(0)\",\r\n      \"blur(0.2px)\",\r\n      \"blur(1px)\",\r\n      \"blur(0.2px)\",\r\n      \"blur(0)\",\r\n      \"blur(0)\",\r\n    ],\r\n    duration: duration * 5,\r\n    easing: \"linear\",\r\n    delay: anime.stagger(stagger),\r\n    endDelay: anime.stagger(duration + 1000 - stagger),\r\n  };\r\n  animationInstances.push(anime({ ...animeParams, ...params }));\r\n  return animationInstances;\r\n};\r\n\r\nconst getAngrySchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  speed,\r\n  idx = 0\r\n) {\r\n  const animationInstances = [] as AnimeInstance[];\r\n  const duration = getDuration(speed);\r\n  const period = 0.6 + Math.random() * 1;\r\n  let x = 0,\r\n    y = 0;\r\n  data.forEach((d) => {\r\n    x += d.initData.left + (d.initData.offx || 0);\r\n    y += d.initData.top + (d.initData.offy || 0);\r\n  });\r\n  x /= Math.max(1, data.length);\r\n  y /= Math.max(1, data.length);\r\n  const theta = Math.atan2(\r\n    y - defaultStyleSheet.height / 2,\r\n    x - defaultStyleSheet.width / 2\r\n  );\r\n  const d = Math.sqrt(\r\n    (y - defaultStyleSheet.height / 2) ** 2 +\r\n      (x - defaultStyleSheet.width / 2) ** 2\r\n  );\r\n  const params: AnimeAnimParams = {\r\n    targets: `.group_${idx}`,\r\n    scale: [0.75, 1.25],\r\n    translateY: [d * Math.sin(theta) * 0.75],\r\n    translateX: [d * Math.cos(theta) * 0.75],\r\n    duration: duration,\r\n    easing: `easeInElastic(1, ${period})`,\r\n    direction: \"alternate\",\r\n  };\r\n  animationInstances.push(anime({ ...animeParams, ...params }));\r\n  return animationInstances;\r\n};\r\n\r\nconst getFearfulSchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  speed,\r\n  idx = 0\r\n) {\r\n  const animationInstances = [] as AnimeInstance[];\r\n  const duration = getDuration(speed);\r\n  const extent = (1 + entropy) * 15 + Math.random() * 15;\r\n  const direction = Math.random() > 0.5 ? 0 : Math.random() > 0.5 ? -1 : 1;\r\n  const params: AnimeAnimParams = {\r\n    targets: `.group_${idx}`,\r\n    translateY: [0, -extent],\r\n    translateX: [direction * 5 * Math.random(), -direction * 5 * Math.random()],\r\n    duration: duration,\r\n    easing: \"easeOutQuad\",\r\n    loop: true,\r\n    direction: \"alternate\",\r\n  };\r\n  animationInstances.push(anime({ ...animeParams, ...params }));\r\n  return animationInstances;\r\n};\r\n\r\nconst getTenderSchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  speed,\r\n  idx = 0\r\n) {\r\n  const animationInstances = [] as AnimeInstance[];\r\n  const textElems = data.map((v) => v.elem);\r\n  textElems.forEach((textElem, i) => {\r\n    const selector = `char-node-${idx}`;\r\n    const charElems = textToChars(textElem);\r\n    charElems.forEach((elem) => {\r\n      elem.classList.add(selector);\r\n      elem.style.filter = `saturate(80%)`;\r\n      elem.style.fontVariant = `\"wght\" 200, \"ital\" 0`;\r\n    });\r\n\r\n    const duration = getDuration(speed) * 2;\r\n    const stagger = (duration / charElems.length) * 0.9;\r\n    const params: AnimeAnimParams = {\r\n      targets: `.${selector}`,\r\n      keyframes: [\r\n        {\r\n          fontVariationSettings: `'wght' ${entropy * 300 + 50},  'ital' 0`,\r\n          filter: \"saturate(60%)\",\r\n          skew: \"0deg\",\r\n          translateY: 5,\r\n        },\r\n        {\r\n          fontVariationSettings: `'wght' 600, 'ital' 200`,\r\n          filter: \"saturate(50%)\",\r\n          translateY: -10 - 5 * entropy,\r\n          skew: \"-5deg\",\r\n        },\r\n        {\r\n          fontVariationSettings: `'wght' ${entropy * 300 + 50}, 'ital' 0`,\r\n          filter: \"saturate(40%)\",\r\n          translateY: 2,\r\n          skew: \"0deg\",\r\n        },\r\n      ],\r\n      delay: anime.stagger(stagger),\r\n      duration: duration,\r\n    };\r\n    animationInstances.push(anime({ ...animeParams, ...params }));\r\n  });\r\n  return animationInstances;\r\n};\r\nconst getStillSchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  duration,\r\n  idx = 0\r\n) {\r\n  return [anime({ ...animeParams })] as AnimeInstance[];\r\n};\r\n\r\nconst getHappySchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  speed,\r\n  idx = 0\r\n) {\r\n  const animationInstances = [] as AnimeInstance[];\r\n  const duration = getDuration(speed);\r\n  let x = 0,\r\n    y = 0;\r\n  data.forEach((d) => {\r\n    x += d.initData.left + (d.initData.offx || 0);\r\n    y += d.initData.top + (d.initData.offy || 0);\r\n  });\r\n  x /= Math.max(1, data.length);\r\n  y /= Math.max(1, data.length);\r\n  const theta = Math.atan2(\r\n    y - defaultStyleSheet.height / 2,\r\n    x - defaultStyleSheet.width / 2\r\n  );\r\n  const d = Math.sqrt(\r\n    (y - defaultStyleSheet.height / 2) ** 2 +\r\n      (x - defaultStyleSheet.width / 2) ** 2\r\n  );\r\n  const params: AnimeAnimParams = {\r\n    targets: `.group_${idx}`,\r\n    direction: \"alternate\",\r\n    loop: true,\r\n  };\r\n  const instance = anime.timeline(params);\r\n  instance.add({\r\n    translateY: (d * Math.sin(theta)) / 2,\r\n    translateX: (d * Math.cos(theta)) / 2,\r\n    duration: duration / 2,\r\n    easing: `easeInQuart`,\r\n  });\r\n  instance.add({\r\n    rotate: theta * Math.PI * 0.8,\r\n    duration: duration * 0.4,\r\n    easing: \"linear\",\r\n  });\r\n  // instance.add({\r\n  //   translateY: 0,\r\n  //   translateX: 0,\r\n  //   duration: duration / 2,\r\n  //   easing: `easeInQuart`,\r\n  // })\r\n  animationInstances.push(instance);\r\n  return animationInstances;\r\n};\r\n\r\nconst getNervousSchemeFrame: AnimationFrameScheme = function(\r\n  data,\r\n  entropy,\r\n  speed,\r\n  idx\r\n) {\r\n  const animationInstances = [] as AnimeInstance[];\r\n  const duration = getDuration(speed) * 0.8;\r\n  const extent = (1 + entropy) * 15 + Math.random() * 15;\r\n  const direction = Math.random() > 0.5 ? 0 : Math.random() > 0.5 ? -1 : 1;\r\n  const params: AnimeAnimParams = {\r\n    targets: `.group_${idx}`,\r\n    translateY: [0, -extent * 0.3],\r\n    translateX: [direction * 5 * Math.random(), -direction * 5 * Math.random()],\r\n    rotate: [\r\n      -Math.PI / 6,\r\n      Math.PI / 6,\r\n      0,\r\n      0,\r\n      -Math.PI / 4,\r\n      0,\r\n      Math.PI / 4,\r\n      -Math.PI / 4,\r\n      0,\r\n      Math.PI / 4,\r\n      -Math.PI / 4,\r\n      0,\r\n      Math.PI / 4,\r\n    ],\r\n    duration: duration,\r\n    easing: \"easeOutQuad\",\r\n    direction: \"alternate\",\r\n  };\r\n  animationInstances.push(anime({ ...animeParams, ...params }));\r\n  return animationInstances;\r\n};\r\n\r\nclass Animator {\r\n  private data: DraggableText[];\r\n  private entropy: number;\r\n  private speed: number;\r\n  private split: DivideMode;\r\n  private scheme: SchemeType;\r\n  get numGroup() {\r\n    const value = Math.max(1, Math.ceil(this.data.length * this.entropy));\r\n    return value;\r\n  }\r\n  get splitCenters() {\r\n    const centers = [] as Array<[number, number]>;\r\n    const a = defaultStyleSheet.width / 4,\r\n      b = defaultStyleSheet.height / 4;\r\n    const alpha = (1 * Math.PI) / 4;\r\n    const numGroups = this.numGroup;\r\n    for (let idx = 0; idx < numGroups; idx++) {\r\n      const theta = (idx * 2 * Math.PI) / numGroups + alpha;\r\n      const x = a * Math.cos(theta);\r\n      const y = b * Math.sin(theta);\r\n      centers.push([x, y]);\r\n    }\r\n    return centers;\r\n  }\r\n  get schemeFunc() {\r\n    switch (this.scheme) {\r\n      case SchemeType.happy:\r\n        return getHappySchemeFrame; // bump\r\n      case SchemeType.nervous:\r\n        return getNervousSchemeFrame; // drip\r\n      case SchemeType.sad:\r\n        return getSadSchemeFrame; // fade\r\n      case SchemeType.angry:\r\n        return getAngrySchemeFrame; // scale\r\n      case SchemeType.fearful:\r\n        return getFearfulSchemeFrame; // shake\r\n      case SchemeType.tender:\r\n        return getTenderSchemeFrame; // wave\r\n      default:\r\n        return getStillSchemeFrame; // still\r\n    }\r\n  }\r\n  constructor(\r\n    data: DraggableText[],\r\n    entropy: number,\r\n    speed: number,\r\n    scheme: string\r\n  ) {\r\n    (this.data = data), (this.speed = speed), (this.entropy = entropy);\r\n    switch (scheme) {\r\n      case \"happy\":\r\n        this.scheme = SchemeType.happy;\r\n        this.split = DivideMode.xy;\r\n        break;\r\n      case \"nervous\":\r\n        this.scheme = SchemeType.nervous;\r\n        this.split = DivideMode.random;\r\n        break;\r\n      case \"sad\":\r\n        this.scheme = SchemeType.sad;\r\n        this.split = DivideMode.y;\r\n        break;\r\n      case \"angry\":\r\n        this.scheme = SchemeType.angry;\r\n        this.split = DivideMode.xy;\r\n        break;\r\n      case \"fearful\":\r\n        this.scheme = SchemeType.fearful;\r\n        this.split = DivideMode.xy;\r\n        break;\r\n      case \"tender\":\r\n        this.scheme = SchemeType.tender;\r\n        this.split = DivideMode.y;\r\n        if (data[0].initData.fontFamily !== \"GT Flexa\") {\r\n          // alert(\"You should use a variable font for this scheme.\");\r\n        }\r\n        break;\r\n      default:\r\n        this.scheme = SchemeType.still;\r\n        this.split = DivideMode.xy;\r\n    }\r\n  }\r\n  getAnimationScheme() {\r\n    const words = this.splitGroup();\r\n    const func = this.schemeFunc;\r\n    const animationInstances: AnimeInstance[] = [];\r\n    // remove any existing animation before getting new one\r\n    anime.remove(\".animating\");\r\n    words.forEach((group, idx) => {\r\n      group.forEach((word) => {\r\n        const name = word.elem.classList.item(1);\r\n        if (name) word.elem.classList.remove(name);\r\n        word.elem.classList.add(`group_${idx}`);\r\n        word.elem.classList.add(\"animating\");\r\n      });\r\n      animationInstances.push(...func(group, this.entropy, this.speed, idx));\r\n    });\r\n\r\n    return animationInstances;\r\n  }\r\n  splitGroup() {\r\n    const numGroup = this.numGroup;\r\n    const numWordsPerGroup = Math.max(\r\n      1,\r\n      Math.ceil(this.data.length / numGroup)\r\n    );\r\n    const assignedWords = this.data.map((d) => Object.assign({}, d));\r\n    const results = [] as DraggableText[][];\r\n    if (this.split !== DivideMode.xy) {\r\n      if (this.split === DivideMode.random) {\r\n        shuffle(assignedWords);\r\n      } else if (this.split === DivideMode.x) {\r\n        assignedWords.sort((a, b) => a.initData.left! - b.initData.left!);\r\n      } else if (this.split == DivideMode.y) {\r\n        assignedWords.sort((a, b) => a.initData.top! - b.initData.top!);\r\n      }\r\n      let i = 0;\r\n      for (; i * numWordsPerGroup <= assignedWords.length; i += 1) {\r\n        const startIdx = numWordsPerGroup * i;\r\n        const endIdx = Math.min(\r\n          numWordsPerGroup + startIdx,\r\n          assignedWords.length\r\n        );\r\n        const words = assignedWords.slice(startIdx, endIdx);\r\n        results.push(words);\r\n      }\r\n    } else {\r\n      // divide by xy\r\n      const positions = assignedWords.map((obj) => [\r\n        obj.initData.left + (obj.initData.offx || 0),\r\n        obj.initData.top + (obj.initData.offy || 0),\r\n      ]);\r\n      const centers = this.splitCenters;\r\n      const alias = this.split === DivideMode.xy ? \"kmeans\" : centers;\r\n      const kmResult = kmeans(positions, numGroup, alias);\r\n      const wordBags = getMatrix(numGroup, 0) as Array<Array<DraggableText>>;\r\n      kmResult.indexes.forEach((d: number, idx: number) => {\r\n        wordBags[d].push(this.data[idx]);\r\n      });\r\n      wordBags.forEach((bag) => {\r\n        if (bag.length !== 0) results.push(bag);\r\n      });\r\n    }\r\n    return results;\r\n  }\r\n}\r\n\r\nexport { Animator };\r\n","/* eslint-disable */\r\n/**\r\n * doc comment for color-preset.ts.\r\n * default variables for color.\r\n * @packageDocumentation\r\n * Reference: : http://dx.doi.org/10.1145/3025453.3026041\r\n */\r\nexport const rainbow = [ \r\n'rgba(244, 67, 54, 1)',\r\n'rgba(233, 30, 99, 0.95)',\r\n'rgba(156, 39, 176, 0.9)',\r\n'rgba(103, 58, 183, 0.85)',\r\n'rgba(63, 81, 181, 0.8)',\r\n'rgba(33, 150, 243, 0.75)',\r\n'rgba(3, 169, 244, 0.7)',\r\n'rgba(0, 188, 212, 0.7)',\r\n'rgba(0, 150, 136, 0.75)',\r\n'rgba(76, 175, 80, 0.8)',\r\n'rgba(139, 195, 74, 0.85)',\r\n'rgba(205, 220, 57, 0.9)',\r\n'rgba(255, 235, 59, 0.95)',\r\n'rgba(255, 193, 7, 1)'\r\n]\r\n\r\nexport const calm = [\r\n    '#6E746A',\r\n    '#478F8D',\r\n    '#00BEB9',\r\n    '#83B3E3',\r\n    '#AAD2E0',\r\n    '#A2CCC0',\r\n    '#ADD9A1',\r\n    '#DDD8BA',\r\n    '#EAC793',\r\n    '#F1D9CA',\r\n    '#DFB0C7',\r\n    '#A857AA',\r\n    '#9796BB',\r\n    '#D4D4D4'\r\n]\r\n\r\nexport const negative = [\r\n    '#D8D8D8',\r\n    '#899390',\r\n    '#6E746A',\r\n    '#3C3C3C',\r\n    '#9796BB',\r\n    '#30355F',\r\n    '#335671',\r\n    '#51692B',\r\n    '#69301D',\r\n    '#845145',\r\n    '#920000',\r\n    '#C91E11'\r\n]\r\n\r\nexport const positive = [\r\n    '#F9468C',\r\n    '#F80F19',\r\n    '#FF8000',\r\n    '#FFAB1C',\r\n    '#F3D027',\r\n    '#23BF0C',\r\n    '#5A922D',\r\n    '#B7DE55',\r\n    '#8AD2F1',\r\n    '#32BFF2',\r\n    '#00BEB9'\r\n]\r\n\r\nexport const exciting = [\r\n    '#AAD2E0',\r\n    '#478F8D',\r\n    '#23BF0C',\r\n    '#F3D027',\r\n    '#FFAB1C',\r\n    '#FF8000',\r\n    '#F80F19',\r\n    '#920000',\r\n    '#C91E11',\r\n    '#F9468C',\r\n    '#863E85',\r\n    '#6D6EB9',\r\n    '#423FA8',\r\n    '#0073AA'\r\n]\r\n\r\nexport const disturbing = [\r\n    '#30355F',\r\n    '#3C3C3C',\r\n    '#899390',\r\n    '#845145',\r\n    '#69301D',\r\n    '#920000',\r\n    '#C91E11',\r\n    '#F80F19',\r\n    '#FF8000',\r\n    '#F3D027',\r\n    '#23BF0C'\r\n]\r\n\r\nexport const serious = [\r\n    '#899390',\r\n    '#335671',\r\n    '#116160',\r\n    '#A5B34B',\r\n    '#5A922D',\r\n    '#1B4C79',\r\n    '#30355F',\r\n    '#2F2F2F',\r\n    '#3C3C3C',\r\n    '#8A594E',\r\n    '#69301D',\r\n    '#920000',\r\n    '#F80F19',\r\n]\r\n\r\nexport const playful = [\r\n    '#A857AA',\r\n    '#F9468C',\r\n    '#F80F19',\r\n    '#FF8000',\r\n    '#FFAB1C',\r\n    '#F3D027',\r\n    '#25C00F',\r\n    '#00BEB9',\r\n    '#32BFF2'\r\n]\r\n\r\nexport const trustworthy = [\r\n    '#FF8000',\r\n    '#FFAB1C',\r\n    '#F3D027',\r\n    '#B7DE55',\r\n    '#23BF0C',\r\n    '#ADD9A1',\r\n    '#A2CCC0',\r\n    '#478F8D',\r\n    '#96D7F2',\r\n    '#32BFF2',\r\n    '#0572CD',\r\n    '#9796BB'\r\n]\r\n\r\nexport const black = ['#000000']\r\n\r\nexport const gray = ['#6c757d']\r\n\r\nexport const red = ['#F80F19']\r\n\r\nexport let getColor = function (name: string) {\r\n    console.log(name, '???')\r\n    if (name == \"trustworthy\") return trustworthy\r\n    if (name == \"positive\") return positive\r\n    if (name == \"negative\") return negative\r\n    if (name == \"calm\") return calm\r\n    if (name == \"black\") return black\r\n    if (name == \"gray\") return gray\r\n    if (name == \"red\") return red\r\n    if (name == \"playful\") return playful\r\n    if (name == \"rainbow\") return rainbow\r\n    if (name == \"serious\") return serious\r\n    if (name == \"disturbing\") return disturbing\r\n    return calm\r\n}","export default function autoType(object) {\n  for (var key in object) {\n    var value = object[key].trim(), number, m;\n    if (!value) value = null;\n    else if (value === \"true\") value = true;\n    else if (value === \"false\") value = false;\n    else if (value === \"NaN\") value = NaN;\n    else if (!isNaN(number = +value)) value = number;\n    else if (m = value.match(/^([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2})?)?(T\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/)) {\n      if (fixtz && !!m[4] && !m[7]) value = value.replace(/-/g, \"/\").replace(/T/, \" \");\n      value = new Date(value);\n    }\n    else continue;\n    object[key] = value;\n  }\n  return object;\n}\n\n// https://github.com/d3/d3-dsv/issues/45\nconst fixtz = new Date(\"2019-01-01T00:00\").getHours() || new Date(\"2019-07-01T00:00\").getHours();","\r\n/* eslint-disable prettier/prettier */\r\nimport anime, { AnimeInstance } from \"animejs\";\r\nimport { Options, Vue } from \"vue-class-component\";\r\nimport Slider from \"@/components/ui/Slider.vue\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport { Watch } from \"vue-property-decorator\";\r\nimport { DraggableText, TextStyleConfig, Word } from \"@/assets/types\";\r\nimport * as Emordle from \"@/assets/ts/animate\";\r\nimport { getColor } from \"@/assets/ts/color-preset\";\r\nimport {\r\n  applyStyle,\r\n  initDraggableText,\r\n  getTextCenter,\r\n  sanityChecknFill,\r\n  // testSize,\r\n  getRandomInt,\r\n  arrayToCSV,\r\n} from \"@/assets/ts/utils\";\r\nimport * as d3Dsv from \"d3-dsv\";\r\nimport {\r\n  generateWordle,\r\n  defaultStyleSheet,\r\n  // testOnSvg,\r\n  word2Config,\r\n  config2Word,\r\n} from \"@/assets/ts/layout\";\r\nconst WIDTH = defaultStyleSheet.width;\r\nconst HEIGHT = defaultStyleSheet.height;\r\nconst divId = \"emordle-container\";\r\nconst fileNames = [\r\n  \"emotive/happy-words.csv\",\r\n  \"emotive/sad-words.csv\",\r\n  \"emotive/tender-words.csv\",\r\n  \"emotive/afraid-words.csv\",\r\n  \"emotive/angry-words.csv\",\r\n  \"reallife/2020_search.csv\",\r\n  \"reallife/creep.csv\",\r\n  \"reallife/thx.csv\",\r\n  \"reallife/ingredients.csv\",\r\n];\r\nconst fileReader = new FileReader();\r\nlet uploadFilename = \"a\";\r\ninterface Dataset {\r\n  data: TextStyleConfig[];\r\n  tag: string;\r\n}\r\ninterface UploadData {\r\n  text: string;\r\n  frequency: number;\r\n}\r\n@Options({\r\n  components: {\r\n    Slider,\r\n  },\r\n})\r\nexport default class Tool extends Vue {\r\n  public collection: Dataset[] = [];\r\n  private draggableTexts: DraggableText[] = [];\r\n  private wordleData: Dataset = { data: [], tag: \"\" };\r\n  private animationInstances: AnimeInstance[] = [];\r\n  private animationMode = \"happy\";\r\n  private ifMask = false;\r\n  private isShowModal = false;\r\n  private uploadData: UploadData[] = [];\r\n  private animationModes = [\r\n    \"still\",\r\n    \"tender\",\r\n    \"happy\",\r\n    \"angry\",\r\n    \"sad\",\r\n    \"fearful\",\r\n    \"nervous\",\r\n  ];\r\n  private colorScheme = \"gray\";\r\n  private colorSchemes = [\r\n    \"black\",\r\n    \"gray\",\r\n    \"red\",\r\n    \"calm\",\r\n    \"positive\",\r\n    \"negative\",\r\n    \"playful\",\r\n    \"trustworthy\",\r\n    \"rainbow\",\r\n    \"exciting\",\r\n  ];\r\n  private speed = 0.5;\r\n  private entropy = 0.5;\r\n  public fontFamilies = [\r\n    \"Arial\",\r\n    \"NotoSans\",\r\n    \"DancingScript\",\r\n    \"RobotoMono\",\r\n    \"Raleway\",\r\n    \"Manrope\",\r\n    \"Dreamwood\",\r\n    \"GT Flexa\",\r\n  ];\r\n  public fontFamily = \"GT Flexa\";\r\n\r\n  private readonly animeParams: anime.AnimeParams = {\r\n    easing: \"linear\",\r\n    // direction: \"alternate\",\r\n    loop: true,\r\n  };\r\n\r\n  printisShowModal() {\r\n    console.log(this.isShowModal);\r\n  }\r\n  initLayout() {\r\n    const container = document.querySelector(\"#\" + divId) as HTMLDivElement;\r\n    container.style.width = `${WIDTH}px`;\r\n    container.style.height = `${HEIGHT}px`;\r\n    const test = document.querySelector(\r\n      \"#emordle-test-svg-container\"\r\n    ) as SVGElement;\r\n    test.style.width = `${WIDTH}px`;\r\n    test.style.height = `${HEIGHT}px`;\r\n  }\r\n\r\n  async mounted() {\r\n    this.initLayout();\r\n    fileReader.addEventListener(\r\n      \"load\",\r\n      () => {\r\n        const res = fileReader.result;\r\n        if (!res || typeof res !== \"string\") return;\r\n        const data = (d3Dsv.csvParse(res, d3Dsv.autoType) as unknown) as Word[];\r\n        this.parseFile(data);\r\n      },\r\n      false\r\n    );\r\n    await Promise.all(\r\n      fileNames.map((f: string) => d3.csv(`./dataset/${f}`))\r\n    ).then((rawData: unknown[]) => {\r\n      const data = rawData as Word[][];\r\n      data.forEach((instance, idx: number) => {\r\n        uploadFilename = fileNames[idx].split(\"/\")[1].split(\".\")[0];\r\n        this.parseFile(instance, false);\r\n      });\r\n      this.wordleData = this.collection[0];\r\n      d3.select(\"#emordle-dataset\")\r\n        .selectAll(\"option\")\r\n        .property(\"selected\", false)\r\n        .filter((v: any) => v[\"data-tag\"] === this.collection[0].tag)\r\n        .property(\"selected\", true);\r\n\r\n      this.initiateData(this.collection[0].data);\r\n      this.relayout();\r\n    });\r\n    // Promise.all(\r\n    //   fileNames.slice(1).map((f: string) => d3.csv(`./dataset/${f}`))\r\n    // ).then((rawData: unknown[]) => {\r\n    //   const data = rawData as Word[][];\r\n    //   data.forEach((instance, idx: number) => {\r\n    //     uploadFilename = fileNames[idx + 1].split(\"/\")[1].split(\".\")[0];\r\n    //     this.parseFile(instance, false);\r\n    //   })\r\n    //   })\r\n  }\r\n  @Watch(\"wordleData\")\r\n  wordleDataChanged() {\r\n    if (!this.wordleData || this.wordleData.data.length === 0) return;\r\n    this.ifMask = false;\r\n    this.initiateData(this.wordleData.data);\r\n    // this.relayout();\r\n  }\r\n  @Watch(\"colorScheme\")\r\n  colorSchemeChanged() {\r\n    const colorSet = getColor(this.colorScheme);\r\n    const n = colorSet.length;\r\n    this.draggableTexts.forEach((obj) => {\r\n      const c = colorSet[getRandomInt(0, n - 1)];\r\n      obj.initData.color = c;\r\n      obj.elem.style.color = c;\r\n    });\r\n  }\r\n  @Watch(\"fontFamily\")\r\n  fontFamilyChanged() {\r\n    this.draggableTexts.forEach((obj) => {\r\n      obj.initData.fontFamily = this.fontFamily;\r\n      obj.elem.style.fontFamily = this.fontFamily;\r\n    });\r\n  }\r\n  initiateData(data: TextStyleConfig[]) {\r\n    d3.selectAll(\".text-node\").remove();\r\n    this.draggableTexts = initDraggableText(data);\r\n    this.colorSchemeChanged();\r\n    this.pause();\r\n    this.center();\r\n    this.animate();\r\n  }\r\n  animate() {\r\n    if (!this.draggableTexts || this.draggableTexts.length === 0) return;\r\n    const animator = new Emordle.Animator(\r\n      this.draggableTexts,\r\n      this.entropy,\r\n      this.speed,\r\n      this.animationMode\r\n    );\r\n    this.animationInstances = animator.getAnimationScheme();\r\n    this.play();\r\n    setTimeout(() => {\r\n      d3.select(\"#pauseButton\").on(\"click\");\r\n    }, 60000);\r\n  }\r\n  play() {\r\n    document.querySelector(\"#pauseButton\")?.classList.remove(\"active\");\r\n    this.animationInstances.forEach((i) => i.play());\r\n    document.querySelector(\"#playButton\")?.classList.add(\"active\");\r\n  }\r\n  pause() {\r\n    document.querySelector(\"#playButton\")?.classList.remove(\"active\");\r\n    this.animationInstances.forEach((i) => i.pause());\r\n    document.querySelector(\"#pauseButton\")?.classList.add(\"active\");\r\n  }\r\n\r\n  center() {\r\n    const center = getTextCenter(this.draggableTexts);\r\n    const translateX = WIDTH / 2 - center.x;\r\n    const translateY = HEIGHT / 2 - center.y;\r\n    anime({\r\n      targets: \".text-node\",\r\n      left: function(el: HTMLElement) {\r\n        const offsetL = parseInt(el.style.left.split(\"px\")[0]);\r\n        return `${offsetL + translateX}px`;\r\n      },\r\n      top: function(el: HTMLElement) {\r\n        const offsetT = parseInt(el.style.top.split(\"px\")[0]);\r\n        return `${offsetT + translateY}px`;\r\n      },\r\n    });\r\n  }\r\n\r\n  restart() {\r\n    for (let index = 0; index < this.draggableTexts.length; index++) {\r\n      const obj = this.draggableTexts[index].elem;\r\n      const data = this.draggableTexts[index].initData;\r\n      obj.removeAttribute(\"style\");\r\n      applyStyle(obj, data);\r\n    }\r\n    this.center();\r\n  }\r\n\r\n  relayout() {\r\n    this.pause();\r\n    const words = config2Word(this.draggableTexts.map((v) => v.initData));\r\n    generateWordle(words, { width: WIDTH, height: HEIGHT })\r\n      .on(\"end\", (layout) => {\r\n        const configs = word2Config(layout, WIDTH, HEIGHT);\r\n        configs.forEach((config, i) => {\r\n          config.color = this.draggableTexts[i].initData.color;\r\n        });\r\n        this.draggableTexts = initDraggableText(configs);\r\n        this.animate();\r\n      })\r\n      .start();\r\n  }\r\n\r\n  mask() {\r\n    this.ifMask = !this.ifMask;\r\n    if (this.ifMask) {\r\n      this.draggableTexts.forEach((v) => {\r\n        v.elem.textContent = \"x\".repeat(v.initData.text.length);\r\n      });\r\n    } else {\r\n      this.draggableTexts.forEach((v) => {\r\n        v.elem.textContent = v.initData.text;\r\n      });\r\n    }\r\n  }\r\n\r\n  speedCallback(v: string) {\r\n    this.speed = parseFloat(v);\r\n    this.animate();\r\n  }\r\n  entropyCallback(v: string) {\r\n    this.entropy = parseFloat(v);\r\n    if (this.animationMode == \"tender\") this.entropy = 1 - this.entropy;\r\n    this.animate();\r\n  }\r\n\r\n  animationModeChange(v: string) {\r\n    // stops what ever animation\r\n    this.animationInstances.forEach((i) => {\r\n      i.restart();\r\n      i.pause();\r\n    });\r\n    this.animationInstances = [];\r\n    this.restart();\r\n    this.animate();\r\n  }\r\n  handleUpload(event: Event) {\r\n    const target = event.target as HTMLFormElement;\r\n    if (target === null) return;\r\n    const files = target.files;\r\n    if (files === null) return;\r\n    const file = files[0];\r\n    if (!file) return;\r\n\r\n    fileReader.readAsText(file);\r\n    uploadFilename = file.name\r\n      .split(\".\")\r\n      .slice(0, -1)\r\n      .join(\".\");\r\n    for (const dataset of this.collection) {\r\n      if (dataset.tag === uploadFilename) {\r\n        uploadFilename += Math.random()\r\n          .toString()\r\n          .substring(2, 4);\r\n      }\r\n    }\r\n  }\r\n  showModal() {\r\n    this.isShowModal = true;\r\n  }\r\n  hideModal() {\r\n    this.uploadData = [];\r\n    this.isShowModal = false;\r\n    const btn = document.querySelector(\r\n      \"#generate-emordle-button\"\r\n    ) as HTMLButtonElement;\r\n    btn.style.display = \"none\";\r\n  }\r\n  openFile() {\r\n    document.getElementById(\"wordleUpload\")?.click();\r\n  }\r\n  insertDataset(data: TextStyleConfig[], changeData = true) {\r\n    const dataset = {\r\n      data: data,\r\n      tag: uploadFilename,\r\n    };\r\n    this.collection.push(dataset);\r\n    if (changeData) {\r\n      d3.select(\"#emordle-dataset\").property(\"value\", dataset);\r\n      this.draggableTexts = initDraggableText(dataset.data);\r\n      this.colorSchemeChanged();\r\n      this.wordleData = this.collection[this.collection.length - 1];\r\n    }\r\n  }\r\n  parseFile(data: Word[], newFileFlag = true) {\r\n    const sanity = sanityChecknFill(data);\r\n    if (!sanity.data) {\r\n      alert(`Wrong Data Format! Please use 'Text' and 'Frequency'!`);\r\n      return;\r\n    }\r\n    // show user the loaded csv file first\r\n    this.uploadData = data.map(\r\n      (x) =>\r\n        ({\r\n          text: x.text,\r\n          frequency: x.frequency,\r\n        } as UploadData)\r\n    );\r\n    if (sanity.compute) {\r\n      generateWordle(data, { width: WIDTH, height: HEIGHT })\r\n        .on(\"end\", (layout) => {\r\n          const configs = word2Config(layout, WIDTH, HEIGHT);\r\n          //testOnSvg((configs as unknown) as Word[]);\r\n          this.insertDataset(configs, newFileFlag);\r\n          this.wordleData = this.collection[this.collection.length - 1];\r\n        })\r\n        .start();\r\n    } else {\r\n      this.insertDataset((data as unknown) as TextStyleConfig[], newFileFlag);\r\n    }\r\n  }\r\n\r\n  downloadConfig() {\r\n    const a = document.createElement(\"a\");\r\n    const jsonData = this.draggableTexts.map((v) => {\r\n      const d = v.initData;\r\n      return {\r\n        text: d.text,\r\n        color: d.color,\r\n        fontFamily: d.fontFamily,\r\n        fontSize: d.fontSize,\r\n        fontWeight: d.fontWeight,\r\n        left: d.left,\r\n        top: d.top,\r\n        frequency: d.fontSize,\r\n        offx: d.offx,\r\n        offy: d.offy,\r\n      };\r\n    });\r\n    const csvData = d3Dsv.csvFormat(jsonData);\r\n    a.href = URL.createObjectURL(new Blob([csvData], { type: \"text/csv\" }));\r\n    a.download = `layout_${this.wordleData.tag}.csv`;\r\n    a.click();\r\n    a.remove();\r\n  }\r\n  downloadGIF() {\r\n    const a = document.createElement(\"a\");\r\n    a.href = URL.createObjectURL(new Blob([new Blob()], { type: \"gif\" }));\r\n    a.target = \"_blank\";\r\n    a.download = `${this.wordleData.tag}_E${this.entropy.toFixed(\r\n      3\r\n    )}_S${this.speed.toFixed(3)}.csv`;\r\n    a.click();\r\n    a.remove();\r\n    alert(\"NOT IMPLEMENTED!\");\r\n  }\r\n}\r\n","import { render } from \"./Tool.vue?vue&type=template&id=1421f28d\"\nimport script from \"./Tool.vue?vue&type=script&lang=ts\"\nexport * from \"./Tool.vue?vue&type=script&lang=ts\"\n\nimport \"./Tool.vue?vue&type=style&index=0&id=1421f28d&lang=scss\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tool.vue?vue&type=style&index=0&id=1421f28d&lang=scss\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n"],"sourceRoot":""}