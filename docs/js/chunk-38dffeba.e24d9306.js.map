{"version":3,"sources":["webpack:///./src/views/Wave.vue?a354","webpack:///./src/views/Wave.vue","webpack:///./src/assets/jump-old.js","webpack:///./src/views/Wave.vue?4116"],"names":["id","width","height","FONTURL","time","pace","distance","p1","p2","dx","x","dy","y","Math","sqrt","lerp","t","cross","gl","indices","MAX_BEZIER_STEPS","BEZIER_STEP_SIZE","EPSILON","Polygon","p","this","points","push","cur","length","forEach","next","area","p0","dist","steps","max","min","i","a","b","count","tick","uniform1f","drawElements","TRIANGLES","UNSIGNED_SHORT","requestAnimationFrame","getRoots","polys","root","parent","j","inside","children","getPolys","font","s","text","path","getPath","commands","type","x1","y1","x2","y2","moveTo","cubicTo","conicTo","close","sort","abs","getVertexData","totalPoints","reduce","sum","vertexData","Float32Array","vertexCount","process","poly","coords","holes","child","set","earcut","console","log","draw","words","canvas","document","getElementById","polyAll","word","size","concat","drawOnCanvas","getContext","viewport","vs","createShader","VERTEX_SHADER","ps","FRAGMENT_SHADER","prog","createProgram","bindAttribLocation","map","name","getUniformLocation","uScale","uOffset","uColor","uTime","u_resolutionLoc","fragColor","useProgram","uniform2fv","uniform4fv","uniform2f","clearColor","clear","COLOR_BUFFER_BIT","vertBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","indxBuffer","indexData","Uint16Array","ELEMENT_ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","flush","Date","now","jumpingWordle","fontUrl","opentype","load","err","fontMeta","alert","d3","then","d","render"],"mappings":"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","file":"js/chunk-38dffeba.e24d9306.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Wave.vue?vue&type=style&index=0&id=b0a37f06&lang=scss\"","<template>\n  <div>\n    <canvas id=\"wave-canvas\" width=\"800\" height=\"520\"> </canvas>\n  </div>\n</template>\n<script lang=\"js\">\nimport { Vue } from \"vue-class-component\"\nimport * as d3 from \"d3\"\nimport { jumpingWordle } from \"@/assets/jump-old\"\nexport default class Wave extends Vue {\n    mounted() {\n        d3.json('./dataset/layout/layout_creep.json').then(d => {\n            jumpingWordle(d, './font/NotoSans.ttf')\n        })\n    }\n}\n</script>\n<style lang=\"scss\">\n@keyframes float {\n  0% {\n    box-shadow: 0 5px 15px 0px rgba(0, 0, 0, 0.6);\n    transform: translatey(0px);\n  }\n  50% {\n    box-shadow: 0 25px 15px 0px rgba(0, 0, 0, 0.2);\n    transform: translatey(-20px);\n  }\n  100% {\n    box-shadow: 0 5px 15px 0px rgba(0, 0, 0, 0.6);\n    transform: translatey(0px);\n  }\n}\n// canvas {\n//   animation: float 6s ease-in-out infinite;\n// }\n</style>\n","/* eslint-disable */\n/**\n * doc comment for jump.ts\n * @remarks \n * It is working in progress. It trys to tune the webgl program more subtlely.\n * @packageDocumentation\n */\n\n\n// Reads out a .ttf and triangulates the glyphs using OpenType and Earcut.\n// Code made By riv -> https://stackoverflow.com/questions/50554803/triangulate-path-data-from-opentype-js-using-earcut/50581183#50581183\n// Original here -> https://jsbin.com/gecakub/edit?html,js,output\n\n// 1. Reads Bezier curves from `.tff` font file using OpenType.js.\n// 2. Converts Bezier curves into closed shapes and sort them by descending area.\n// 3. Determines the indices for the holes by figuring out which shapes are inside other shapes.\n// 4. Send all points to Earcut with the holes indices as a second parameter.\n// 5. Uses earcut's result as indices for the geometry.\n// 6. Then, render triangles with webGL.\n\n\nimport opentype from \"opentype.js\"\nimport earcut from \"earcut\"\nimport { createShader, createProgram } from \"./gl-helper\"\nimport { polygonCentroid } from \"d3\"\n\nconst FONTURL = \"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf\"\nlet time = null\nlet pace = 80.0\n\nfunction distance(p1, p2) {\n  const dx = p1.x - p2.x,\n    dy = p1.y - p2.y\n  return Math.sqrt(dx * dx + dy * dy)\n}\n\nfunction lerp(p1, p2, t) {\n  return { x: (1 - t) * p1.x + t * p2.x, y: (1 - t) * p1.y + t * p2.y }\n}\n\nfunction cross(p1, p2) {\n  return p1.x * p2.y - p1.y * p2.x\n}\n\n// bezier discretization\nconst MAX_BEZIER_STEPS = 10\nconst BEZIER_STEP_SIZE = 3.0\n// this is for inside checks - doesn't have to be particularly\n// small because glyphs have finite resolution\nconst EPSILON = 1e-6\n\nlet gl\nlet indices\n// class for converting path commands into point data\nclass Polygon {\n  points = []\n  children = []\n  area = 0.0\n\n  moveTo(p) {\n    this.points.push(p)\n  }\n\n  lineTo(p) {\n    this.points.push(p)\n  }\n  close() {\n    let cur = this.points[this.points.length - 1]\n    this.points.forEach(next => {\n      this.area += 0.5 * cross(cur, next)\n      cur = next\n    })\n  }\n  conicTo(p, p1) {\n    const p0 = this.points[this.points.length - 1]\n    const dist = distance(p0, p1) + distance(p1, p)\n    const steps = Math.max(\n      2,\n      Math.min(MAX_BEZIER_STEPS, dist / BEZIER_STEP_SIZE)\n    )\n    for (let i = 1; i <= steps; ++i) {\n      const t = i / steps\n      this.points.push(lerp(lerp(p0, p1, t), lerp(p1, p, t), t))\n    }\n  }\n  cubicTo(p, p1, p2) {\n    const p0 = this.points[this.points.length - 1]\n    const dist = distance(p0, p1) + distance(p1, p2) + distance(p2, p)\n    const steps = Math.max(\n      2,\n      Math.min(MAX_BEZIER_STEPS, dist / BEZIER_STEP_SIZE)\n    )\n    for (let i = 1; i <= steps; ++i) {\n      const t = i / steps\n      const a = lerp(lerp(p0, p1, t), lerp(p1, p2, t), t)\n      const b = lerp(lerp(p1, p2, t), lerp(p2, p, t), t)\n      this.points.push(lerp(a, b, t))\n    }\n  }\n\n  inside(p) {\n    let count = 0,\n      cur = this.points[this.points.length - 1]\n    this.points.forEach(next => {\n      const p0 = cur.y < next.y ? cur : next\n      const p1 = cur.y < next.y ? next : cur\n      if (p0.y < p.y + EPSILON && p1.y > p.y + EPSILON) {\n        if ((p1.x - p0.x) * (p.y - p0.y) > (p.x - p0.x) * (p1.y - p0.y)) {\n          count += 1\n        }\n      }\n      cur = next\n    })\n    return count % 2 !== 0\n  }\n}\n\nfunction tick(t) {\n  gl.uniform1f(time, t / pace)\n  gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0)\n  requestAnimationFrame(tick)\n}\n\nlet getRoots = function (polys) {\n     // classify contours to find holes and their 'parents'\n     const root = []\n     for (let i = 0; i < polys.length; ++i) {\n         let parent = null\n         for (let j = i - 1; j >= 0; --j) {\n             // a contour is a hole if it is inside its parent and has different winding\n             if (\n             polys[j].inside(polys[i].points[0]) &&\n             polys[i].area * polys[j].area < 0\n             ) {\n                 parent = polys[j]\n                 break\n             }\n     }\n     if (parent) {\n             parent.children.push(polys[i])\n         } else {\n             root.push(polys[i])\n         }\n     }\n     return root\n}\n\nlet getPolys = function (font, x=0, y=0, s=12, text=\"Hello World\") {\n    // create path\n    const path = font.getPath(text, x, y, s)\n    // create a list of closed contours\n    const polys = []\n    path.commands.forEach(({ type, x, y, x1, y1, x2, y2 }) => {\n    switch (type) {\n        case \"M\":\n        polys.push(new Polygon())\n        polys[polys.length - 1].moveTo({ x, y })\n        break\n        case \"L\":\n        polys[polys.length - 1].moveTo({ x, y })\n        break\n        case \"C\":\n        polys[polys.length - 1].cubicTo(\n            { x, y },\n            { x: x1, y: y1 },\n            { x: x2, y: y2 }\n        )\n        break\n        case \"Q\":\n        polys[polys.length - 1].conicTo({ x, y }, { x: x1, y: y1 })\n        break\n        case \"Z\":\n        polys[polys.length - 1].close()\n        break\n        }\n    })\n    // sort contours by descending area\n    polys.sort((a, b) => Math.abs(b.area) - Math.abs(a.area))\n    return polys\n}\n\nlet getVertexData = function (root, polys) {\n    const totalPoints = polys.reduce((sum, p) => sum + p.points.length, 0)\n    const vertexData = new Float32Array(totalPoints * 2)\n    let vertexCount = 0\n    indices = []\n    let process = function(poly) {\n    // construct input for earcut\n        const coords = []\n        const holes = []\n        poly.points.forEach(({ x, y }) => coords.push(x, y))\n        poly.children.forEach(child => {\n            // children's children are new, separate shapes\n            child.children.forEach(process)\n            holes.push(coords.length / 2)\n            child.points.forEach(({ x, y }) => coords.push(x, y))\n        })\n        // add vertex data\n        vertexData.set(coords, vertexCount * 2)\n        // add index data\n        earcut(coords, holes).forEach(i => indices.push(i + vertexCount))\n        vertexCount += coords.length / 2\n    }\n    root.forEach(process)\n    console.log(vertexData)\n    return [vertexData, indices]\n}\n\nlet draw = function (font, words=null) {\n    let canvas = document.getElementById(\"wave-canvas\")\n    const width = canvas.width\n    const height = canvas.height\n    let polyAll = []\n    for (let word of words) {\n        let polys = getPolys(font, word.x - word.width / 2, word.y, word.size, word.text)\n        polyAll = polyAll.concat(polys)\n    }\n    let root = getRoots(polyAll)\n    let [vertexData, indices] = getVertexData(root, polyAll)\n    drawOnCanvas(vertexData, indices)\n}\n\nlet drawOnCanvas = function (vertexData, indices) {\n    const canvas = document.getElementById(\"wave-canvas\")\n    gl = canvas.getContext(\"webgl\")\n    const width = canvas.width\n    const height = canvas.height\n    gl.viewport(0, 0, width, height)\n    const vs = createShader(gl, gl.VERTEX_SHADER, `\n        precision mediump float;\n        uniform vec2 uScale;\n        uniform vec2 uOffset;\n        uniform float uTime;\n        attribute vec2 position;\n        varying vec4 fragColor;\n        void main() {\n        vec2 pos = position;\n        pos.y += pow(sin( (pos.x) / 250.+ uTime *4.),2.) * 20.;\n        pos.x += sin( pos.x/ 100. + uTime *1.) * 5.;\n        gl_Position = vec4(pos * uScale + uOffset, 0.0, 1.0);\n        fragColor = vec4(sin(uTime*.5)*.5+.5, cos(uTime*.2)*.5+.5, 0., 1. );//+ 2.*sin(uTime));\n        }`)\n    const ps = createShader(gl, gl.FRAGMENT_SHADER,\n        `precision mediump float;\n        uniform vec4 uColor;\n        uniform vec2 u_resolution;\n        varying vec4 fragColor;\n        void main() {\n        //gl_FragColor = uColor;\n        // vec2 st = gl_FragCoord.xy / u_resolution;\n        gl_FragColor = fragColor;\n        }`)\n    const prog = createProgram(gl, vs, ps)\n    gl.bindAttribLocation(prog, 0, \"position\")\n    const [uScale, uOffset, uColor, uTime, u_resolutionLoc, fragColor] = [\n    \"uScale\",\n    \"uOffset\",\n    \"uColor\",\n    \"uTime\",\n    \"u_resolution\",\n    \"fragColor\"\n    ].map(name => gl.getUniformLocation(prog, name))\n    time = uTime\n    gl.useProgram(prog)\n    gl.uniform1f(uTime, 0)\n    gl.uniform2fv(uScale, [2.0 / width, -2.0 / height])\n    gl.uniform2fv(uOffset, [0.0, 0.0])\n    gl.uniform4fv(uColor, [0.0, 0.0, 0.0, 1.0])\n    gl.uniform4fv(fragColor, [0.0, 0.0, 0.0, 1.0])\n    gl.uniform2f(u_resolutionLoc, gl.canvas.width, gl.canvas.height)\n    gl.clearColor(1.0, 1.0, 1.0, 1.0)\n    gl.clear(gl.COLOR_BUFFER_BIT)\n    const vertBuffer = gl.createBuffer()\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer)\n    gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW)\n    const indxBuffer = gl.createBuffer()\n    const indexData = new Uint16Array(indices)\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indxBuffer)\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indexData, gl.STATIC_DRAW)\n    gl.enableVertexAttribArray(0)\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, true, 8, 0)\n    gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0)\n    gl.flush()\n    console.log('Finish')\n    tick(Date.now())\n}\n\nlet onloadedFont = function(err, font) {\n    if (err) {\n        alert(\"Font could not be loaded: \" + err)\n    } else {\n        console.log(font)\n        draw(font)\n    }\n}\n\nexport let test = function (fontUrl=FONTURL) {\n    opentype.load(\n        fontUrl,\n        onloadedFont\n      )    \n}\n\nexport let jumpingWordle = function (words = [], fontUrl = FONTURL) {\n    opentype.load(\n        fontUrl,\n        function(err, fontMeta) {\n            if (err) {\n                console.log(fontUrl)\n                alert(\"Font could not be loaded: \" + err)\n            } else {\n                draw(fontMeta, words)\n            }\n        }\n    )\n}","import { render } from \"./Wave.vue?vue&type=template&id=b0a37f06\"\nimport script from \"./Wave.vue?vue&type=script&lang=js\"\nexport * from \"./Wave.vue?vue&type=script&lang=js\"\n\nimport \"./Wave.vue?vue&type=style&index=0&id=b0a37f06&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}