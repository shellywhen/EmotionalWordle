{"version":3,"sources":["webpack:///./node_modules/d3-cloud/node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/d3-cloud/index.js","webpack:///./node_modules/d3-array/src/ticks.js","webpack:///./node_modules/d3-array/src/ascending.js","webpack:///./node_modules/d3-array/src/bisector.js","webpack:///./node_modules/d3-array/src/number.js","webpack:///./node_modules/d3-array/src/bisect.js","webpack:///./node_modules/d3-interpolate/src/round.js","webpack:///./node_modules/d3-scale/src/constant.js","webpack:///./node_modules/d3-scale/src/number.js","webpack:///./node_modules/d3-scale/src/continuous.js","webpack:///./node_modules/d3-scale/src/init.js","webpack:///./node_modules/d3-format/src/formatSpecifier.js","webpack:///./node_modules/d3-format/src/formatDecimal.js","webpack:///./node_modules/d3-format/src/exponent.js","webpack:///./node_modules/d3-format/src/formatPrefixAuto.js","webpack:///./node_modules/d3-format/src/defaultLocale.js","webpack:///./node_modules/d3-format/src/precisionPrefix.js","webpack:///./node_modules/d3-format/src/formatGroup.js","webpack:///./node_modules/d3-format/src/formatNumerals.js","webpack:///./node_modules/d3-format/src/formatTrim.js","webpack:///./node_modules/d3-format/src/formatRounded.js","webpack:///./node_modules/d3-format/src/formatTypes.js","webpack:///./node_modules/d3-format/src/identity.js","webpack:///./node_modules/d3-format/src/locale.js","webpack:///./node_modules/d3-format/src/precisionRound.js","webpack:///./node_modules/d3-format/src/precisionFixed.js","webpack:///./node_modules/d3-scale/src/tickFormat.js","webpack:///./node_modules/d3-scale/src/linear.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/modules/es.math.trunc.js","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./src/views/Shaking.vue","webpack:///./src/views/Shaking.vue?a1ba","webpack:///./src/views/Shaking.vue?fbc1","webpack:///./src/assets/cloud.ts","webpack:///./src/views/Shaking.vue?4752","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./node_modules/d3-ease/src/exp.js","webpack:///./node_modules/d3-color/src/math.js","webpack:///./node_modules/d3-color/src/lab.js","webpack:///./node_modules/d3-interpolate/src/hcl.js","webpack:///./src/assets/manual.ts","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/assets/keyframe-handler.ts","webpack:///./src/assets/jump.ts","webpack:///./src/assets/animator.ts"],"names":["noop","value","dispatch","t","i","n","arguments","length","_","test","Error","Dispatch","this","parseTypenames","typenames","types","trim","split","map","name","indexOf","slice","hasOwnProperty","type","get","c","set","callback","concat","push","prototype","constructor","on","typename","T","copy","call","that","args","Array","apply","classof","module","exports","TypeError","cloudRadians","Math","PI","cw","ch","cloudText","d","text","cloudFont","cloudFontNormal","cloudFontSize","sqrt","cloudRotate","random","cloudPadding","cloudSprite","contextAndRatio","data","di","sprite","context","ratio","clearRect","x","y","maxh","save","font","style","weight","size","w","measureText","width","h","rotate","sr","sin","cr","cos","wcr","wsr","hcr","hsr","max","abs","translate","fillText","padding","lineWidth","strokeText","restore","height","xoff","yoff","x1","y1","x0","y0","hasText","pixels","getImageData","w32","seen","seenRow","j","k","m","cloudCollide","tag","board","sw","last","lx","sx","msx","cloudBounds","bounds","b0","b1","collideRects","a","b","archimedeanSpiral","e","rectangularSpiral","dy","dx","sign","zeroArray","cloudCanvas","document","createElement","functor","fontSize","fontStyle","fontWeight","spiral","words","timeInterval","Infinity","event","timer","cloud","canvas","getContext","fillStyle","strokeStyle","textAlign","place","dxdy","startX","startY","maxDelta","s","dt","min","start","tags","sort","clearInterval","setInterval","step","Date","now","stop","spirals","archimedean","rectangular","e10","e5","e2","reverse","ticks","count","tickIncrement","isFinite","ceil","floor","power","log","LN10","error","pow","tickStep","step0","step1","NaN","f","delta","compare","left","lo","hi","mid","right","center","ascendingComparator","ascending","ascendingBisect","bisector","bisectRight","number","bisect","round","constants","unit","identity","normalize","isNaN","clamper","bimap","domain","range","interpolate","d0","d1","r0","r1","polymap","r","source","target","clamp","unknown","transformer","transform","untransform","piecewise","output","input","rescale","scale","invert","from","rangeRound","u","continuous","initRange","re","formatSpecifier","specifier","match","exec","FormatSpecifier","fill","align","symbol","zero","comma","precision","undefined","toString","toLocaleString","replace","formatDecimalParts","p","toExponential","coefficient","prefixExponent","g","grouping","substring","join","thousands","numerals","out","i1","i0","exponent","toFixed","formatDecimal","toPrecision","formatRounded","formatPrefixAuto","toUpperCase","prefixes","group","locale","formatGroup","Number","currencyPrefix","currency","currencySuffix","decimal","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","toLowerCase","suffix","formatType","maybeSuffix","format","valuePrefix","valueSuffix","valueNegative","formatTrim","charCodeAt","formatPrefix","defaultLocale","definition","tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","nice","prestep","maxIter","linear","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","end","DESCRIPTORS","global","isForced","redefine","has","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","index","code","it","parseInt","key","NumberWrapper","dummy","valueOf","keys","$","toObject","nativeKeys","FAILS_ON_PRIMITIVES","stat","forced","trunc","toInteger","thisNumberValue","repeat","nativeToFixed","acc","x2","FORCED","proto","fractionDigits","z","fractDigits","result","multiply","c2","divide","dataToString","RangeError","id","styleScheme","viewBox","preserveAspectRatio","class","wordleData","collection","fileReader","FileReader","uploadFilename","animationModes","bubble","colorful","chill","glisten","electric","animationMode","fontFamily","colorSchemes","colorScheme","easeTypes","easeType","strokeWidth","rotation","duration","customColor","presetColors","url","then","cloudManager","bgAnimator","animator","createGif","play","err","console","render","__scopeId","CloudManager","styleSheet","svgid","canvasid","loadCanvasFlag","loadSvgFlag","canvasHandler","self","assignColor","plotHandler","testCloud","finalData","plotOnSvgWithConfig","update","mode","wordScale","idx","word","frequency","spiralType","forEach","color","ownKeys","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","sham","getOwnPropertyDescriptors","object","descriptor","O","nativeGetOwnPropertyDescriptor","expInOut","radians","degrees","K","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","o","Lab","l","opacity","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","atan2","hcl","define","brighter","darker","rgb","hue","keyframes","colors","stage","enumerableOnly","Object","getOwnPropertySymbols","symbols","filter","sym","enumerable","_objectSpread2","defineProperties","minNumGroup","sampleFont","sampleItalic","italicRange","sampleWeight","weightRange","sampleItalicInterval","sampleWeightInterval","sampleItalicMid","sampleWeightMid","wordLength","speed","entropy","alpha","keyFrames","dance","getDiscoKeyFrames","getSplitKeyframes","swing","getSwingingKeyFrames","maxNumGroup","numGroup","groupKeyFrames","italicDelta","weightDelta","fontMid","italic","fontStart","fontEnd","fontWideMid","fontWideStart","animation","backupFrames","fid","iter","al","tl","move","groupKf","theta","dis","_move","_center","_rotate","_neg_rotate","randXD","randY","jump","FONTURL","time","pace","distance","p1","p2","lerp","cross","gl","MAX_BEZIER_STEPS","BEZIER_STEP_SIZE","EPSILON","points","children","area","cur","next","p0","dist","steps","tick","uniform1f","drawElements","TRIANGLES","UNSIGNED_SHORT","requestAnimationFrame","getRoots","polys","root","parent","inside","getPolys","path","getPath","commands","y2","moveTo","cubicTo","conicTo","close","totalPoints","reduce","sum","vertexData","Float32Array","vertexCount","process","poly","coords","holes","child","statement","defaultvs","getElementById","polyAll","indices","staticvs","vsGenerator","timeGran","yAmplitude","yExtent","xExtent","xAmplitude","xPosStr","yPosStr","viewport","vs","VERTEX_SHADER","ps","FRAGMENT_SHADER","prog","bindAttribLocation","getUniformLocation","uScale","uOffset","uColor","uTime","u_resolutionLoc","fragColor","useProgram","uniform2fv","uniform4fv","uniform2f","clearColor","clear","COLOR_BUFFER_BIT","vertBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","indxBuffer","indexData","Uint16Array","ELEMENT_ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","flush","fontUrl","load","fontMeta","alert","configs","assign","order","delay","ease","origin","frameCounter","ckf","nkf","frameAt","phase","setValWithRatio","fontString","getCss","trues","fc","groupManagers","extent","wordMap","Map","numGroups","field","gm","centers","numWordsPerGroup","assignedWords","xy","startIdx","endIdx","positions","alias","kmeans","wordBags","getMatrix","indexes","v","gifFlag","replay","svgFlag","wave","reset","playWaving","playSwinging","playDancing","playSplitting","svg","display","plotOnSvg","keyFrameHandler","getKeyFrames","divideMode","createManagers","assignKeyFrame","divideGroup","startPlay","getDivideMode","gms","elapsed","totalWords","cfa","setFrameCounter","fs","updateWord","updateOnSvg","gif","addFrame","res","quality","param","blob","wlink","setAttribute","URL","createObjectURL","addEventListener","remove","click","plink","encodeURIComponent","JSON","stringify","groupNum","wordsCopy","array","tempVal","randIdx","currIdx","row","col","matrix","slot"],"mappings":"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","file":"js/chunk-3f61f764.1649b825.js","sourcesContent":["var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","// Word cloud layout by Jason Davies, https://www.jasondavies.com/wordcloud/\n// Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf\n\nvar dispatch = require(\"d3-dispatch\").dispatch;\n\nvar cloudRadians = Math.PI / 180,\n    cw = 1 << 11 >> 5,\n    ch = 1 << 11;\n\nmodule.exports = function() {\n  var size = [256, 256],\n      text = cloudText,\n      font = cloudFont,\n      fontSize = cloudFontSize,\n      fontStyle = cloudFontNormal,\n      fontWeight = cloudFontNormal,\n      rotate = cloudRotate,\n      padding = cloudPadding,\n      spiral = archimedeanSpiral,\n      words = [],\n      timeInterval = Infinity,\n      event = dispatch(\"word\", \"end\"),\n      timer = null,\n      random = Math.random,\n      cloud = {},\n      canvas = cloudCanvas;\n\n  cloud.canvas = function(_) {\n    return arguments.length ? (canvas = functor(_), cloud) : canvas;\n  };\n\n  cloud.start = function() {\n    var contextAndRatio = getContext(canvas()),\n        board = zeroArray((size[0] >> 5) * size[1]),\n        bounds = null,\n        n = words.length,\n        i = -1,\n        tags = [],\n        data = words.map(function(d, i) {\n          d.text = text.call(this, d, i);\n          d.font = font.call(this, d, i);\n          d.style = fontStyle.call(this, d, i);\n          d.weight = fontWeight.call(this, d, i);\n          d.rotate = rotate.call(this, d, i);\n          d.size = ~~fontSize.call(this, d, i);\n          d.padding = padding.call(this, d, i);\n          return d;\n        }).sort(function(a, b) { return b.size - a.size; });\n\n    if (timer) clearInterval(timer);\n    timer = setInterval(step, 0);\n    step();\n\n    return cloud;\n\n    function step() {\n      var start = Date.now();\n      while (Date.now() - start < timeInterval && ++i < n && timer) {\n        var d = data[i];\n        d.x = (size[0] * (random() + .5)) >> 1;\n        d.y = (size[1] * (random() + .5)) >> 1;\n        cloudSprite(contextAndRatio, d, data, i);\n        if (d.hasText && place(board, d, bounds)) {\n          tags.push(d);\n          event.call(\"word\", cloud, d);\n          if (bounds) cloudBounds(bounds, d);\n          else bounds = [{x: d.x + d.x0, y: d.y + d.y0}, {x: d.x + d.x1, y: d.y + d.y1}];\n          // Temporary hack\n          d.x -= size[0] >> 1;\n          d.y -= size[1] >> 1;\n        }\n      }\n      if (i >= n) {\n        cloud.stop();\n        event.call(\"end\", cloud, tags, bounds);\n      }\n    }\n  }\n\n  cloud.stop = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n    return cloud;\n  };\n\n  function getContext(canvas) {\n    canvas.width = canvas.height = 1;\n    var ratio = Math.sqrt(canvas.getContext(\"2d\").getImageData(0, 0, 1, 1).data.length >> 2);\n    canvas.width = (cw << 5) / ratio;\n    canvas.height = ch / ratio;\n\n    var context = canvas.getContext(\"2d\");\n    context.fillStyle = context.strokeStyle = \"red\";\n    context.textAlign = \"center\";\n\n    return {context: context, ratio: ratio};\n  }\n\n  function place(board, tag, bounds) {\n    var perimeter = [{x: 0, y: 0}, {x: size[0], y: size[1]}],\n        startX = tag.x,\n        startY = tag.y,\n        maxDelta = Math.sqrt(size[0] * size[0] + size[1] * size[1]),\n        s = spiral(size),\n        dt = random() < .5 ? 1 : -1,\n        t = -dt,\n        dxdy,\n        dx,\n        dy;\n\n    while (dxdy = s(t += dt)) {\n      dx = ~~dxdy[0];\n      dy = ~~dxdy[1];\n\n      if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n\n      tag.x = startX + dx;\n      tag.y = startY + dy;\n\n      if (tag.x + tag.x0 < 0 || tag.y + tag.y0 < 0 ||\n          tag.x + tag.x1 > size[0] || tag.y + tag.y1 > size[1]) continue;\n      // TODO only check for collisions within current bounds.\n      if (!bounds || !cloudCollide(tag, board, size[0])) {\n        if (!bounds || collideRects(tag, bounds)) {\n          var sprite = tag.sprite,\n              w = tag.width >> 5,\n              sw = size[0] >> 5,\n              lx = tag.x - (w << 4),\n              sx = lx & 0x7f,\n              msx = 32 - sx,\n              h = tag.y1 - tag.y0,\n              x = (tag.y + tag.y0) * sw + (lx >> 5),\n              last;\n          for (var j = 0; j < h; j++) {\n            last = 0;\n            for (var i = 0; i <= w; i++) {\n              board[x + i] |= (last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n            }\n            x += sw;\n          }\n          delete tag.sprite;\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  cloud.timeInterval = function(_) {\n    return arguments.length ? (timeInterval = _ == null ? Infinity : _, cloud) : timeInterval;\n  };\n\n  cloud.words = function(_) {\n    return arguments.length ? (words = _, cloud) : words;\n  };\n\n  cloud.size = function(_) {\n    return arguments.length ? (size = [+_[0], +_[1]], cloud) : size;\n  };\n\n  cloud.font = function(_) {\n    return arguments.length ? (font = functor(_), cloud) : font;\n  };\n\n  cloud.fontStyle = function(_) {\n    return arguments.length ? (fontStyle = functor(_), cloud) : fontStyle;\n  };\n\n  cloud.fontWeight = function(_) {\n    return arguments.length ? (fontWeight = functor(_), cloud) : fontWeight;\n  };\n\n  cloud.rotate = function(_) {\n    return arguments.length ? (rotate = functor(_), cloud) : rotate;\n  };\n\n  cloud.text = function(_) {\n    return arguments.length ? (text = functor(_), cloud) : text;\n  };\n\n  cloud.spiral = function(_) {\n    return arguments.length ? (spiral = spirals[_] || _, cloud) : spiral;\n  };\n\n  cloud.fontSize = function(_) {\n    return arguments.length ? (fontSize = functor(_), cloud) : fontSize;\n  };\n\n  cloud.padding = function(_) {\n    return arguments.length ? (padding = functor(_), cloud) : padding;\n  };\n\n  cloud.random = function(_) {\n    return arguments.length ? (random = _, cloud) : random;\n  };\n\n  cloud.on = function() {\n    var value = event.on.apply(event, arguments);\n    return value === event ? cloud : value;\n  };\n\n  return cloud;\n};\n\nfunction cloudText(d) {\n  return d.text;\n}\n\nfunction cloudFont() {\n  return \"serif\";\n}\n\nfunction cloudFontNormal() {\n  return \"normal\";\n}\n\nfunction cloudFontSize(d) {\n  return Math.sqrt(d.value);\n}\n\nfunction cloudRotate() {\n  return (~~(Math.random() * 6) - 3) * 30;\n}\n\nfunction cloudPadding() {\n  return 1;\n}\n\n// Fetches a monochrome sprite bitmap for the specified text.\n// Load in batches for speed.\nfunction cloudSprite(contextAndRatio, d, data, di) {\n  if (d.sprite) return;\n  var c = contextAndRatio.context,\n      ratio = contextAndRatio.ratio;\n\n  c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n  var x = 0,\n      y = 0,\n      maxh = 0,\n      n = data.length;\n  --di;\n  while (++di < n) {\n    d = data[di];\n    c.save();\n    c.font = d.style + \" \" + d.weight + \" \" + ~~((d.size + 1) / ratio) + \"px \" + d.font;\n    var w = c.measureText(d.text + \"m\").width * ratio,\n        h = d.size << 1;\n    if (d.rotate) {\n      var sr = Math.sin(d.rotate * cloudRadians),\n          cr = Math.cos(d.rotate * cloudRadians),\n          wcr = w * cr,\n          wsr = w * sr,\n          hcr = h * cr,\n          hsr = h * sr;\n      w = (Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 0x1f) >> 5 << 5;\n      h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n    } else {\n      w = (w + 0x1f) >> 5 << 5;\n    }\n    if (h > maxh) maxh = h;\n    if (x + w >= (cw << 5)) {\n      x = 0;\n      y += maxh;\n      maxh = 0;\n    }\n    if (y + h >= ch) break;\n    c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio);\n    if (d.rotate) c.rotate(d.rotate * cloudRadians);\n    c.fillText(d.text, 0, 0);\n    if (d.padding) c.lineWidth = 2 * d.padding, c.strokeText(d.text, 0, 0);\n    c.restore();\n    d.width = w;\n    d.height = h;\n    d.xoff = x;\n    d.yoff = y;\n    d.x1 = w >> 1;\n    d.y1 = h >> 1;\n    d.x0 = -d.x1;\n    d.y0 = -d.y1;\n    d.hasText = true;\n    x += w;\n  }\n  var pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data,\n      sprite = [];\n  while (--di >= 0) {\n    d = data[di];\n    if (!d.hasText) continue;\n    var w = d.width,\n        w32 = w >> 5,\n        h = d.y1 - d.y0;\n    // Zero the buffer\n    for (var i = 0; i < h * w32; i++) sprite[i] = 0;\n    x = d.xoff;\n    if (x == null) return;\n    y = d.yoff;\n    var seen = 0,\n        seenRow = -1;\n    for (var j = 0; j < h; j++) {\n      for (var i = 0; i < w; i++) {\n        var k = w32 * j + (i >> 5),\n            m = pixels[((y + j) * (cw << 5) + (x + i)) << 2] ? 1 << (31 - (i % 32)) : 0;\n        sprite[k] |= m;\n        seen |= m;\n      }\n      if (seen) seenRow = j;\n      else {\n        d.y0++;\n        h--;\n        j--;\n        y++;\n      }\n    }\n    d.y1 = d.y0 + seenRow;\n    d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n  }\n}\n\n// Use mask-based collision detection.\nfunction cloudCollide(tag, board, sw) {\n  sw >>= 5;\n  var sprite = tag.sprite,\n      w = tag.width >> 5,\n      lx = tag.x - (w << 4),\n      sx = lx & 0x7f,\n      msx = 32 - sx,\n      h = tag.y1 - tag.y0,\n      x = (tag.y + tag.y0) * sw + (lx >> 5),\n      last;\n  for (var j = 0; j < h; j++) {\n    last = 0;\n    for (var i = 0; i <= w; i++) {\n      if (((last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0))\n          & board[x + i]) return true;\n    }\n    x += sw;\n  }\n  return false;\n}\n\nfunction cloudBounds(bounds, d) {\n  var b0 = bounds[0],\n      b1 = bounds[1];\n  if (d.x + d.x0 < b0.x) b0.x = d.x + d.x0;\n  if (d.y + d.y0 < b0.y) b0.y = d.y + d.y0;\n  if (d.x + d.x1 > b1.x) b1.x = d.x + d.x1;\n  if (d.y + d.y1 > b1.y) b1.y = d.y + d.y1;\n}\n\nfunction collideRects(a, b) {\n  return a.x + a.x1 > b[0].x && a.x + a.x0 < b[1].x && a.y + a.y1 > b[0].y && a.y + a.y0 < b[1].y;\n}\n\nfunction archimedeanSpiral(size) {\n  var e = size[0] / size[1];\n  return function(t) {\n    return [e * (t *= .1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\n\nfunction rectangularSpiral(size) {\n  var dy = 4,\n      dx = dy * size[0] / size[1],\n      x = 0,\n      y = 0;\n  return function(t) {\n    var sign = t < 0 ? -1 : 1;\n    // See triangular numbers: T_n = n * (n + 1) / 2.\n    switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {\n      case 0:  x += dx; break;\n      case 1:  y += dy; break;\n      case 2:  x -= dx; break;\n      default: y -= dy; break;\n    }\n    return [x, y];\n  };\n}\n\n// TODO reuse arrays?\nfunction zeroArray(n) {\n  var a = [],\n      i = -1;\n  while (++i < n) a[i] = 0;\n  return a;\n}\n\nfunction cloudCanvas() {\n  return document.createElement(\"canvas\");\n}\n\nfunction functor(d) {\n  return typeof d === \"function\" ? d : function() { return d; };\n}\n\nvar spirals = {\n  archimedean: archimedeanSpiral,\n  rectangular: rectangularSpiral\n};\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    step = -step;\n    start = Math.ceil(start * step);\n    stop = Math.floor(stop * step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var $ = require('../internals/export');\n\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.github.io/ecma262/#sec-math.trunc\n$({ target: 'Math', stat: true }, {\n  trunc: function trunc(it) {\n    return (it > 0 ? floor : ceil)(it);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.github.io/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line max-statements\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    var multiply = function (n, c) {\n      var index = -1;\n      var c2 = c;\n      while (++index < 6) {\n        c2 += n * data[index];\n        data[index] = c2 % 1e7;\n        c2 = floor(c2 / 1e7);\n      }\n    };\n\n    var divide = function (n) {\n      var index = 6;\n      var c = 0;\n      while (--index >= 0) {\n        c += data[index];\n        data[index] = floor(c / n);\n        c = (c % n) * 1e7;\n      }\n    };\n\n    var dataToString = function () {\n      var index = 6;\n      var s = '';\n      while (--index >= 0) {\n        if (s !== '' || index === 0 || data[index] !== 0) {\n          var t = String(data[index]);\n          s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n        }\n      } return s;\n    };\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        result = dataToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        result = dataToString() + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","<template>\r\n<div>\r\n  <svg id=\"emotional-wordle-edit-svg\"\r\n             :height=\"styleScheme.height\"\r\n            :width=\"styleScheme.width\"\r\n            :viewBox=\"`0 0 ${styleScheme.width} ${styleScheme.height}`\"\r\n            preserveAspectRatio=\"xMidYMid meet\"\r\n            ></svg>\r\n  <div\r\n    class=\"canvas-container\"\r\n    :style=\"{ height: styleScheme.height + 'px', 'text-align': 'center' }\"\r\n  >\r\n    <canvas id=\"emotional-wordle-canvas\"></canvas>\r\n    <!-- <canvas id=\"emotional-wordle-bg-canvas\"></canvas> -->\r\n  </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\n/* eslint-disable */\r\n\r\nimport { Vue } from \"vue-class-component\"\r\nimport { CloudManager } from \"@/assets/cloud\"\r\nimport { Dataset, Mode, Style, Word } from '@/assets/types'\r\nimport * as ColorPreset from \"@/assets/color-preset\"\r\nimport * as d3 from \"d3-fetch\"\r\n\r\n\r\nexport default class ShakingView extends Vue {\r\n  public wordleData: Word[] = []\r\n  public collection: Dataset[] = []\r\n  public fileReader = new FileReader()\r\n  public uploadFilename: string = \"\"\r\n  public animationModes: Array<Mode> = [Mode.bubble, Mode.colorful, Mode.chill, Mode.glisten, Mode.electric]\r\n  public animationMode: Mode = Mode.bubble\r\n  public fontFamily = 'NotoSans'\r\n  public fontStyle = 'normal'\r\n  public fontWeight = 'normal'\r\n  public colorSchemes = ['red', 'black', 'Viridis', 'Plasma', 'rainbow']\r\n  public colorScheme = 'red'\r\n  public easeTypes = ['Cubic', 'ElasticIn', 'ElasticOut', 'BounceIn', 'BounceOut', 'BounceInOut']\r\n  public easeType = 'ElasticIn'\r\n  public strokeWidth = '2px'\r\n  public rotation: number = 0\r\n  public duration: number = 10000\r\n  public cloudManager: CloudManager | undefined\r\n  public customColor = \"#000000\"\r\n  public presetColors = ColorPreset.rainbow\r\n  public bgAnimator: any\r\n  get styleScheme ():Style {\r\n    return {\r\n      colorScheme: this.colorScheme,\r\n      fontStyle: this.fontStyle,\r\n      fontWeight: this.fontWeight,\r\n      fontFamily: this.fontFamily,\r\n      strokeWidth: this.strokeWidth,\r\n      rotation: this.rotation,\r\n      height: 520,\r\n      width: 800\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    let url = './dataset/layout/layout_xmas.json'\r\n    d3.json(url).then((d: any) => {\r\n        this.wordleData = d as Word[]\r\n        this.cloudManager = new CloudManager(this.wordleData, \r\n                                            this.styleScheme, \r\n                                            this.animationMode,\r\n                                            'emotional-wordle-svg',\r\n                                            'emotional-wordle-canvas',\r\n                                            this.bgAnimator,\r\n                                            true,\r\n                                            false,\r\n                                            this.duration\r\n                                            )\r\n      this.cloudManager.animator?.createGif()                 \r\n      this.cloudManager.animator?.play()\r\n      }, (err: any) => {\r\n      console.log(err)\r\n    })\r\n    \r\n  }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"../assets/scss/_ui.scss\";\r\n// @keyframes float {\r\n//   0% {\r\n//     box-shadow: 0 5px 15px 0px rgba(0, 0, 0, 0.6);\r\n//     transform: translatey(0px);\r\n//   }\r\n//   50% {\r\n//     box-shadow: 0 25px 15px 0px rgba(0, 0, 0, 0.2);\r\n//     transform: translatey(-20px);\r\n//   }\r\n//   100% {\r\n//     box-shadow: 0 5px 15px 0px rgba(0, 0, 0, 0.6);\r\n//     transform: translatey(0px);\r\n//   }\r\n// }\r\n.text-canvas {\r\n  stroke-width: 0;\r\n  fill-opacity: 0;\r\n  stroke: black;\r\n  &.active {\r\n    stroke-width: 1px;\r\n     &.activate {\r\n        stroke: orange;\r\n      }\r\n  }\r\n}\r\n\r\n</style>\r\n","\r\n/* eslint-disable */\r\n\r\nimport { Vue } from \"vue-class-component\"\r\nimport { CloudManager } from \"@/assets/cloud\"\r\nimport { Dataset, Mode, Style, Word } from '@/assets/types'\r\nimport * as ColorPreset from \"@/assets/color-preset\"\r\nimport * as d3 from \"d3-fetch\"\r\n\r\n\r\nexport default class ShakingView extends Vue {\r\n  public wordleData: Word[] = []\r\n  public collection: Dataset[] = []\r\n  public fileReader = new FileReader()\r\n  public uploadFilename: string = \"\"\r\n  public animationModes: Array<Mode> = [Mode.bubble, Mode.colorful, Mode.chill, Mode.glisten, Mode.electric]\r\n  public animationMode: Mode = Mode.bubble\r\n  public fontFamily = 'NotoSans'\r\n  public fontStyle = 'normal'\r\n  public fontWeight = 'normal'\r\n  public colorSchemes = ['red', 'black', 'Viridis', 'Plasma', 'rainbow']\r\n  public colorScheme = 'red'\r\n  public easeTypes = ['Cubic', 'ElasticIn', 'ElasticOut', 'BounceIn', 'BounceOut', 'BounceInOut']\r\n  public easeType = 'ElasticIn'\r\n  public strokeWidth = '2px'\r\n  public rotation: number = 0\r\n  public duration: number = 10000\r\n  public cloudManager: CloudManager | undefined\r\n  public customColor = \"#000000\"\r\n  public presetColors = ColorPreset.rainbow\r\n  public bgAnimator: any\r\n  get styleScheme ():Style {\r\n    return {\r\n      colorScheme: this.colorScheme,\r\n      fontStyle: this.fontStyle,\r\n      fontWeight: this.fontWeight,\r\n      fontFamily: this.fontFamily,\r\n      strokeWidth: this.strokeWidth,\r\n      rotation: this.rotation,\r\n      height: 520,\r\n      width: 800\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    let url = './dataset/layout/layout_xmas.json'\r\n    d3.json(url).then((d: any) => {\r\n        this.wordleData = d as Word[]\r\n        this.cloudManager = new CloudManager(this.wordleData, \r\n                                            this.styleScheme, \r\n                                            this.animationMode,\r\n                                            'emotional-wordle-svg',\r\n                                            'emotional-wordle-canvas',\r\n                                            this.bgAnimator,\r\n                                            true,\r\n                                            false,\r\n                                            this.duration\r\n                                            )\r\n      this.cloudManager.animator?.createGif()                 \r\n      this.cloudManager.animator?.play()\r\n      }, (err: any) => {\r\n      console.log(err)\r\n    })\r\n    \r\n  }\r\n}\r\n\r\n","import { render } from \"./Shaking.vue?vue&type=template&id=62e83a68&scoped=true\"\nimport script from \"./Shaking.vue?vue&type=script&lang=ts\"\nexport * from \"./Shaking.vue?vue&type=script&lang=ts\"\n\nimport \"./Shaking.vue?vue&type=style&index=0&id=62e83a68&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-62e83a68\"\n\nexport default script","/* eslint-disable */\r\n/**\r\n * doc comment for cloud.ts\r\n * control the layout for words based on their size and font\r\n * @packageDocumentation\r\n */\r\nimport cloudGenerator from 'd3-cloud'\r\nimport * as scale from 'd3-scale'\r\nimport { PlotHandler } from './plot'\r\nimport { WordleAnimator } from './animator'\r\nimport { Word, Style, Mode } from \"@/assets/types\"\r\n\r\nclass CloudManager {\r\n    public canvasHandler: PlotHandler\r\n    // public animator: Animator | undefined\r\n    public animator: WordleAnimator | undefined\r\n    constructor(data: Word[],\r\n                styleSheet: Style,\r\n                mode: Mode = Mode.bubble,\r\n                svgid: string = 'emotional-wordle-svg', \r\n                canvasid: string = 'emotional-wordle-canvas',\r\n                bgAnimator: Generator<any, void, any>,\r\n                loadCanvasFlag: boolean = true,\r\n                loadSvgFlag: boolean = true,\r\n                duration: number = 2000\r\n                ) {\r\n        this.canvasHandler = new PlotHandler(canvasid, svgid, styleSheet, loadCanvasFlag)\r\n        let self = this\r\n        // console.log(data, 'cloud data')\r\n        if(loadCanvasFlag) {\r\n            self.animator = new WordleAnimator({\r\n                data: assignColor(data), \r\n                plotHandler: self.canvasHandler, \r\n                duration: duration\r\n            })\r\n            // self.animator = new Animator(data, self.canvasHandler, duration, bgAnimator)\r\n            // self.animator.play()\r\n        }\r\n        else if (loadSvgFlag) {\r\n            testCloud(data, styleSheet)\r\n            .on('end', function (words: cloudGenerator.Word[]) {\r\n                let finalData = words as Word[]\r\n                  self.canvasHandler.plotOnSvgWithConfig(finalData)\r\n            })\r\n        }\r\n    }\r\n    public play(duration: number=2000) {\r\n        if (!this.animator) return\r\n        this.animator!.update('duration', duration)\r\n        this.animator!.stop()\r\n        this.animator!.play()\r\n        return this\r\n    }\r\n    public stop() {\r\n        this.animator!.stop()\r\n        return this\r\n    }\r\n    public updateMode(mode: Mode) {\r\n        this.animator!.update('mode', mode)\r\n    }\r\n}\r\nlet testCloud = function (data: Word[], styleSheet: Style) {\r\n    let width = styleSheet.width\r\n    let height = styleSheet.height\r\n    let wordScale = scale.scaleLinear()\r\n        .domain([0, 75])  // !!!!!!!!!!!!!!!!!!!!!!!\r\n        .range([10, 120]) // !!!!!!!!!!!!!!!!!!!!!!!\r\n    return cloudGenerator()\r\n        .size([width, height])\r\n        .timeInterval(200)\r\n        .words(data)\r\n        .rotate(styleSheet.rotation!) //function(d) { return 0 }\r\n        .fontSize((d: cloudGenerator.Word, idx: number) => {\r\n            let word = d as Word\r\n            return wordScale(word.frequency)\r\n        })\r\n        .font(styleSheet.fontFamily!)\r\n        .fontStyle(styleSheet.fontStyle!)\r\n        .fontWeight(styleSheet.fontWeight!)\r\n        .text((d: cloudGenerator.Word, idx: number)=> {\r\n            return d.text || ''\r\n        })\r\n        .spiral(styleSheet.spiralType!) // 'archimedean' or 'rectangular'\r\n        .start()\r\n}\r\n\r\nfunction assignColor(words: Word[]) {\r\n    words.forEach((word: Word, idx: number) => {\r\n        word.color = 'black'\r\n    })\r\n    return words\r\n}\r\n\r\nexport {\r\n    CloudManager\r\n}\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Shaking.vue?vue&type=style&index=0&id=62e83a68&lang=scss&scoped=true\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","import {tpmt} from \"./math.js\";\n\nexport function expIn(t) {\n  return tpmt(1 - +t);\n}\n\nexport function expOut(t) {\n  return 1 - tpmt(t);\n}\n\nexport function expInOut(t) {\n  return ((t *= 2) <= 1 ? tpmt(1 - t) : 2 - tpmt(t - 1)) / 2;\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","/* eslint-disable */\r\n/**\r\n * doc comment for manual.ts\r\n * @remarks \r\n * Manual attempts for animation effects.\r\n * @packageDocumentation\r\n */\r\n\r\nimport * as Color from \"@/assets/color-preset\"\r\nimport { GroupManager, KeyFrame } from \"@/assets/animator\"\r\nimport { KeyframeConfig } from \"@/assets/types\"\r\nimport * as d3Ease from \"d3-ease\"\r\n\r\nexport let colorTransition = function () {\r\n     let keyframes = [] as Array<KeyFrame>\r\n     let colors = Color.calm;\r\n     colors.forEach((c, idx) => {\r\n        keyframes.push(new KeyFrame({\r\n            'color': c,\r\n            'stage': Math.ceil((idx) * 100/(colors.length-1))\r\n        }))\r\n     })\r\n     return keyframes\r\n}\r\n\r\n// I found it only works as a function or there will be import error\r\nexport let coloredShake = () => [\r\n        new KeyFrame({ xoff: -1, yoff: -1, color: 'red', stage: 0 }),\r\n        new KeyFrame({ xoff: 0, yoff: 0, color: 'yellow', stage: 20 }),\r\n        new KeyFrame({ xoff: -1, yoff: 1, color: 'blue', stage: 60 }),\r\n        new KeyFrame({ xoff: 0, yoff: 0, color: 'grey', stage: 80 }),\r\n        new KeyFrame({ xoff: 1, yoff: 1, color: 'green', stage: 100 })\r\n        // new KeyFrame({ xoff: -1, yoff: 1 }),\r\n        // new KeyFrame({ xoff: -1, yoff: -1 }),\r\n        // new KeyFrame({ xoff: 1, yoff: -1 }),\r\n        // new KeyFrame({ xoff: 0, yoff: 1 }),\r\n    ]\r\n\r\nexport let smallShake = () => [\r\n        new KeyFrame({ xoff: 0, yoff: 0, stage: 0 }),\r\n        new KeyFrame({ xoff: 0.5, yoff: 0.5, stage: 5 }),\r\n        new KeyFrame({ xoff: 0, yoff: 0, stage: 10 }),\r\n        new KeyFrame({ xoff: -0.5, yoff: 0, stage: 15 }),\r\n        new KeyFrame({ xoff: 0, yoff: 0, stage: 20 }),\r\n        new KeyFrame({ xoff: 0.5, yoff: -0.5, stage: 25 }),\r\n        new KeyFrame({ xoff: 1, yoff: 0, stage: 100 })\r\n    ]\r\n\r\nexport let shakeNRotate = () => [\r\n        new KeyFrame({ xoff: 1, yoff: 0, rotate: 5, stage: 0 }),\r\n        new KeyFrame({ xoff: 1, yoff: 0 , rotate: 5, stage: 10}),\r\n        new KeyFrame({ xoff: 0, yoff: 0, rotate: -5, stage: 20 }),\r\n        new KeyFrame({ xoff: -1, yoff: 1, rotate: 5, stage: 30 }),\r\n        new KeyFrame({ xoff: -1, yoff: 0, rotate: -5, stage: 40 }),\r\n        new KeyFrame({ xoff: 0, yoff: 0, rotate: -5, stage: 50 }),\r\n        new KeyFrame({ xoff: -1, yoff: -1, rotate: 5, stage: 60 }),\r\n        new KeyFrame({ xoff: 0, yoff: 0, rotate: -5, stage: 100 })\r\n    ]\r\n\r\nexport let scale = () => [\r\n        new KeyFrame({ scale: 0.5 }),\r\n        new KeyFrame({ scale: 1.5 }),\r\n        new KeyFrame({ scale: 1.0 })\r\n]\r\n\r\nexport let xmas = () =>   [\r\n    new KeyFrame({ xoff: -1, yoff: -1, color: '#FF000000', stage: 0}),\r\n    new KeyFrame({ xoff: -1, yoff: 1, color: '#FF0000', stage: 10}),\r\n    new KeyFrame({ xoff: 1, yoff: 1, color: '#FF0000', stage: 20}),\r\n    new KeyFrame({ xoff: 2, yoff: 2, color: 'white', stage: 30}),\r\n    new KeyFrame({ xoff: 1, yoff: -2, color: 'white', stage: 40}),\r\n    new KeyFrame({ xoff: -1, yoff: -2, color: '#FF8F39', stage: 50}),\r\n    new KeyFrame({ xoff: 3, yoff: -3, color: '#FF8F39', stage: 60}),\r\n    new KeyFrame({ xoff: 2, yoff: 2, color: 'red', stage: 70}),\r\n    new KeyFrame({ xoff: 1, yoff: 1, color: 'red', stage: 80}),\r\n    new KeyFrame({ xoff: -1, yoff: -1, color: '#FF8F39', stage: 90}),\r\n    new KeyFrame({ xoff: 1, yoff: 0, color: '#FF8F39', stage: 100})\r\n]\r\n\r\nexport let split = function () {\r\n    \r\n}\r\n\r\nexport let hardCodeGroups = function () {\r\n     let groupManager: GroupManager[] = [\r\n            new GroupManager({\r\n                duration: 500,\r\n                keyFrames: xmas()\r\n            }),\r\n        ]\r\n        // hasty?\r\n        // let groupManager: GroupManager[] = [\r\n        //     new GroupManager({\r\n        //         duration: 2000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100, color: 'red'}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2100,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2200,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2300,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2400,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2500,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2600,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2700,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ xoff: 0, stage: 0}),\r\n        //             new KeyFrame({ xoff: 1000, stage: 100}),\r\n\r\n        //         ],\r\n        //     }),\r\n        // ]\r\n        // bubbly effect\r\n        // let groupManager: GroupManager[] = [\r\n        //     new GroupManager({\r\n        //         duration: 3000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ scale: 0.5, stage: 0, color: 'gold' }),\r\n        //             new KeyFrame({ scale: 1.25, stage: 100, color: 'red' }),\r\n\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 4000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ scale: 0.5, stage: 0, color: 'red' }),\r\n        //             new KeyFrame({ scale: 1.125, stage: 100, color: 'green' }),\r\n\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 3500,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({ scale: 0.5, stage: 0, color: 'green' }),\r\n        //             new KeyFrame({ scale: 1.3, stage: 100, color: 'gold' }),\r\n\r\n        //         ]\r\n        //     }),\r\n        // ] \r\n        // fly away        \r\n        // let groupManager: GroupManager[] = [\r\n        //     new GroupManager({\r\n        //         duration: 3000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({rotate: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 200, yoff: -200, scale: 0, rotate: 720, stage: 100}),\r\n\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({rotate: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 200, yoff: -200, scale: 0, rotate: 720, stage: 100}),\r\n\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2100,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({rotate: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 200, yoff: -200, scale: 0, rotate: 720, stage: 100}),\r\n\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         duration: 2400,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({rotate: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 200, yoff: -200, scale: 0, rotate: 720, stage: 100}),\r\n\r\n        //         ]\r\n        //     })\r\n        // ]\r\n        // slide away\r\n        //  let groupManager: GroupManager[] = [\r\n        //     new GroupManager({\r\n        //         duration: 3000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 1500, scale: 0, stage: 100, color: '#C1C1C1'}),\r\n\r\n        //         ]\r\n        //     }),\r\n        // ]\r\n        // inception style?\r\n        //  let groupManager: GroupManager[] = [\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 3000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 2250,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 2000,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 2500,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 2600,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 2400,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        //     new GroupManager({\r\n        //         ease: d3Ease.easeLinear,\r\n        //         duration: 2700,\r\n        //         keyFrames: [\r\n        //             new KeyFrame({xoff: 0, stage: 0}),\r\n        //             new KeyFrame({xoff: 0, scale: 0, stage: 100}),\r\n        //         ]\r\n        //     }),\r\n        // ]\r\n        // rotation with colorization\r\n        // let groupManager: GroupManager[] = [\r\n        //         new GroupManager({\r\n        //             ease: d3Ease.easeSin,\r\n        //             duration: 3000,\r\n        //             keyFrames: [\r\n        //                 new KeyFrame({xoff: 0, stage: 0}),\r\n        //                 new KeyFrame({xoff: 0, rotate: 720, color:'#0CB04A', stage: 100}),\r\n        //             ]\r\n        //         }),\r\n        //         new GroupManager({\r\n        //             ease: d3Ease.easeCircle,\r\n        //             duration: 3000,\r\n        //             keyFrames: [\r\n        //                 new KeyFrame({xoff: 0, stage: 0}),\r\n        //                 new KeyFrame({xoff: 0, rotate: 360, color:'#0A7533', stage: 100}),\r\n        //             ]\r\n        //         }),\r\n        //         new GroupManager({\r\n        //             ease: d3Ease.easeCubic,\r\n        //             duration: 3000,\r\n        //             keyFrames: [\r\n        //                 new KeyFrame({xoff: 0, stage: 0}),\r\n        //                 new KeyFrame({xoff: 0, rotate: 1080, color: '#FF3A2F', stage: 100}),\r\n        //             ]\r\n        //         }),\r\n        //         new GroupManager({\r\n        //             ease: d3Ease.easePoly,\r\n        //             duration: 3000,\r\n        //             keyFrames: [\r\n        //                 new KeyFrame({xoff: 0, stage: 0}),\r\n        //                 new KeyFrame({xoff: 0, rotate: 1440, color: '#A92921', stage: 100}),\r\n        //             ]\r\n        //         }),\r\n        //     ]\r\n    return groupManager\r\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","/* eslint-disable */\r\n\r\nimport { KeyFrame } from \"./animator\";\r\nimport * as Manual from \"@/assets/manual\";\r\nimport { Mode } from \"@/assets/types\"\r\nimport { FontConfig } from \"@/assets/variable-font\"\r\n\r\nconst minNumGroup = 1;\r\nconst sampleFont = new FontConfig()\r\nconst sampleItalic = sampleFont.italicRange\r\nconst sampleWeight = sampleFont.weightRange\r\nconst sampleItalicInterval = sampleItalic[1] - sampleItalic[0]\r\nconst sampleWeightInterval = sampleWeight[1] - sampleWeight[0]\r\nconst sampleItalicMid = ( sampleItalic[1] + sampleItalic[0] ) / 2\r\nconst sampleWeightMid = ( sampleWeight[1] + sampleWeight[0] ) / 2\r\n\r\nclass KeyFrameHandler {\r\n    public getKeyFrames(mode: Mode, wordLength: number, speed: number, entropy: number, alpha=0) {\r\n        let keyFrames = [] as KeyFrame[][];\r\n        if (mode == Mode.dance) {\r\n            keyFrames = this.getDiscoKeyFrames(wordLength, speed, entropy);\r\n        } else if (mode == Mode.split) {\r\n            keyFrames = this.getSplitKeyframes(wordLength, speed, entropy, alpha)\r\n        } else if (mode == Mode.swing) {\r\n            keyFrames = this.getSwingingKeyFrames(wordLength, speed, entropy)\r\n        }\r\n        else {\r\n            keyFrames = [Manual.colorTransition()];\r\n        }\r\n        return keyFrames;\r\n    }\r\n\r\n    private getSwingingKeyFrames(wordLength: number, speed: number, entropy: number) {\r\n        let keyFrames = [] as KeyFrame[][];\r\n        const maxNumGroup =  Math.floor(wordLength * 0.9);\r\n        let numGroup = Math.max(1, entropy * maxNumGroup)\r\n        for (let index = 0; index < numGroup; index++) {\r\n            let groupKeyFrames = [] as KeyFrame[]\r\n            const italicDelta = sampleItalicInterval * ( entropy * 0.5 + Math.random() * 0.1 + 0.4 )\r\n            const weightDelta = sampleWeightInterval * ( entropy * 0.5 + Math.random() * 0.1 + 0.4 )\r\n            const italicRange = [sampleItalicMid - italicDelta, sampleItalicMid + italicDelta]\r\n            const weightRange = [sampleWeightMid - weightDelta * 0.2, sampleWeightMid + weightDelta]\r\n            let fontMid = new FontConfig()\r\n            fontMid.update({italic: sampleItalicMid, weight: sampleWeightMid})\r\n            let fontStart = new FontConfig()\r\n            fontStart.update({italic: italicRange[0], weight:weightRange[0]})\r\n            let fontEnd = new FontConfig()\r\n            fontEnd.update({italic: italicRange[1], weight: weightRange[1]})\r\n            let fontWideMid = new FontConfig()\r\n            fontWideMid.update({italic: sampleItalicMid, weight: weightRange[1]})\r\n            let fontWideStart = new FontConfig()\r\n            fontWideStart.update({ italic: italicRange[0], weight: weightRange[0] })\r\n \r\n            let animation = [] as KeyFrame[]\r\n            let backupFrames = [\r\n                new KeyFrame({font: fontEnd}),\r\n                new KeyFrame({font: fontEnd}),\r\n                new KeyFrame({font: fontWideMid, xoff: -1}),\r\n                new KeyFrame({font: fontWideStart, xoff: -4}),\r\n                // new KeyFrame({font: fontStart }),\r\n                new KeyFrame({font: fontWideMid, yoff: Math.random()>0.5?-2:2}),\r\n                new KeyFrame({font: fontEnd}),\r\n                new KeyFrame({font: fontEnd}),\r\n            ]\r\n            for(let it = 0; it < Math.max(1, Math.floor(Math.random()*3)); it ++) {\r\n                for(let fid = 0; fid < backupFrames.length; fid ++) {\r\n                    if(Math.random() > 0.2) {\r\n                        animation.push(backupFrames[fid])\r\n                    }\r\n                }\r\n            }\r\n            const iter = 10 * speed;\r\n            const al = animation.length;\r\n            const tl = al * iter - 1;\r\n            if(iter == 0) {\r\n                groupKeyFrames.push(...[\r\n                    new KeyFrame({stage: 0}),\r\n                    new KeyFrame({stage: 100}),\r\n                ])\r\n            }\r\n            for (let i = 0; i < iter; i++) {\r\n                animation.forEach((move, idx) => {\r\n                    const stage = Math.ceil((100 / tl) * (idx + i * al));\r\n                    groupKeyFrames.push({...move, stage: stage});\r\n                });\r\n            }\r\n\r\n            keyFrames.push(groupKeyFrames)\r\n        }\r\n        return keyFrames\r\n    }\r\n\r\n\r\n\r\n\r\n    private getSplitKeyframes(wordLength: number, speed: number, entropy: number, alpha: number) {\r\n        let keyFrames = [] as KeyFrame[][];\r\n        let maxNumGroup =  Math.floor(wordLength * 0.9);\r\n        let numGroup = Math.max(minNumGroup, Math.floor(entropy * maxNumGroup))\r\n        for (let index = 0; index < numGroup; index++) {\r\n            const groupKf = [] as KeyFrame[]\r\n            const theta = alpha + index * 2 * Math.PI / numGroup \r\n            const dis = Math.random() * 4 + 2 + entropy * 18\r\n          //  console.log(theta/(2*Math.PI), numGroup,  dis * Math.cos(theta), dis * Math.sin(theta))\r\n            const iter = Math.floor(10 * speed)\r\n            const _move_left = new KeyFrame({ xoff: 3*dis/5 * Math.cos(theta+ Math.PI/7), yoff: 3*dis/5 * Math.sin(theta+Math.PI/7), rotate: 0});\r\n            const _move_right = new KeyFrame({ xoff: 4*dis/5 * Math.cos(theta - Math.PI/8), yoff: 4*dis/5 * Math.sin(theta+Math.PI/8), rotate: 0});\r\n            const _move = new KeyFrame({ xoff: dis * Math.cos(theta), yoff: dis * Math.sin(theta), rotate: 0});\r\n            const _center = new KeyFrame({ xoff: 0, yoff: 0, rotate: 0 });\r\n            const _rotate = new KeyFrame({ rotate: (theta-Math.PI/4)})\r\n            const _neg_rotate = new KeyFrame({ rotate: (-theta+Math.PI/4)})\r\n            const animation = [\r\n                _center,\r\n                // _move_left,\r\n                // _move_right,\r\n                _move,\r\n                _rotate,\r\n                _rotate,\r\n                _neg_rotate,\r\n                _move,\r\n                _move,\r\n                _move,\r\n                _move,\r\n                // _move_right,\r\n                // _move_left,\r\n                _center,\r\n            ]\r\n            const al = animation.length;\r\n            const tl = al * iter - 1;\r\n            if(iter == 0) {\r\n                groupKf.push(...[\r\n                    new KeyFrame({stage: 0}),\r\n                    new KeyFrame({stage: 100}),\r\n                ])\r\n            }\r\n            for (let i = 0; i < iter; i++) {\r\n                animation.forEach((move, idx) => {\r\n                    const stage = Math.ceil((100 / tl) * (idx + i * al));\r\n                    groupKf.push({...move, stage: stage});\r\n                });\r\n            }\r\n            keyFrames.push(groupKf);\r\n        }\r\n        return keyFrames;\r\n    }\r\n    private getDiscoKeyFrames(wordLength: number, speed: number, entropy: number): KeyFrame[][] {\r\n        const keyFrames = [];\r\n        const maxNumGroup =  10;\r\n        const numGroup = Math.min(wordLength, Math.trunc((maxNumGroup - minNumGroup) * entropy + minNumGroup));\r\n        // const minNumStage = 10;\r\n        // const maxNumStage = 100;\r\n        // const numStage = (maxNumStage - minNumStage) * speed + minNumStage; // at least\r\n        // const steps = 100 / numStage;\r\n        for (let index = 0; index < numGroup; index++) {\r\n            const groupKf = [] as KeyFrame[];\r\n            const randXD = Math.round(Math.random()) * 2 - 1;\r\n            const move = new KeyFrame({ xoff: randXD * (  entropy * 3) });\r\n            const center = new KeyFrame({ xoff: 0, yoff: 0 });\r\n            const randY = Math.random() * 2.0;\r\n            const jump = new KeyFrame({yoff: -randY * (speed + entropy + 1)});\r\n            const animation = [\r\n                move,\r\n                center,\r\n                move,\r\n                jump\r\n            ]\r\n            const iter = 10 * speed;\r\n            const al = animation.length;\r\n            const tl = al * iter - 1;\r\n            if(iter == 0) {\r\n                groupKf.push(...[\r\n                    new KeyFrame({stage: 0}),\r\n                    new KeyFrame({stage: 100}),\r\n                ])\r\n            }\r\n            for (let i = 0; i < iter; i++) {\r\n                animation.forEach((move, idx) => {\r\n                    const stage = Math.ceil((100 / tl) * (idx + i * al));\r\n                    groupKf.push({...move, stage: stage});\r\n                });\r\n            }\r\n            // for (let j = 0; j < numStage + 1; j++) {\r\n            //     const stage = Math.trunc(j * steps);\r\n            //     let kf: KeyFrame;\r\n                // if(j % 2 == 0) { \r\n                //     kf = new KeyFrame({xoff: 0, yoff: 0, stage: stage});\r\n                // } else {\r\n                //     const randxd = Math.round(Math.random()) * 2 - 1;\r\n                //     const randyd = Math.round(Math.random()) * 2 - 1;\r\n                //     const randrd = Math.round(Math.random()) * 2 - 1;\r\n                //     const randx = parseFloat((Math.random() + entropy * 3).toFixed(2));\r\n                //     const randy = parseFloat((Math.random() + entropy * 3).toFixed(2));\r\n                //     const randr = parseFloat((Math.random()).toFixed(2));\r\n                //     kf = new KeyFrame({ xoff: randxd * randx, yoff: randyd * randy, rotate: randrd * randr, stage: stage });\r\n                // }\r\n                // 1. left -> left -> jump\r\n                // left\r\n\r\n                // jump\r\n                // groupKf.push(kf);\r\n            // }\r\n            keyFrames.push(groupKf);\r\n        }\r\n        return keyFrames;\r\n    }\r\n}\r\n\r\nlet shuffle = function <T>(array: T[]) {\r\n    let currIdx = array.length, tempVal, randIdx\r\n    while (0 != currIdx) {\r\n        randIdx = Math.floor(Math.random() * currIdx)\r\n        currIdx -= 1\r\n        tempVal = array[currIdx]\r\n        array[currIdx] = array[randIdx]\r\n        array[randIdx] = tempVal\r\n    }\r\n    return array\r\n}\r\n\r\nexport { KeyFrameHandler }","/* eslint-disable */\r\n/**\r\n * doc comment for jump.ts\r\n * @remarks \r\n * It is working in progress. It trys to tune the webgl program more subtlely.\r\n * @packageDocumentation\r\n */\r\n\r\n\r\n// Reads out a .ttf and triangulates the glyphs using OpenType and Earcut.\r\n// Code made By riv -> https://stackoverflow.com/questions/50554803/triangulate-path-data-from-opentype-js-using-earcut/50581183#50581183\r\n// Original here -> https://jsbin.com/gecakub/edit?html,js,output\r\n\r\n// 1. Reads Bezier curves from `.tff` font file using OpenType.js.\r\n// 2. Converts Bezier curves into closed shapes and sort them by descending area.\r\n// 3. Determines the indices for the holes by figuring out which shapes are inside other shapes.\r\n// 4. Send all points to Earcut with the holes indices as a second parameter.\r\n// 5. Uses earcut's result as indices for the geometry.\r\n// 6. Then, render triangles with webGL.\r\n\r\n\r\nimport opentype from \"opentype.js\"\r\nimport earcut from \"earcut\"\r\nimport { createShader, createProgram } from \"./gl-helper\"\r\n// import { polygonCentroid } from \"d3\"\r\nimport { Word } from './types'\r\n\r\ninterface P {\r\n  x: number,\r\n  y: number\r\n}\r\n\r\n\r\nconst FONTURL = \"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf\"\r\nlet time: any = null\r\nlet pace = 80.0\r\n\r\nfunction distance(p1: P, p2: P) {\r\n  const dx = p1.x - p2.x,\r\n    dy = p1.y - p2.y\r\n  return Math.sqrt(dx * dx + dy * dy)\r\n}\r\n\r\nfunction lerp(p1: P, p2: P, t: number) {\r\n  return { x: (1 - t) * p1.x + t * p2.x, y: (1 - t) * p1.y + t * p2.y }\r\n}\r\n\r\nfunction cross(p1: P, p2: P) {\r\n  return p1.x * p2.y - p1.y * p2.x\r\n}\r\n\r\n// bezier discretization\r\nconst MAX_BEZIER_STEPS = 10\r\nconst BEZIER_STEP_SIZE = 3.0\r\n// this is for inside checks - doesn't have to be particularly\r\n// small because glyphs have finite resolution\r\nconst EPSILON = 1e-6\r\n\r\nlet gl: any\r\nlet indices: any\r\n// class for converting path commands into point data\r\nclass Polygon {\r\n  public points: Array<P> = []\r\n  public children: Polygon[] = []\r\n  public area: any = 0.0\r\n\r\n  moveTo(p:P) {\r\n    this.points.push(p)\r\n  }\r\n\r\n  lineTo(p:P) {\r\n    this.points.push(p)\r\n  }\r\n  close() {\r\n    let cur = this.points[this.points.length - 1]\r\n    this.points.forEach(next => {\r\n      this.area += 0.5 * cross(cur, next)\r\n      cur = next\r\n    })\r\n  }\r\n  conicTo(p: P, p1: P) {\r\n    const p0 = this.points[this.points.length - 1]\r\n    const dist = distance(p0, p1) + distance(p1, p)\r\n    const steps = Math.max(\r\n      2,\r\n      Math.min(MAX_BEZIER_STEPS, dist / BEZIER_STEP_SIZE)\r\n    )\r\n    for (let i = 1; i <= steps; ++i) {\r\n      const t = i / steps\r\n      this.points.push(lerp(lerp(p0, p1, t), lerp(p1, p, t), t))\r\n    }\r\n  }\r\n  cubicTo(p: P, p1: P, p2: P) {\r\n    const p0 = this.points[this.points.length - 1]\r\n    const dist = distance(p0, p1) + distance(p1, p2) + distance(p2, p)\r\n    const steps = Math.max(\r\n      2,\r\n      Math.min(MAX_BEZIER_STEPS, dist / BEZIER_STEP_SIZE)\r\n    )\r\n    for (let i = 1; i <= steps; ++i) {\r\n      const t = i / steps\r\n      const a = lerp(lerp(p0, p1, t), lerp(p1, p2, t), t)\r\n      const b = lerp(lerp(p1, p2, t), lerp(p2, p, t), t)\r\n      this.points.push(lerp(a, b, t))\r\n    }\r\n  }\r\n\r\n  inside(p: P) {\r\n    let count = 0,\r\n      cur = this.points[this.points.length - 1]\r\n    this.points.forEach(next => {\r\n      const p0 = cur.y < next.y ? cur : next\r\n      const p1 = cur.y < next.y ? next : cur\r\n      if (p0.y < p.y + EPSILON && p1.y > p.y + EPSILON) {\r\n        if ((p1.x - p0.x) * (p.y - p0.y) > (p.x - p0.x) * (p1.y - p0.y)) {\r\n          count += 1\r\n        }\r\n      }\r\n      cur = next\r\n    })\r\n    return count % 2 !== 0\r\n  }\r\n}\r\n\r\nfunction tick(t: number) {\r\n  gl.uniform1f(time, t / pace)\r\n  gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0)\r\n  requestAnimationFrame(tick)\r\n}\r\n\r\nlet getRoots = function (polys: Polygon[]) {\r\n     // classify contours to find holes and their 'parents'\r\n     const root = []\r\n     for (let i = 0; i < polys.length; ++i) {\r\n         let parent = null\r\n         for (let j = i - 1; j >= 0; --j) {\r\n             // a contour is a hole if it is inside its parent and has different winding\r\n             if (\r\n             polys[j].inside(polys[i].points[0]) &&\r\n             polys[i].area * polys[j].area < 0\r\n             ) {\r\n                 parent = polys[j]\r\n                 break\r\n             }\r\n     }\r\n     if (parent) {\r\n             parent.children.push(polys[i])\r\n         } else {\r\n             root.push(polys[i])\r\n         }\r\n     }\r\n     return root\r\n}\r\n\r\nlet getPolys = function (font: opentype.Font, x=0, y=0, s=12, text=\"Hello World\") {\r\n    // create path\r\n    const path = font.getPath(text, x, y, s)\r\n    // create a list of closed contours\r\n    const polys: Polygon[] = []\r\n    path.commands.forEach(({ type, x, y, x1, y1, x2, y2 }: any) => {\r\n    switch (type) {\r\n        case \"M\":\r\n        polys.push(new Polygon())\r\n        polys[polys.length - 1].moveTo({ x, y })\r\n        break\r\n        case \"L\":\r\n        polys[polys.length - 1].moveTo({ x, y })\r\n        break\r\n        case \"C\":\r\n        polys[polys.length - 1].cubicTo(\r\n            { x, y },\r\n            { x: x1, y: y1 },\r\n            { x: x2, y: y2 }\r\n        )\r\n        break\r\n        case \"Q\":\r\n        polys[polys.length - 1].conicTo({ x, y }, { x: x1, y: y1 })\r\n        break\r\n        case \"Z\":\r\n        polys[polys.length - 1].close()\r\n        break\r\n        }\r\n    })\r\n    // sort contours by descending area\r\n    polys.sort((a, b) => Math.abs(b.area) - Math.abs(a.area))\r\n    return polys\r\n}\r\n\r\nlet getVertexData = function (root: Polygon[], polys: Polygon[]) {\r\n    const totalPoints = polys.reduce((sum: number, p: Polygon) => sum + p.points.length, 0)\r\n    const vertexData = new Float32Array(totalPoints * 2)\r\n    let vertexCount = 0\r\n    indices = []\r\n    let process = function(poly: Polygon) {\r\n    // construct input for earcut\r\n        const coords: number[] = []\r\n        const holes: number[] = []\r\n        poly.points.forEach(({ x, y }) => coords.push(x, y))\r\n        poly.children.forEach(child => {\r\n            // children's children are new, separate shapes\r\n            child.children.forEach(process)\r\n            holes.push(coords.length / 2)\r\n            child.points.forEach(({ x, y }) => coords.push(x, y))\r\n        })\r\n        // add vertex data\r\n        vertexData.set(coords, vertexCount * 2)\r\n        // add index data\r\n        earcut(coords, holes).forEach(i => indices.push(i + vertexCount))\r\n        vertexCount += coords.length / 2\r\n    }\r\n    root.forEach(process)\r\n    return [vertexData, indices]\r\n}\r\n\r\nlet draw = function (font: opentype.Font, words: Word[] = [], statement: string=defaultvs) {\r\n    let canvas = document.getElementById(\"emordle-canvas\") as HTMLCanvasElement\r\n    const width = canvas.width\r\n    const height = canvas.height\r\n    let polyAll: Polygon[] = []\r\n    for (let word of words) {\r\n        let polys = getPolys(font, word.x! - word.width! / 2, word.y, word.size, word.text)\r\n        polyAll = polyAll.concat(polys)\r\n    }\r\n    let root = getRoots(polyAll)\r\n    let [vertexData, indices] = getVertexData(root, polyAll)\r\n    drawOnCanvas(vertexData, indices, statement)\r\n}\r\n\r\nconst defaultvs = ` pos.y += pow(sin( (pos.x) / 500.+ uTime *.02),2.) * 20.;\r\npos.x += sin( pos.y/ 100. + uTime *.8) * .5;\r\n`\r\n\r\nconst staticvs = ` pos.y = pos.y;\r\npos.x = pos.x;\r\n`\r\n\r\nlet vsGenerator = function (speed: number, entropy: number) {\r\n  if (speed == 0) return staticvs\r\n  const waveletNum = Math.max(1, Math.floor(entropy * 10))\r\n  const timeGran = Number((0.01 + speed * 0.3)).toFixed(3)\r\n  const yAmplitude = Number(15.1 + 9.9 * entropy).toFixed(3)\r\n  const yExtent = Number(10.1 + (1.05 - entropy) * 359.9).toFixed(3)\r\n  const xExtent = Number(50.1 + (1.05 - entropy) * 150.1).toFixed(3)\r\n  const xAmplitude = Number(0.02 + 0.58 * entropy).toFixed(3)\r\n  let xPosStr = `sin( pos.y / ${xExtent} + uTime * ${timeGran}) * ${xAmplitude}`\r\n  let yPosStr = `pow(sin( (pos.x) / ${yExtent} + uTime * ${timeGran}), 2.) * ${yAmplitude}`\r\n  let result = `\r\n  pos.x += ${xPosStr};\r\n  pos.y += ${yPosStr};\r\n  `\r\n  return result\r\n  //return defaultvs\r\n}\r\n\r\nlet drawOnCanvas = function (vertexData: Float32Array, indices: Uint16Array, statement: string=defaultvs) {\r\n    const canvas = document.getElementById(\"emordle-canvas\") as HTMLCanvasElement\r\n    gl = canvas.getContext(\"webgl\")\r\n    const width = canvas.width\r\n    const height = canvas.height\r\n    gl.viewport(0, 0, width, height)\r\n    const vs = createShader(gl, gl.VERTEX_SHADER, `\r\n      precision mediump float;\r\n      uniform vec2 uScale;\r\n      uniform vec2 uOffset;\r\n      uniform float uTime;\r\n      attribute vec2 position;\r\n      varying vec4 fragColor;\r\n      void main() {\r\n      vec2 pos = position;\r\n      ${statement}\r\n      gl_Position = vec4(pos * uScale + uOffset, 0.0, 1.0);\r\n      fragColor = vec4(0., 0., 0., 1.);// vec4(sin(uTime*.5)*.5+.5, cos(uTime*.2)*.5+.5, 0., 1. ); // colorful\r\n    }`)\r\n    const ps = createShader(gl, gl.FRAGMENT_SHADER,\r\n        `precision mediump float;\r\n        uniform vec4 uColor;\r\n        uniform vec2 u_resolution;\r\n        varying vec4 fragColor;\r\n        void main() {\r\n        gl_FragColor = uColor;\r\n        vec2 st = gl_FragCoord.xy / u_resolution;\r\n        gl_FragColor = fragColor;\r\n        }`)\r\n    const prog = createProgram(gl, vs, ps)\r\n    gl.bindAttribLocation(prog, 0, \"position\")\r\n    const [uScale, uOffset, uColor, uTime, u_resolutionLoc, fragColor] = [\r\n    \"uScale\",\r\n    \"uOffset\",\r\n    \"uColor\",\r\n    \"uTime\",\r\n    \"u_resolution\",\r\n    \"fragColor\"\r\n    ].map(name => gl.getUniformLocation(prog, name))\r\n    time = uTime\r\n    gl.useProgram(prog)\r\n    gl.uniform1f(uTime, 0)\r\n    gl.uniform2fv(uScale, [2.0 / width, -2.0 / height])\r\n    gl.uniform2fv(uOffset, [0.0, 0.0])\r\n    gl.uniform4fv(uColor, [0.0, 0.0, 0.0, 1.0])\r\n    gl.uniform4fv(fragColor, [0.0, 0.0, 0.0, 1.0])\r\n    gl.uniform2f(u_resolutionLoc, gl.canvas.width, gl.canvas.height)\r\n    gl.clearColor(1.0, 1.0, 1.0, 1.0)\r\n    gl.clear(gl.COLOR_BUFFER_BIT)\r\n    const vertBuffer = gl.createBuffer()\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer)\r\n    gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW)\r\n    const indxBuffer = gl.createBuffer()\r\n    const indexData = new Uint16Array(indices)\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indxBuffer)\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indexData, gl.STATIC_DRAW)\r\n    gl.enableVertexAttribArray(0)\r\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, true, 8, 0)\r\n    gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0)\r\n    gl.flush()\r\n    tick(Date.now())\r\n}\r\n\r\nlet onloadedFont = function(err: any, font: opentype.Font | undefined) {\r\n    if (err) {\r\n        alert(\"Font could not be loaded: \" + err)\r\n    } else if (font) {\r\n        console.log(font)\r\n        draw(font)\r\n    }\r\n}\r\n\r\nexport let test = function (fontUrl=FONTURL) {\r\n    opentype.load(\r\n        fontUrl,\r\n        onloadedFont\r\n      )    \r\n}\r\ninterface WavingParam {\r\n  words: Word[],\r\n  fontUrl?: string,\r\n  speed: number,\r\n  entropy: number\r\n}\r\nexport let jumpingWordle = function ({words=[], fontUrl=FONTURL, speed=0.5, entropy=0.5 }: WavingParam) {\r\n    opentype.load(\r\n        fontUrl,\r\n        function(err, fontMeta: opentype.Font | undefined) {\r\n            if (err) {\r\n                console.log(fontUrl)\r\n                alert(\"Font could not be loaded: \" + err)\r\n            } else if (fontMeta) {\r\n                let statement = vsGenerator(speed, entropy)\r\n                draw(fontMeta, words, statement)\r\n            }\r\n        }\r\n    )\r\n}","/* eslint-disable */\r\n/**\r\n * doc comment for animator.ts\r\n * @remarks \r\n * the latest design for animation unit\r\n * the logic is to use Animator to control GroupManager\r\n * @packageDocumentation\r\n */\r\nimport * as d3Timer from 'd3-timer'\r\nimport * as d3Ease from 'd3-ease'\r\nimport * as d3Itpl from 'd3-interpolate'\r\nimport { PlotHandler } from './plot'\r\nimport * as Gif from \"@/assets/lib/gif/gif\"\r\nimport { kmeans } from '@/assets/lib/kmeans'\r\nimport { FontConfig } from \"@/assets/variable-font\"\r\nimport * as Manual from \"@/assets/manual\"\r\nimport { KeyframeConfig, GroupingMode, Word, Mode, MetaConfig, GroupManagerConfig, AnimatorPlayParams} from \"@/assets/types\"\r\nimport { KeyFrameHandler } from './keyframe-handler'\r\nimport { Meta } from './animation'\r\nimport { jumpingWordle } from \"@/assets/jump\"\r\n\r\nclass KeyFrame implements KeyframeConfig {\r\n    public x: number = 0\r\n    public y: number = 0\r\n    public xoff: number = 0\r\n    public yoff: number = 0\r\n    public rotate: number = 0\r\n    public scale: number = 1\r\n    public opacity: number = 1\r\n    public color: string = 'black'\r\n    public stage: number = 0\r\n    public duration: number = 10\r\n    public font: FontConfig = new FontConfig() \r\n    constructor(configs: Partial<KeyframeConfig>) {\r\n        Object.assign(this, configs);\r\n    }\r\n}\r\n\r\nclass GroupManager implements GroupManagerConfig {\r\n    public order: number = 0;\r\n    public delay: number = 0;\r\n    public duration: number = 2000;\r\n    public ease: (a: number) => (number) = (a:number) => a; //d3Ease.easeCubic\r\n    public words: Array<MetaConfig> = [];\r\n    public origin: Array<MetaConfig> = [];\r\n    public keyFrames: Array<KeyFrame> = [];\r\n    public frameCounter: number = 0;\r\n    public font: FontConfig = new FontConfig();\r\n    constructor(configs: Partial<GroupManager>) {\r\n        Object.assign(this, configs);\r\n    }\r\n\r\n    public updateWord(ckf: KeyFrame, nkf: KeyFrame, frameAt: number, phase: number) {\r\n        this.font.setValWithRatio('width', 1);\r\n        // this.font.setValWithRatio('italic', Math.abs(Math.sin(Date.now()/1000)));\r\n        // this.font.setValWithRatio('weight', phase);\r\n        const color = d3Itpl.interpolateHcl(ckf.color, nkf.color)(frameAt);\r\n        this.font.update({\r\n            italic: (nkf.font.italic - ckf.font.italic) * this.ease(frameAt),\r\n            weight: (nkf.font.weight - ckf.font.weight) * this.ease(frameAt),\r\n        })\r\n        const fontString = this.font.getCss();\r\n        // assign by value  \r\n        this.words.forEach((d) => {\r\n            const xoff = (nkf.xoff - ckf.xoff) * this.ease(frameAt);\r\n            const yoff = (nkf.yoff - ckf.yoff) * this.ease(frameAt);\r\n            const scale = (nkf.scale - ckf.scale) * this.ease(frameAt);\r\n            const rotate = (nkf.rotate - ckf.rotate) * this.ease(frameAt);\r\n            d.x = d.x! + xoff;\r\n            d.y = d.y! + yoff;\r\n            d.rotate = rotate;\r\n            d.size = d.trues! * (1 + scale);\r\n         //   d.color = d.color || color;\r\n            d.fontString = fontString;\r\n        });\r\n    }\r\n\r\n    public setFrameCounter(fc: number) {\r\n        this.frameCounter = fc;\r\n    }\r\n\r\n    public reset() {\r\n        this.words = this.origin.map(a => Object.assign({}, a));\r\n        this.frameCounter = 0;\r\n    }\r\n}\r\n\r\n/** obatin animating frames and control the groups */\r\nclass WordleAnimator {\r\n    public data: Array<Word> = [];\r\n    public timer?: d3Timer.Timer | undefined;\r\n    readonly words: Array<MetaConfig> = new Array();\r\n    public duration: number = 30000;\r\n    public groupManagers: Array<GroupManager> = [];\r\n    public plotHandler?: PlotHandler;\r\n    public mode: Mode = Mode.dance;\r\n    public extent: number = 0.5;\r\n    public speed: number = 0.5;\r\n    public entropy: number = 0.5;\r\n    public gif: any;\r\n    public wordMap: Map<string, number> = new Map()\r\n    constructor(configs: Partial<WordleAnimator>) {\r\n        Object.assign(this, configs);\r\n        this.data.forEach((word: Word, idx: number) => {\r\n            this.wordMap.set(word.text!, idx)\r\n            this.words.push(new Meta(word, this.plotHandler!.width, this.plotHandler!.height))\r\n        })\r\n    }\r\n\r\n    public createManagers(numGroups: number, field: Partial<GroupManager>={}) {\r\n        this.groupManagers = new Array(numGroups);\r\n        for(var i = 0; i < numGroups; ++i) {\r\n            this.groupManagers[i] = new GroupManager(field);\r\n        }\r\n    }\r\n\r\n    public assignKeyFrame(keyFrames: KeyFrame[][]) {\r\n        this.groupManagers.forEach((gm, idx) => {\r\n            gm.keyFrames = keyFrames[idx];\r\n        });\r\n    }\r\n\r\n    /** Devide the words into groups\r\n     *  1. create groupNum group managers\r\n     *  2. assign words to each group manager according to the mode\r\n     */\r\n    public divideGroup(mode: GroupingMode, centers: [number, number][]=[]) {\r\n        let numGroup = centers.length == 0 ? this.groupManagers.length : centers.length;\r\n        let numWordsPerGroup = Math.ceil(this.words.length / numGroup);\r\n        let assignedWords = [] as MetaConfig[];\r\n        if (mode !== GroupingMode.xy) {\r\n            if (mode === GroupingMode.random) {\r\n                assignedWords = shuffle(this.words);\r\n            } else if (mode === GroupingMode.x) {\r\n                assignedWords = this.words.sort((a, b) => a.x! - b.x!);\r\n            } else if (mode == GroupingMode.y) {\r\n                assignedWords = this.words.sort((a, b) => a.y! - b.y!);\r\n            }\r\n            this.groupManagers.forEach((group, i) => {\r\n                const startIdx = numWordsPerGroup * i;\r\n                const endIdx = startIdx + numWordsPerGroup;\r\n                const words = assignedWords.slice(startIdx, endIdx);\r\n                group.origin = words.map(x => Object.assign({}, x));\r\n                group.words = words.map(x => Object.assign({}, x));\r\n            })\r\n        }\r\n        else {  // divide by xy\r\n            let positions = this.words.map((word: MetaConfig) => [word.x, word.y]);\r\n            let alias = centers.length == 0? \"kmeans\": centers \r\n            let result = kmeans(positions, numGroup, alias);\r\n            let wordBags = getMatrix(numGroup, 0) as Array<Array<MetaConfig>>;\r\n            result.indexes.forEach((d: number, idx: number) => {\r\n                wordBags[d].push(this.words[idx]);\r\n            });\r\n            this.groupManagers.forEach((group, idx) => {\r\n                const words = wordBags[idx];\r\n                group.origin = words.map(x => Object.assign({}, x));\r\n                group.words = words.map(x => Object.assign({}, x));\r\n            });\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        this.groupManagers.forEach(gm => {\r\n            gm.words = gm.origin.map((v) => Object.assign({}, v));\r\n            gm.frameCounter = 0;\r\n        })\r\n    }\r\n\r\n    public update(field: string, value: any) {\r\n        if (field === 'duration') this.duration = (value as number)\r\n        if (field === 'mode') this.mode = (value as Mode)\r\n    }\r\n\r\n    /** Play the animated wordle.\r\n     * @param {boolean} gifFlag whether to produce Gif\r\n     * 1. get keyframes with given extent, speed, entropy\r\n     *  - extent - extent at which\r\n     */\r\n    public play({gifFlag = false, replay = false} : AnimatorPlayParams = {}) {\r\n        let mode = this.mode\r\n        let svgFlag = mode !== Mode.wave\r\n        this.reset()\r\n        if (mode === Mode.wave) this.playWaving({gifFlag, replay})\r\n        if (mode === Mode.swing) this.playSwinging({gifFlag, replay})\r\n        if (mode === Mode.dance) this.playDancing({gifFlag, replay})\r\n        if (mode === Mode.split) this.playSplitting({gifFlag, replay})\r\n        this.plotHandler!.svg.style('display', svgFlag? '': 'none')\r\n        this.plotHandler!.canvas!.style.display = svgFlag? 'none': ''\r\n    }\r\n\r\n    public playWaving({gifFlag = false, replay = false} : AnimatorPlayParams = {}) {\r\n        let data = this.data.map(v => Object.assign({}, v))\r\n        let font = data[0].font\r\n        jumpingWordle({\r\n            words: data,\r\n            entropy: this.entropy,\r\n            speed: this.speed,\r\n            fontUrl: `./font/${font}.ttf`\r\n        })\r\n    }\r\n\r\n    public playSwinging({gifFlag = false, replay = false} : AnimatorPlayParams = {}) {\r\n        if (!replay) {\r\n            this.plotHandler?.plotOnSvg(this.data);\r\n            const keyFrameHandler = new KeyFrameHandler();\r\n            const wordLength = this.words.length;\r\n            const keyFrames = keyFrameHandler.getKeyFrames(Mode.swing, wordLength, this.speed, this.entropy);\r\n            const numGroups = keyFrames.length;\r\n            const divideMode = this.entropy > 0.5? GroupingMode.random : GroupingMode.y\r\n            this.createManagers(numGroups);\r\n            this.assignKeyFrame(keyFrames);\r\n            this.divideGroup(divideMode);\r\n        } else {\r\n            this.reset();\r\n        }  \r\n        this.startPlay(gifFlag, replay)      \r\n    }\r\n\r\n    public playSplitting({gifFlag = false, replay = false} : AnimatorPlayParams = {}) {\r\n        if (!replay) {\r\n            this.plotHandler?.plotOnSvg(this.data);\r\n            const keyFrameHandler =  new KeyFrameHandler();\r\n            const wordLength = this.words.length;\r\n            let centers = [] as Array<[number, number]>\r\n            let a = this.plotHandler!.width / 4, b = this.plotHandler!.height / 4\r\n            let alpha = Math.random() * Math.PI/4\r\n            const keyFrames = keyFrameHandler.getKeyFrames(Mode.split, wordLength, this.speed, this.entropy, alpha);\r\n            const numGroups = keyFrames.length;\r\n            for (let idx = 0; idx < numGroups; idx ++) {\r\n                let theta = idx * 2 * Math.PI / numGroups + alpha\r\n                let x = a * Math.cos(theta)\r\n                let y = b * Math.sin(theta)\r\n                centers.push([x, y])\r\n            }\r\n            this.createManagers(numGroups, {ease: d3Ease.easeExp});\r\n            this.assignKeyFrame(keyFrames);\r\n            this.divideGroup(GroupingMode.xy, centers);\r\n        } else {\r\n            this.reset();\r\n        }\r\n        this.startPlay(gifFlag, replay)\r\n    }\r\n\r\n\r\n    public playDancing({gifFlag = false, replay = false} : AnimatorPlayParams = {}) {\r\n        if (!replay) {\r\n            this.plotHandler?.plotOnSvg(this.data);\r\n            const keyFrameHandler = new KeyFrameHandler();\r\n            const wordLength = this.words.length;\r\n            const keyFrames = keyFrameHandler.getKeyFrames(Mode.dance, wordLength, this.extent , this.speed, this.entropy);\r\n            const numGroups = keyFrames.length;\r\n            const divideMode = getDivideMode();\r\n            this.createManagers(numGroups);\r\n            this.assignKeyFrame(keyFrames);\r\n            this.divideGroup(divideMode);\r\n        } else {\r\n            this.reset();\r\n        }  \r\n        this.startPlay(gifFlag, replay)      \r\n    }\r\n    /** Core function to play the animation according to the keyframes\r\n     *\r\n     * @param gifFlag \r\n     * @param replay \r\n     */\r\n    public startPlay(gifFlag = false, replay = false) {\r\n        const gms = this.groupManagers;\r\n        this.timer?.stop();\r\n        this.timer = d3Timer.timer((elapsed) => {\r\n            if (elapsed < this.duration) {      \r\n                let totalWords: Array<Word> = new Array<Word>(this.words.length);\r\n                gms.forEach((gm, _) => { \r\n                    let fc = gm.frameCounter;\r\n                    const keyFrames = gm.keyFrames;\r\n                    const ckf = keyFrames[fc];\r\n                    const nkf = keyFrames[fc + 1];\r\n                    const cfa = nkf.stage / 100 * this.duration;\r\n                    if( elapsed >= cfa ) {\r\n                        gm.setFrameCounter(fc + 1);\r\n                    }\r\n                    const fs = ckf.stage / 100 * this.duration; \r\n                    const frameAt = (elapsed - fs) / (cfa - fs);\r\n                    const phase = elapsed / gm.duration;\r\n                    gm.updateWord(ckf, nkf, frameAt, phase);\r\n                    gm.words.forEach((word, _) => {\r\n                        totalWords[this.wordMap.get(word.text!)!] = word\r\n                    })\r\n                })\r\n                this.plotHandler?.updateOnSvg(totalWords);\r\n                if (gifFlag) {\r\n                    this.gif.addFrame(this.plotHandler?.canvas, { copy: true, delay: this.duration / 256 });\r\n                }\r\n            }\r\n            else {\r\n                this.timer?.stop()\r\n                if (gifFlag) {\r\n                    this.gif.render()\r\n                }\r\n                this.play({gifFlag: gifFlag, replay: true});\r\n            }\r\n        }, 10)\r\n    }\r\n\r\n    private getTotalWords() {\r\n        let res = [] as Array<Word>;\r\n        this.groupManagers.forEach((group: GroupManager, idx: number) => {\r\n            res = res.concat(group.words)\r\n        })\r\n        return res\r\n    }\r\n\r\n    public stop() {\r\n        this.timer?.stop()\r\n    }\r\n    /**Generate Gif for a round\r\n     * Reference: https://github.com/jnordberg/gif.js\r\n    @param quality the sampling rate\r\n    */\r\n    public createGif(quality: number = 5) {\r\n        this.gif = new Gif({\r\n            quality: quality\r\n        })\r\n        let param = getKeyFrames();\r\n        this.gif.on('finished', function (blob: any) {\r\n            let wlink = document.createElement('a')\r\n            wlink.setAttribute('target', '_blank')\r\n            wlink.setAttribute('href', URL.createObjectURL(blob))\r\n            wlink.setAttribute('download', \"animation.gif\")\r\n            wlink.addEventListener('click', function () {\r\n                this.remove()\r\n            })\r\n            wlink.click()\r\n\r\n            let plink = document.createElement('a')\r\n            plink.setAttribute('target', '_blank')\r\n            plink.setAttribute('href', \"data:text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(param)))\r\n            plink.setAttribute('download', \"param.json\")\r\n            plink.addEventListener('click', function () {\r\n                this.remove()\r\n            })\r\n            plink.click()\r\n        })\r\n        return this\r\n    }\r\n\r\n    /** Group the words according to position.\r\n     */\r\n    private assignWords(groupNum: number, numWordsPerGroup: number, wordsCopy: MetaConfig[]) {\r\n        for (let i = 0; i < groupNum; i++) {\r\n            let startIdx = numWordsPerGroup * i;\r\n            let endIdx = startIdx + numWordsPerGroup;\r\n            this.groupManagers[i].words = wordsCopy.slice(startIdx, endIdx);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction getDivideMode() {\r\n    return GroupingMode.x;\r\n}\r\n\r\n// separate key frame getter logic from wordle class\r\nfunction getKeyFrames() {\r\n    // logic to get keyframes, hard coded for now\r\n    return [Manual.smallShake(), Manual.colorTransition(), Manual.shakeNRotate()];\r\n}\r\n\r\n\r\nlet shuffle = function <T>(array: T[]) {\r\n    let currIdx = array.length, tempVal, randIdx\r\n    while (0 != currIdx) {\r\n        randIdx = Math.floor(Math.random() * currIdx)\r\n        currIdx -= 1\r\n        tempVal = array[currIdx]\r\n        array[currIdx] = array[randIdx]\r\n        array[randIdx] = tempVal\r\n    }\r\n    return array\r\n}\r\n\r\nlet getMatrix = function <T>(row: number, col: number) {\r\n    let matrix = [] as Array<Array<T>>\r\n    for (let i = 0; i < row; i++) {\r\n        if (col !== 0) {\r\n            matrix.push(new Array(col).fill(0))\r\n        }\r\n        else {\r\n            let slot = [] as Array<T>\r\n            matrix.push(slot)\r\n        }\r\n    }\r\n    return matrix\r\n}\r\n\r\nexport { WordleAnimator, KeyFrame, GroupManager }"],"sourceRoot":""}